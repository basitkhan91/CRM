<div class="fixed-table-container-inner table-responsive cat4-table" style="height:380px;">
    <div style="position: absolute; width: 100%; z-index: 1;">
        <span class="cat-heading cat4">Add New Charges<i (click)="addRow()" class="fa fa-plus"></i></span>
    </div>
    <table class="table table-bordered table-fixed workflow-table-charges" style="margin-top: 31px;">
        <tr>
            <th><label>S.No</label></th>
            <th><label>Type *</label></th>
            <th><label>Description</label></th>
            <th><label>QTY *</label></th>
            <th><label>Unit Cost *</label></th>
            <th><label>Extended Cost *</label></th>
            <th><label>Unit Price</label></th>
            <th><label>Extended Price</label></th>
            <th><label>Currency</label></th>
            <th><label>FX Rate</label></th>
            <th><label>Vendor Name</label></th>
            <th><label>Vendor Price/Unit </label></th>
            <th><label>Actions </label></th>
        </tr>
        <tr [hidden]="charge.isDelete" *ngFor="let charge of workFlow.charges; let i = index">
            <td>{{(currentPage - 1) * itemsPerPage + i + 1}}</td>
            <td>
                <select class="form-control custom-select wf-pub-id" id='dllChargesType' (change)="onChargeTypeChange(charge)" [(ngModel)]="charge.workflowChargeTypeId" style="width: 110px;font-size:12px !important;">
                    <option value="">Select</option>
                    <option value={{ctype.id}} *ngFor="let ctype of chargesTypes">{{ctype.name}}</option>
                </select>
            </td>
            <td>
                <input type="text" pInputText value="{{charge.description}}" [(ngModel)]="charge.description" class="form-control">

            <td><input type="text" pInputText pKeyFilter="pnum" maxlength="10" class="form-control" value="{{charge.quantity}}" (input)="calculateQtySummation()" [(ngModel)]="charge.quantity"></td>
            <td><input type="text" pInputText pKeyFilter="money" class="form-control" value="{{charge.unitCost}}" (input)="calculateExtendedCost(charge)" [(ngModel)]="charge.unitCost"></td>
            <td><input type="text" pInputText pKeyFilter="money" class="form-control" [disabled]="true" value="{{charge.extendedCost}}" [(ngModel)]="charge.extendedCost" (input)="calculateExtendedCostSummation()"></td>
            <td><input type="text" pInputText pKeyFilter="money" class="form-control" value="{{charge.unitPrice}}" [(ngModel)]="charge.unitPrice" (input)="calculateExtendedPrice(charge)"> </td>
            <td><input type="text" pInputText pKeyFilter="money" class="form-control" value="{{charge.extendedPrice}}" [(ngModel)]="charge.extendedPrice" disabled></td>
            <td>
                <select class="form-control custom-select" id='dllChargesCurrency' [(ngModel)]="charge.currencyId">
                    <option value="">Select</option>
                    <option value={{currency.currencyId}} *ngFor="let currency of chargesCurrency">{{currency.symbol}}</option>
                </select>
            </td>
            <td><input type="text" pInputText pKeyFilter="money" class="form-control" value="{{charge.forexRate}}" [(ngModel)]="charge.forexRate"></td>
            <td>
                <p-autoComplete (onSelect)="onVendorCodeselected(charge,$event)" [(ngModel)]="charge.vendorName" [suggestions]="vendorCodes" (completeMethod)="filterVendorCodes($event)" [size]="30"
                                [minLength]="1" [dropdown]="true" class="workflow-measurement-select">
                    <ng-template let-vendorCode pTemplate="item">
                        <div class="ui-helper-clearfix">{{vendorCode}}</div>
                    </ng-template>
                </p-autoComplete>
            </td>

            <td><input type="text" pInputText pKeyFilter="money" class="form-control" value="{{charge.vendorUnitPrice}}" [(ngModel)]="charge.vendorUnitPrice"></td>
            <td>
                <button class="btn btn-danger nobg" (click)="deleteRow(i)">
                    <i class="fa fa-trash"></i>
                </button>
            </td>
        </tr>
        <tr *ngIf="workFlow.charges.length > 0">
            <td>
                <b>Total  </b>
            </td>
            <td> &nbsp;</td>
            <td> &nbsp;</td>
            <td>{{qtySummation}}</td>
            <td>&nbsp;</td>
            <td>{{extendedCostSummation}}</td>
            <td>&nbsp;</td>
            <td>{{workFlow.totalChargesCost}}</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
        </tr>
    </table>
</div>