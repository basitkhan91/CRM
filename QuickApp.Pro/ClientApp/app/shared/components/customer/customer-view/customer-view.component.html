<div class="modal-header">
    <button type="button" class="close" style="padding: 0 !important" (click)="dismissModel()">
        &times;
    </button>
    <div class="col-sm-3">
        <h4 class="modal-title">Details of Customer</h4>
    </div>
    <div class="col-sm-3">
        Customer Name<span style="color:red"> : {{viewDataGeneralInformation.name}}</span>
    </div>
    <div class="col-sm-3">
        Customer Code<span style="color:red"> : {{viewDataGeneralInformation.customerCode}}</span>
    </div>    
</div>
<div class="modal-body" *ngIf="viewDataGeneralInformation ">
    <div>
        <button type="button" class="btn btn-primary" (click)="ExpandAllCustomerDetailsModel()">Open All</button>
        <button type="button" class="btn btn-secondary" (click)="CloseAllCustomerDetailsModel()">Close All</button>
    </div>
    <div class="panel-group mt-2" id="accordion" >
        <div class="panel panel-default">
            <div class="panel-heading">
                <h4 class="panel-title">
                    <div>

                    </div>
                    <a data-toggle="collapse" href="#step1">General Info</a>
                </h4>
            </div>
            <div id="step1" class="panel-collapse collapse in show">
                <div class="panel-body">
                    <div class="modal-content p-1">
                        <div class="default-bg clear">
                            <div class="col-sm-6">
                                <p>
                                    <span class="label"><b>Internal / External / Affiliate: <span class="text-danger">*</span></b></span><span class="value">
                                        {{
                            viewDataGeneralInformation.accountType
                                        }}
                                    </span>
                                </p>
                                <p>
                                    <span class="label"><b>Account Type: <span class="text-danger">*</span></b></span><span class="value">
                                        {{
                            viewDataGeneralInformation.type
                                        }}
                                    </span>
                                </p>
                                <p>
                                    <span class="label"><b>Customer Name: <span class="text-danger">*</span></b></span><span class="value">
                                        {{
                          viewDataGeneralInformation.name
                                        }}
                                    </span>
                                </p>
                                <p>
                                    <span class="label"><b>Customer Code: <span class="text-danger">*</span></b></span><span class="value">
                                        {{
                          viewDataGeneralInformation.customerCode
                                        }}
                                    </span>
                                </p>                               
                                
                                <p>
                                    <span class="label"><b>D/B/A: </b></span><span class="value">
                                        {{
                          viewDataGeneralInformation.doingBuinessAsName
                                        }}
                                    </span>
                                </p>
                                <p>
                                    <span class="label"><b>Parent: </b></span><span class="value">
                                        {{
                          viewDataGeneralInformation.customerParentName
                                        }}
                                    </span>
                                </p>
                                <p>
                                    <span class="label"><b>Phone: <span class="text-danger">*</span></b></span><span class="value">
                                        {{
                            viewDataGeneralInformation.customerPhone
                                        }} - {{viewDataGeneralInformation.customerPhoneExt}}
                                    </span>
                                </p>
                                <p>
                                    <span class="label"><b>Email: <span class="text-danger">*</span></b></span><span class="value">
                                        {{
                            viewDataGeneralInformation.email
                                        }}
                                    </span>
                                </p>

                                <p>
                                    <span class="label"><b>Address 1:  <span class="text-danger">*</span></b></span><span class="value">
                                        {{
                          viewDataGeneralInformation.address1
                                        }}
                                    </span>
                                </p>
                                <p>
                                    <span class="label"><b>Address 2: </b></span><span class="value">
                                        {{
                          viewDataGeneralInformation.address2
                                        }}
                                    </span>
                                </p>

                                <p>
                                    <span class="label"><b>City: <span class="text-danger">*</span></b></span><span class="value">
                                        {{
                          viewDataGeneralInformation.city
                                        }}
                                    </span>
                                </p>
                                <p>
                                    <span class="label"><b>Primary State/Province: <span class="text-danger">*</span></b></span><span class="value">
                                        {{
                          viewDataGeneralInformation.stateOrProvince
                                        }}
                                    </span>
                                </p>
                                <p>
                                    <span class="label"><b>Postal: <span class="text-danger">*</span></b></span><span class="value">
                                        {{
                          viewDataGeneralInformation.postalCode
                                        }}
                                    </span>
                                </p>
                                <p>
                                    <span class="label"><b>Country: <span class="text-danger">*</span></b></span><span class="value">
                                        {{
                          viewDataGeneralInformation.countryName
                                        }}
                                    </span>
                                </p>
                                
                            </div>
                            <div class="col-sm-6">
                                <p>
                                    <span class="value"><input type="checkbox" name="isIsBillingAddress" [(ngModel)]="viewDataGeneralInformation.isAddressForBilling" disabled><span><b>  Is this Address For Billing </b></span></span>

                                    
                                </p>

                                <p>
                                    <span class="value"><input type="checkbox" name="isIsShippingAddress" [(ngModel)]="viewDataGeneralInformation.isAddressForShipping" disabled><span><b>  Is this Address For Shipping </b></span></span>

                                    
                                </p>
                                <p>
                                    <span class="value"><input type="checkbox" name="iscustomerAlsoVendor" [(ngModel)]="viewDataGeneralInformation.isCustomerAlsoVendor" disabled><span><b>  Is Customer Also Vendor </b></span></span>

                                    
                                </p>
                                <p>
                                    <span class="label"><b>Classification: <span class="text-danger">*</span></b></span><span class="value">

                                        {{viewDataclassification}}

                                    </span>
                                </p>
                                <p>
                                    <span class="label"><b>Integration With: </b></span><span class="value">
                                        {{
                                            viewDataIntegration
                                        }}
                                    </span>
                                </p>

                                <p>
                                    <span class="label"><b>Contract Ref: </b></span><span class="value">
                                        {{
                          viewDataGeneralInformation.contractReference
                                        }}
                                    </span>
                                </p>
                                <p>
                                    <span class="label"><b>PBH Customer: </b></span><span class="value">
                                        {{
                          viewDataGeneralInformation.pbhCustomerMemo
                                        }}
                                    </span>
                                </p>
                                <p>
                                    <span class="label"><b>URL to Customer site: </b></span><span class="value">
                                        {{
                            viewDataGeneralInformation.customerURL
                                        }}
                                    </span>
                                </p>
                                <p>
                                    <span class="label"><b>Restrict PMA: </b></span><span class="value">
                                        <input type="checkbox" name="restrictPMA" [(ngModel)]="viewDataGeneralInformation.restrictPMA" disabled>
                                         
                                    </span>
                                </p>
                                
                                <div *ngIf="viewDataGeneralInformation.restrictPMA == true" >
                                    <p-table #restrictPMATable class="rpo-table-cstm" [value]="restrictedPMAParts" [metaKeySelection]="true" [paginator]="true" [pageLinks]="3" [rowsPerPageOptions]="[10,20,50,100]" [rows]="pageSize" [columns]="customerPMAColumns" [resizableColumns]="true" [reorderableColumns]="true" [scrollable]="true" scrollHeight="450px">

                                        <ng-template pTemplate="colgroup" let-columns>
                                            <colgroup>
                                                <col *ngFor="let col of columns" style="width:130px">
                                            </colgroup>
                                         </ng-template>

                                        <ng-template pTemplate="header" let-columns>
                                            <tr>
                                                <th *ngFor="let col of columns"  [pSortableColumn]="col.field">
                                                    {{col.header}}
                                                    <p-sortIcon [field]="col.field"></p-sortIcon>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th style="width:auto" *ngFor="let col of columns" [ngSwitch]="col.field">
                                                    <input style="width:100%;" pInputText type="text" (input)="restrictPMATable.filter($event.target.value, col.field, 'contains')">
                                                </th>
                                            </tr>
                                        </ng-template>
                                        <ng-template pTemplate="body" let-part let-rowData let-columns="columns" let-i="rowIndex">
                                            <tr>
                                                <td *ngFor="let col of columns">
                                                    {{part[col.field]}}
                                                </td>
                                            </tr>
                                        </ng-template>
                                        <ng-template pTemplate="emptymessage" let-columns *ngIf="restrictedPMAParts?.length == 0">
                                            <tr>
                                                <td [attr.colspan]="columns.length" style="color: red; font-weight: bold; text-align: center">
                                                    No records found
                                                </td>
                                            </tr>
                                        </ng-template>
                                        <ng-template pTemplate="summary" id="footer">
                                            <label id="footer" class="footer">No'of records:</label>
                                            <input style="width: 5%;" [(ngModel)]="restrictPMATable._totalRecords" [disabled]="true" pInputText type="text" /> &nbsp;&nbsp;
                                            <label id="footer" class="footer1">Pages Count:</label>
                                            <input style="width: 5%;" [ngModel]="getPageCount(restrictPMATable._totalRecords,pageSize)" [disabled]="true" pInputText type="text" />
                                        </ng-template>
                                    </p-table>    
                                    <!-- <div class="total_records_section" *ngIf="restrictedPMAParts?.length > 0">
                                        <label  class="footer">No'of records:  <input style="width: 5%;"
                                            value="{{restrictedPMAParts?.length}}"
                                            [disabled]="true"
                                            pInputText
                                            type="text" /> </label>                                            
                                    </div> -->
                                </div>

                                <p>
                                    <span class="label"><b>Restrict DER: </b></span><span class="value">
                                       <input type="checkbox" name="restrictBER" [(ngModel)]="viewDataGeneralInformation.restrictBER" disabled>
                                    </span>
                                </p>
                                <div *ngIf="viewDataGeneralInformation.restrictBER == true">
                                    <p-table #table2 class="rpo-table-cstm" [paginator]="true" [pageLinks]="3" [rowsPerPageOptions]="[10,20,50,100]" [value]="restrictedDERParts" [metaKeySelection]="true" [rows]="pageSize" [columns]="customerDERColumns" [resizableColumns]="true" [reorderableColumns]="true" [scrollable]="true" scrollHeight="450px">

                                        <ng-template pTemplate="colgroup" let-columns>
                                            <colgroup>
                                                <col *ngFor="let col of columns" style="width:130px">
                                            </colgroup>
                                         </ng-template>

                                        <ng-template pTemplate="header" let-columns>
                                            <tr>
                                                <th *ngFor="let col of columns" [pSortableColumn]="col.field">
                                                    {{col.header}}
                                                    <p-sortIcon [field]="col.field"></p-sortIcon>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th style="width:auto" *ngFor="let col of columns" [ngSwitch]="col.field">
                                                    <input style="width:100%;" pInputText type="text" (input)="table2.filter($event.target.value, col.field, 'contains')">
                                                </th>
                                            </tr>
                                            
                                        </ng-template>
                                        <ng-template pTemplate="body" let-part let-rowData let-columns="columns" let-i="rowIndex">
                                            <tr>
                                                <td *ngFor="let col of columns">
                                                    {{part[col.field]}}
                                                </td>
                                            </tr>
                                        </ng-template>
                                        <ng-template pTemplate="emptymessage" let-columns *ngIf="restrictedDERParts?.length == 0">
                                            <tr>
                                                <td [attr.colspan]="columns.length" style="color: red; font-weight: bold; text-align: center">
                                                    No records found
                                                </td>
                                            </tr>
                                        </ng-template>
                                        <ng-template pTemplate="summary" id="footer">
                                            <label id="footer" class="footer">No'of records:</label>
                                            <input style="width: 5%;" [(ngModel)]="table2._totalRecords" [disabled]="true" pInputText type="text" /> &nbsp;&nbsp;
                                            <label id="footer" class="footer1">Pages Count:</label>
                                            <input style="width: 5%;" [ngModel]="getPageCount(table2._totalRecords,pageSize)" [disabled]="true" pInputText type="text" />
                                        </ng-template>
                                        <!-- <ng-template pTemplate="summary" let-columns *ngIf="countOfRestrictDerParts > 0">
                                            <div [ngClass]="{'display-none': restrictedDERParts.length > 0}">
                                                <label  class="footer" [ngClass]="{'display-none': restrictedDERParts.length > 0}">No'of records:</label>
                                                <input style="width: 5%;"
                                                        value="{{restrictedDERParts?.length}}"
                                                        [disabled]="true"
                                                        pInputText
                                                        type="text" />  
                                            </div>
                                        </ng-template> -->
                                    </p-table>        
                                    <!-- <div class="total_records_section" *ngIf="restrictedDERParts?.length > 0">
                                        <label  class="footer">No'of records: <input style="width: 5%;"
                                            value="{{restrictedDERParts?.length}}"
                                            [disabled]="true"
                                            pInputText
                                            type="text" />  </label>                                            
                                    </div>                               -->
                                </div>                              
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="panel panel-default">
            <div class="panel-heading">
                <h4 class="panel-title"> <a class="collapsed" data-toggle="collapse" href="#step2">Contact</a> </h4>
            </div>
            <div id="step2" class="panel-collapse  collapse">
                <div class="panel-body m-lr-7">
                    <div class="col-sm-12">
                        <app-customer-contacts [customerDataFromExternalComponents]="viewDataGeneralInformation"></app-customer-contacts>

                        <!-- <div class="shadow-Box">
                            <p-table #table3 class="table-responsive ptable-cus-pma" [paginator]="customerContacts.length > 0" [value]="customerContacts"  [rows]="pageSize" [columns]="contactTableColumns">
                                <ng-template pTemplate="header" let-columns>
                                    <tr>
                                            <th style="width: 40px;">Flag</th>

                                        <th *ngFor="let col of columns" [pSortableColumn]="col.field">
                                            {{col.header}}
                                            <p-sortIcon [field]="col.field"></p-sortIcon>
                                        </th>
                                    </tr>
                                    <tr>
                                            <th></th>

                                            <th style="width:auto" *ngFor="let col of columns" [ngSwitch]="col.field">
                                                <input style="width:100%;" pInputText type="text" (input)="table3.filter($event.target.value, col.field, 'contains')">
                                            </th>
                                        </tr>
                                </ng-template>
                                <ng-template pTemplate="body" let-part let-rowData let-columns="columns" let-i="rowIndex">
                                    <tr [ngClass]="{'row-primary': part.isDefaultContact === true}">
                                        <td > <span class="flag">
                                            <i  *ngIf="rowData.isDefaultContact == true"   [ngStyle]="{'color': rowData.isDefaultContact == true ? 'green' : 'none'}"  
                                                class="fa fa-flag" aria-hidden="true"></i>
                                                </span>
                                        
                                         </td>
                                        <td *ngFor="let col of columns" >
                                                <ng-container *ngIf="col.field!='workPhone'">
                                                    {{part[col.field]}}
                                                </ng-container>
                                                <ng-container *ngIf="col.field=='workPhone'">
                                                        {{part.workPhone}} - {{part.workPhoneExtn}}
                                                    </ng-container>
                                        </td>
                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="emptymessage" let-columns *ngIf="customerContacts.length == 0">
                                    <tr>
                                        <td [attr.colspan]="columns.length+1" style="color: red; font-weight: bold; text-align: center">
                                            No records found
                                        </td>
                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="summary" id="footer">
                                    <label id="footer" class="footer">No'of records:</label>
                                    <input style="width: 5%;" [(ngModel)]="table3._totalRecords" [disabled]="true" pInputText type="text" /> &nbsp;&nbsp;
                                    <label id="footer" class="footer1">Pages Count:</label>
                                   
                                    <input style="width: 5%;" [ngModel]="getPageCount(table3._totalRecords,pageSize)" [disabled]="true" pInputText type="text" />
                                </ng-template>

                            </p-table>
 
                        </div> -->
                    </div>
                </div>
            </div>
        </div>


        <div class="panel panel-default">
            <div class="panel-heading">
                <h4 class="panel-title"> <a class="collapsed" data-toggle="collapse" href="#step3">Aircraft Info</a> </h4>
            </div>
            <div id="step3" class="panel-collapse  collapse">
                <div class="panel-body aircraft-panel">
                    <div class="col-sm-12">
                        <app-customer-aircraft [customerDataFromExternalComponents]="viewDataGeneralInformation"></app-customer-aircraft>
                        <!-- <div class="shadow-Box">
                            <p-table  #aircraftTable class="table-responsive ptable-cus-pma" [paginator]="aircraftListDataValues.length > 0" [value]="aircraftListDataValues" [rows]="pageSize"  [columns]="colsaircraftLD">
                                <ng-template pTemplate="header" let-columns>
                                    <tr>
                                        <th *ngFor="let col of columns"  [pSortableColumn]="col.field">
                                            {{col.header}}
                                            <p-sortIcon [field]="col.field"></p-sortIcon>
                                        </th>
                                    </tr>
                                    <tr>
                                            <th style="width:auto" *ngFor="let col of columns" [ngSwitch]="col.field">
                                                <input style="width:100%;" pInputText type="text" (input)="aircraftTable.filter($event.target.value, col.field, 'contains')">
                                            </th>
                                        </tr>
                                </ng-template>
                                <ng-template pTemplate="body" let-part let-rowData let-columns="columns" let-i="rowIndex">
                                    <tr>
                                        <td *ngFor="let col of columns">
                                            {{part[col.field]}}
                                        </td>
                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="emptymessage" let-columns *ngIf="aircraftListDataValues.length == 0">
                                    <tr>
                                        <td [attr.colspan]="columns.length" style="color: red; font-weight: bold; text-align: center">
                                            No records found
                                        </td>
                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="summary" id="footer">
                                    <label id="footer" class="footer">No'of records:</label>
                                    <input style="width: 5%;" [(ngModel)]="aircraftTable._totalRecords" [disabled]="true" pInputText type="text" /> &nbsp;&nbsp;
                                    <label id="footer" class="footer1">Pages Count:</label>
                                   
                                    <input style="width: 5%;" [ngModel]="getPageCount(aircraftTable._totalRecords,pageSize)" [disabled]="true" pInputText type="text" />
                                </ng-template>
                            </p-table>     
                        </div> -->
                    </div>
                </div>
            </div>
        </div>

        <div class="panel panel-default">
            <div class="panel-heading">
                <h4 class="panel-title"> <a class="collapsed" data-toggle="collapse" href="#step4">ATA Info</a> </h4>
            </div>
            <div id="step4" class="panel-collapse collapse">
                <div class="panel-body">
                    <div class="col-sm-12">
                        <div class="shadow-Box">
                            <p-table #atainfotable class="rpo-table-cstm" [paginator]="true" [value]="ataListDataValues"  [rows]="pageSize"  [columns]="ataHeaders" [metaKeySelection]="true" [pageLinks]="3" [resizableColumns]="true" [reorderableColumns]="true" [scrollable]="true" scrollHeight="450px">

                                <ng-template pTemplate="colgroup" let-columns>
                                    <colgroup>
                                        <col *ngFor="let col of columns" style="width:130px">
                                    </colgroup>
                                 </ng-template>

                                <ng-template pTemplate="header" let-columns>
                                    <tr>
                                        <th *ngFor="let col of columns"  [pSortableColumn]="col.field">
                                            {{col.header}}
                                            <p-sortIcon [field]="col.field"></p-sortIcon>
                                        </th>
                                    </tr>
                                    <tr>
                                            <th style="width:auto" *ngFor="let col of columns" [ngSwitch]="col.field">
                                                <input style="width:100%;" pInputText type="text" (input)="atainfotable.filter($event.target.value, col.field, 'contains')">
                                            </th>
                                        </tr>
                                </ng-template>
                                <ng-template pTemplate="body" let-part let-rowData let-columns="columns" let-i="rowIndex">
                                    <tr>
                                        <td *ngFor="let col of columns">
                                            {{part[col.field]}}
                                        </td>
                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="emptymessage" let-columns *ngIf="ataListDataValues.length == 0">
                                    <tr>
                                        <td [attr.colspan]="columns.length" style="color: red; font-weight: bold; text-align: center">
                                            No records found
                                        </td>
                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="summary" id="footer">
                                    <label id="footer" class="footer">No'of records:</label>
                                    <input style="width: 5%;" [(ngModel)]="atainfotable._totalRecords" [disabled]="true" pInputText type="text" /> &nbsp;&nbsp;
                                    <label id="footer" class="footer1">Pages Count:</label>
                                   
                                    <input style="width: 5%;" [ngModel]="getPageCount(atainfotable._totalRecords,pageSize)" [disabled]="true" pInputText type="text" />
                                </ng-template>
     
                            </p-table> 
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="panel panel-default">
            <div class="panel-heading">
                <h4 class="panel-title"> <a class="collapsed" data-toggle="collapse" href="#step5">Financial Info</a> </h4>
            </div>
            <div id="step5" class="panel-collapse collapse">
                <div class="panel-body">
                    <div class="shadow-Box">
                        <div class="form-row">
                            <div class="col-sm-6">
                                <p><span class="label"><b>MarkUp %: </b></span><span class="value">{{viewDataGeneralInformation.markUpPercentage}}</span></p>
                                <p><span class="label"><b>Credit Limit: <span class="text-danger">*</span> </b></span><span class="value">{{viewDataGeneralInformation.creditLimit}}</span></p>
                                <p><span class="label"><b>Credit Terms: <span class="text-danger">*</span></b></span><span class="value">{{viewDataGeneralInformation.creditTermsName}}</span></p>
                                <p><span class="label"><b>Discount %: <span class="text-danger">*</span></b></span><span class="value">{{viewDataGeneralInformation.discountId}}</span></p>
                                <p><span class="label"><b>Allow Netting of AP/AR: </b></span><span class="value"><input type="checkbox" name="allowNettingOfAPAR" [(ngModel)]="viewDataGeneralInformation.allowNettingOfAPAR" disabled></span></p>
                                <p><span class="label"><b>Allow Partial Billing: </b></span><span class="value"><input type="checkbox" name="allowPartialBilling" [(ngModel)]="viewDataGeneralInformation.allowPartialBilling" disabled></span></p>
                                <p><span class="label"><b>Allow ProForma Billing: </b></span><span class="value"><input type="checkbox" name="allowProformaBilling" [(ngModel)]="viewDataGeneralInformation.allowProformaBilling" disabled></span></p>
        
                                <p><span class="label"><b>Taxable Exempt: </b></span><span class="value"><input type="checkbox" name="isTaxExempt" [(ngModel)]="viewDataGeneralInformation.isTaxExempt" disabled></span></p>
                                <!--<p><span class="label"><b>Tax Type: </b></span><span class="value">{{viewDataGeneralInformation.taxTypeName}}</span></p>-->
        
        
                                <!-- <p><span class="label"><b>Tax Rate - State/Prov: </b></span><span class="value">{{viewDataGeneralInformation.taxRateName}}</span></p>
                                <p><span class="label"><b>Tax Rate - Other: </b></span><span class="value">{{viewDataGeneralInformation.taxRateOther}}</span></p> -->
                            </div>
                            <div class="col-sm-6">
                                    <div >
                                            <p><span class="label"><b>Taxable Exempt: </b></span><span class="value">{{viewDataGeneralInformation.isTaxExempt}}</span></p>
                                            <div>
                                                <p><span class="label"><b>Attachment Details: </b></span></p>
                                                <p-table #taxexeptTable class="rpo-table-cstm" [paginator]="true" [value]="allCustomerFinanceDocumentsList" [rows]="pageSize" [columns]="allCustomerFinanceDocumentsListColumns" [metaKeySelection]="true" [resizableColumns]="true" [pageLinks]="3" [rowsPerPageOptions]="[10,20,50,100]" [reorderableColumns]="true" [scrollable]="true" scrollHeight="450px">
        
                                                    <ng-template pTemplate="colgroup" let-columns>
                                                        <colgroup>
                                                            <col *ngFor="let col of columns" style="width:130px">
                                                        </colgroup>
                                                     </ng-template>
        
                                                        <ng-template pTemplate="header" let-columns>
                                                            <tr>
                                                                <th *ngFor="let col of columns"  [pSortableColumn]="col.field">
                                                                    {{col.header}}
                                                                    <p-sortIcon [field]="col.field"></p-sortIcon>
                                                                </th>
                                                                <th>
                                                                   Download
                                                                </th>
                                                                <tr>
                                                                        <th style="width:auto" *ngFor="let col of columns" [ngSwitch]="col.field">
                                                                            <input style="width:100%;" pInputText type="text" (input)="taxexeptTable.filter($event.target.value, col.field, 'contains')">
                                                                        </th>
                                                                        <th></th>
                                                            </tr>
                                                        </ng-template>
                                                        <ng-template pTemplate="body" let-part let-rowData let-columns="columns" let-i="rowIndex">
                                                            <tr>
                                                                <td *ngFor="let col of columns">
                                                                    <ng-container *ngIf="col.field!='link'">
                                                                    {{part[col.field]}}
                                                                    </ng-container>
                                                                    
                                                                </td>
                                                                <td>
                                                                    <a (click)="downloadFileUpload(part)" matTooltip="Download" class="btn nobg btn-cstm"><span><i class="fa fa-download"></i></span></a>                                                                        
                                                                </td>
                                                            </tr>
                                                        </ng-template>
                                                        <ng-template pTemplate="emptymessage" let-columns *ngIf="allCustomerFinanceDocumentsList.length == 0">
                                                            <tr>
                                                                <td [attr.colspan]="2" style="color: red; font-weight: bold; text-align: center">
                                                                    No records found
                                                                </td>
                                                            </tr>
                                                        </ng-template>
                                                        <ng-template pTemplate="summary" id="footer">
                                                            <label id="footer" class="footer">No'of records:</label>
                                                            <input style="width: 5%;" [(ngModel)]="taxexeptTable._totalRecords" [disabled]="true" pInputText type="text" /> &nbsp;&nbsp;
                                                            <label id="footer" class="footer1">Pages Count:</label>
                                                           
                                                            <input style="width: 5%;" [ngModel]="getPageCount(taxexeptTable._totalRecords,pageSize)" [disabled]="true" pInputText type="text" />
                                                        </ng-template>
                                                    </p-table> 
                                            </div>
                                        </div>
                           
                                <p><span class="label"><b>Currency: <span class="text-danger">*</span></b></span><span class="value">{{viewDataGeneralInformation.currency}}</span></p>
        
                                <p-table #financialTable class="rpo-table-cstm" [metaKeySelection]="true" [paginator]="true" [pageLinks]="3" [rowsPerPageOptions]="[10,20,50,100]" [value]="taxTypeRateMapping"  [rows]="pageSize" [columns]="taxTypeRateMappingColumns" [resizableColumns]="true" [reorderableColumns]="true" [scrollable]="true" scrollHeight="450px">
        
                                    <ng-template pTemplate="colgroup" let-columns>
                                        <colgroup>
                                            <col *ngFor="let col of columns" style="width:130px">
                                        </colgroup>
                                     </ng-template>
        
                                    <ng-template pTemplate="header" let-columns>
                                        <tr>
                                            <th *ngFor="let col of columns" [pSortableColumn]="col.field">
                                                {{col.header}}
                                                <p-sortIcon [field]="col.field"></p-sortIcon>
        
                                            </th>
                                        </tr>
                                        <tr>
                                                <th style="width:auto" *ngFor="let col of columns" [ngSwitch]="col.field">
                                                    <input style="width:100%;" pInputText type="text" (input)="financialTable.filter($event.target.value, col.field, 'contains')">
                                                </th>
                                            </tr>
                                    </ng-template>
                                    <ng-template pTemplate="body" let-part let-rowData let-columns="columns" let-i="rowIndex">
                                        <tr>
                                            <td *ngFor="let col of columns">
                                                {{part[col.field]}}
                                            </td>
                                        </tr>
                                    </ng-template>
                                    <ng-template pTemplate="emptymessage" let-columns *ngIf="taxTypeRateMapping.length == 0">
                                        <tr>
                                            <td [attr.colspan]="columns.length" style="color: red; font-weight: bold; text-align: center">
                                                No records found
                                            </td>
                                        </tr>
                                    </ng-template>
                                    <ng-template pTemplate="summary" id="footer">
                                        <label id="footer" class="footer">No'of records:</label>
                                        <input style="width: 5%;" [(ngModel)]="financialTable._totalRecords" [disabled]="true" pInputText type="text" /> &nbsp;&nbsp;
                                        <label id="footer" class="footer1">Pages Count:</label>
                                       
                                        <input style="width: 5%;" [ngModel]="getPageCount(financialTable._totalRecords,pageSize)" [disabled]="true" pInputText type="text" />
                                    </ng-template>
                                </p-table> 
                            </div>
                        </div>
                    </div>                    
                </div>
            </div>
        </div>


        <div class="panel panel-default">
            <div class="panel-heading">
                <h4 class="panel-title"> <a class="collapsed" data-toggle="collapse" href="#step6">Bill Information</a> </h4>
            </div>
            <div id="step6" class="panel-collapse  collapse">
                <div class="panel-body m-lr-7">
                    <div class="col-sm-12">
                        <app-customer-billing-information [customerDataFromExternalComponents]="viewDataGeneralInformation"></app-customer-billing-information>

                        <!-- <div class="shadow-Box">

                                <p-table #billingTable class="table-responsive ptable-cus-pma" [paginator]="billingInfoList?.length > 0" [value]="billingInfoList"  [rows]="pageSize" [columns]="billingInfoTableHeaders">
                                    <ng-template pTemplate="header" let-columns>
                                        <tr>
                                                <th style="width: 40px;">Flag</th>
                                            <th *ngFor="let col of columns" [pSortableColumn]="col.field">
                                                {{col.header}}
                                                <p-sortIcon [field]="col.field"></p-sortIcon>

                                            </th>
                                        </tr>
                                        <tr>
                                                <th></th>

                                                <th style="width:auto" *ngFor="let col of columns" [ngSwitch]="col.field">
                                                    <input style="width:100%;" pInputText type="text" (input)="billingTable.filter($event.target.value, col.field, 'contains')">
                                                </th>
                                            </tr>
                                    </ng-template>
                                    <ng-template pTemplate="body" let-part let-rowData let-columns="columns" let-i="rowIndex">
                                        <tr>
                                                <td > <span class="flag">
                                                        <i  *ngIf="rowData.isPrimary == true"   [ngStyle]="{'color': rowData.isPrimary == true ? 'green' : 'none'}"  
                                                         class="fa fa-flag" aria-hidden="true"></i>
                                                        </span>
                                                </td>
                                            <td *ngFor="let col of columns">
                                                {{part[col.field]}}
                                            </td>
                                        </tr>
                                    </ng-template>
                                    <ng-template pTemplate="emptymessage" let-columns *ngIf="billingInfoList.length == 0">
                                        <tr>
                                            <td [attr.colspan]="columns.length+1" style="color: red; font-weight: bold; text-align: center">
                                                No records found
                                            </td>
                                        </tr>
                                    </ng-template>
                                    <ng-template pTemplate="summary" id="footer">
                                        <label id="footer" class="footer">No'of records:</label>
                                        <input style="width: 5%;" [(ngModel)]="billingTable._totalRecords" [disabled]="true" pInputText type="text" /> &nbsp;&nbsp;
                                        <label id="footer" class="footer1">Pages Count:</label>
                                       
                                        <input style="width: 5%;" [ngModel]="getPageCount(billingTable._totalRecords,pageSize)" [disabled]="true" pInputText type="text" />
                                    </ng-template>
                                </p-table> 
                        </div> -->
                    </div>
                </div>
            </div>
        </div>


        <div class="panel panel-default">
            <div class="panel-heading">
                <h4 class="panel-title"> <a class="collapsed" data-toggle="collapse" href="#step7">Shipping Information</a> </h4>
            </div>
            <div id="step7" class="panel-collapse  collapse">
                <div class="panel-body m-lr-7">
                    <div class="col-sm-12">
                        <app-customer-shipping-information  [customerDataFromExternalComponents]="viewDataGeneralInformation"></app-customer-shipping-information>
                    </div>                     

                    <!-- <div class="col-sm-12">
                        <h4> Shipping Site Info List </h4>
                        <div class="shadow-Box">
                                <p-table #domesticShippingTable class="table-responsive ptable-cus-pma" [paginator]="domesticShippingData?.length > 0" [value]="domesticShippingData"  [rows]="pageSize"  [columns]="domesticShippingHeaders">
                                        <ng-template pTemplate="header" let-columns>
                                            <tr>
                                                    <th style="width: 40px;">Flag</th>

                                                <th *ngFor="let col of columns" [pSortableColumn]="col.field">
                                                    {{col.header}}
                                                    <p-sortIcon [field]="col.field"></p-sortIcon>
                                                </th>
                                            </tr>
                                            <tr>
                                                    <th></th>

                                                    <th style="width:auto" *ngFor="let col of columns" [ngSwitch]="col.field">
                                                        <input style="width:100%;" pInputText type="text" (input)="domesticShippingTable.filter($event.target.value, col.field, 'contains')">
                                                    </th>
                                                </tr>
                                        </ng-template>
                                        <ng-template pTemplate="body" let-part let-rowData let-columns="columns" let-i="rowIndex">
                                            <tr>
                                                    <td > 
                                                            <span class="flag">
                                                            <i  *ngIf="rowData.isPrimary == true"   [ngStyle]="{'color': rowData.isPrimary == true ? 'green' : 'none'}"  
                                                            class="fa fa-flag" aria-hidden="true"></i>
                                                        </span>
                                                    </td>
                                                <td *ngFor="let col of columns">
                                                    {{part[col.field]}}
                                                </td>
                                            </tr>
                                        </ng-template>
                                        <ng-template pTemplate="emptymessage" let-columns *ngIf="domesticShippingData?.length == 0">
                                            <tr>
                                                <td [attr.colspan]="columns.length+1" style="color: red; font-weight: bold; text-align: center">
                                                    No records found
                                                </td>
                                            </tr>
                                        </ng-template>
                                        <ng-template pTemplate="summary" id="footer">
                                                <label id="footer" class="footer">No'of records:</label>
                                                <input style="width: 5%;" [(ngModel)]="domesticShippingTable._totalRecords" [disabled]="true" pInputText type="text" /> &nbsp;&nbsp;
                                                <label id="footer" class="footer1">Pages Count:</label>
                                               
                                                <input style="width: 5%;" [ngModel]="getPageCount(domesticShippingTable._totalRecords,pageSize)" [disabled]="true" pInputText type="text" />
                                            </ng-template>
                                    </p-table> 
                        </div>
                    </div>

                    <div class="col-sm-12">
                        <h4> International Shipping Details </h4>
                        <div class="shadow-Box">
                                <p-table #internationalShippingTable class="table-responsive ptable-cus-pma" [paginator]="internationalShippingData.length > 0" [value]="internationalShippingData"  [rows]="pageSize"  [columns]="internationalShippingHeaders">
                                        <ng-template pTemplate="header" let-columns>
                                            <tr>
                                                    <th style="width: 40px;">Flag</th>

                                                <th *ngFor="let col of columns" [pSortableColumn]="col.field">
                                                    {{col.header}}
                                                    <p-sortIcon [field]="col.field"></p-sortIcon>

                                                </th>
                                            </tr>
                                            <tr>
                                                    <th></th>

                                                    <th style="width:auto" *ngFor="let col of columns" [ngSwitch]="col.field">
                                                        <input style="width:100%;" pInputText type="text" (input)="internationalShippingTable.filter($event.target.value, col.field, 'contains')">
                                                    </th>
                                                </tr>
                                        </ng-template>
                                        <ng-template pTemplate="body" let-part let-rowData let-columns="columns" let-i="rowIndex">
                                            <tr>
                                                    <td > 
                                                            <span class="flag">
                                                            <i  *ngIf="rowData.isPrimary == true"   [ngStyle]="{'color': rowData.isPrimary == true ? 'green' : 'none'}"  
                                                             class="fa fa-flag" aria-hidden="true"></i>
                                                        </span>
                                                    </td>
                                                <td *ngFor="let col of columns">
                                                    {{part[col.field]}}
                                                </td>
                                            </tr>
                                            
                                        </ng-template>
                                        <ng-template pTemplate="emptymessage" let-columns *ngIf="internationalShippingData.length == 0">
                                            <tr>
                                                <td [attr.colspan]="columns.length+1" style="color: red; font-weight: bold; text-align: center">
                                                    No records found
                                                </td>
                                            </tr>
                                        </ng-template>
                                        <ng-template pTemplate="summary" id="footer">
                                                <label id="footer" class="footer">No'of records:</label>
                                                <input style="width: 5%;" [(ngModel)]="internationalShippingTable._totalRecords" [disabled]="true" pInputText type="text" /> &nbsp;&nbsp;
                                                <label id="footer" class="footer1">Pages Count:</label>
                                               
                                                <input style="width: 5%;" [ngModel]="getPageCount(internationalShippingTable._totalRecords,pageSize)" [disabled]="true" pInputText type="text" />
                                            </ng-template>
                                    </p-table> 
                        </div>
                    </div> -->
                </div>
            </div>
        </div>


        <div class="panel panel-default">
            <div class="panel-heading">
                <h4 class="panel-title"> <a class="collapsed" data-toggle="collapse" href="#step8">Sales Person/Agent Info</a> </h4>
            </div>
            <div id="step8" class="panel-collapse collapse">
                <div class="panel-body">
                    <div class="shadow-Box">
                        <div class="form-row">
                            <div class="col-sm-12">
                                <p><span class="label"><b>Primary Sales Person Name:  <span class="text-danger">*</span></b></span><span class="value">{{viewDataGeneralInformation.primarySalesPersonFirstName}}</span></p>
                                <p><span class="label"><b>Secondary Sales Person Name: </b></span><span class="value">{{viewDataGeneralInformation.secondarySalesPersonName}}</span></p>
                                <p><span class="label"><b>CSR Name: </b></span><span class="value">{{viewDataGeneralInformation.csrName}}</span></p>
                                <p><span class="label"><b>Agent Name: </b></span><span class="value">{{viewDataGeneralInformation.agentName}}</span></p>
                                <p><span class="label"><b>Annual Quota  : </b></span><span class="value">{{viewDataGeneralInformation.annualQuota}}</span></p>
                                <p><span class="label"><b>Annual Revenue Potential: </b></span><span class="value">{{viewDataGeneralInformation.annualRevenuePotential}}</span></p>        
                            </div>
                        </div>
                    </div>                    
                </div>
            </div>
        </div>
        <div class="panel panel-default">
            <div class="panel-heading">
                <h4 class="panel-title"> <a class="collapsed" data-toggle="collapse" href="#step9">Warnings</a> </h4>
            </div>
            <div id="step9" class="panel-collapse  collapse">
                <div class="panel-body">
                    <div class="col-sm-12">
                        <div class="shadow-Box">
                                <p-table #warningsTable class="rpo-table-cstm" [paginator]="true" [pageLinks]="3" [rowsPerPageOptions]="[10,20,50,100]" [value]="waringInfoList" [metaKeySelection]="true" [rows]="pageSize" [columns]="warningHeaders" [resizableColumns]="true"
                                    [reorderableColumns]="true" [scrollable]="true" scrollHeight="450px">

                                    <ng-template pTemplate="colgroup" let-columns>
                                        <colgroup>
                                            <col *ngFor="let col of columns" style="width:130px">
                                        </colgroup>
                                     </ng-template>

                                        <ng-template pTemplate="header" let-columns>
                                            <tr>
                                                <th *ngFor="let col of columns"   [pSortableColumn]="col.field">
                                                    {{col.header}}
                                                    <p-sortIcon [field]="col.field"></p-sortIcon>

                                                </th>
                                            </tr>
                                            <tr>
                                                <th style="width:auto" *ngFor="let col of columns" [ngSwitch]="col.field">
                                                    <input style="width:100%;" pInputText type="text" (input)="warningsTable.filter($event.target.value, col.field, 'contains')">
                                                </th>
                                            </tr>
                                        </ng-template>
                                        <ng-template pTemplate="body" let-part let-rowData let-columns="columns" let-i="rowIndex">
                                            <tr>
                                                <td *ngFor="let col of columns">
                                                    {{part[col.field]}}
                                                </td>
                                            </tr>
                                        </ng-template>
                                        <ng-template pTemplate="emptymessage" let-columns *ngIf="waringInfoList.length == 0">
                                            <tr>
                                                <td [attr.colspan]="columns.length" style="color: red; font-weight: bold; text-align: center">
                                                    No records found
                                                </td>
                                            </tr>
                                        </ng-template>
                                        <ng-template pTemplate="summary" id="footer">
                                                <label id="footer" class="footer">No'of records:</label>
                                                <input style="width: 5%;" [(ngModel)]="warningsTable._totalRecords" [disabled]="true" pInputText type="text" /> &nbsp;&nbsp;
                                                <label id="footer" class="footer1">Pages Count:</label>
                                               
                                                <input style="width: 5%;" [ngModel]="getPageCount(warningsTable._totalRecords,pageSize)" [disabled]="true" pInputText type="text" />
                                            </ng-template>
                                    </p-table> 
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="panel panel-default">
            <div class="panel-heading">
                <h4 class="panel-title"> <a class="collapsed" data-toggle="collapse" href="#step10">Documents</a> </h4>
            </div>
            <div id="step10" class="panel-collapse  collapse">
                <div class="panel-body m-lr-7">
                    <div class="col-sm-12">
                        <div>
                            <!-- <app-employees-list></app-employees-list> -->
                            <app-customer-documents [customerDataFromExternalComponents]="viewDataGeneralInformation"></app-customer-documents>
                                <!-- <p-table #documentsTable class="table-responsive ptable-cus-pma" [paginator]="DocumentsList.length > 0" [value]="DocumentsList" [rows]="pageSize"  [columns]="customerDocumentsColumns">
                                        <ng-template pTemplate="header" let-columns>
                                                <tr>
                                                     <ng-container *ngFor="let col of columns">
                                                    <th  *ngIf="col.field !== 'documents'" pResizableColumn pReorderableColumn [pSortableColumn]="col.field">
                                                        {{col.header}}
                                                        <p-sortIcon [field]="col.field"></p-sortIcon>
                                                    </th>
                                                    <th *ngIf="col.field == 'documents'">
                                                        Documents
                                                    </th>
                                                    </ng-container>

                                                </tr>
                                                <tr>
                                                        <th style="width:auto" *ngFor="let col of columns" [ngSwitch]="col.field">
                                                            <input style="width:100%;" pInputText type="text" (input)="documentsTable.filter($event.target.value, col.field, 'contains')">
                                                        </th>
                                                    </tr>
                                            </ng-template>
                    
                                            <ng-template pTemplate="body" let-rowData let-columns="columns">
                    
                    
                                                <tr >
                    
                                                    <ng-container *ngFor="let col of columns">
                                                    <td  *ngIf="col.field !== 'documents'" class="ui-resizable-column" pReorderableRowHandle>
                                                        {{col.field == 'createdDate'?  (rowData[col.field] | date: 'MM/dd/yyyy'):rowData[col.field] && col.field == 'updatedDate'?  (rowData[col.field] | date: 'MM/dd/yyyy'):rowData[col.field]}}
                                                    </td>
                                                    <td *ngIf="col.field == 'documents'">
                    
                                                        <tr *ngFor="let x of rowData.attachmentDetails">
                                                            <a class="filelink" (click)="downloadFileUpload(x)"> {{x.fileName}},</a>
                                                        </tr>
                    
                                                    </td>
                                                    </ng-container>
 
                    
                                                </tr>
                                            </ng-template>    
                                    
                                    
                                        <ng-template pTemplate="emptymessage" let-columns *ngIf="DocumentsList.length == 0">
                                            <tr>
                                                <td [attr.colspan]="columns.length" style="color: red; font-weight: bold; text-align: center">
                                                    No records found
                                                </td>
                                            </tr>
                                        </ng-template>
                                        <ng-template pTemplate="summary" id="footer">
                                                <label id="footer" class="footer">No'of records:</label>
                                                <input style="width: 5%;" [(ngModel)]="documentsTable._totalRecords" [disabled]="true" pInputText type="text" /> &nbsp;&nbsp;
                                                <label id="footer" class="footer1">Pages Count:</label>
                                               
                                                <input style="width: 5%;" [ngModel]="getPageCount(documentsTable._totalRecords,pageSize)" [disabled]="true" pInputText type="text" />
                                            </ng-template>
                                </p-table> -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>
<div class="modal-footer">
    <button type="button" class="btn btn-danger" (click)="dismissModel()">
        Close
    </button>
</div>
