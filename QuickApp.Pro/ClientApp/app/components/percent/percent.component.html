<div [@fadeInOut] class="page-content">
    <div class="right_col" role="main">
        <div class="x_panel">
            <div class="x_content">
                <div class="card">
                    <div class="card-body">
                        <div class="inline-block display-flex">
                            <h3 class="po-head lead">Percent</h3>
                            &nbsp;&nbsp;
                            <a class="plusicon-cstm new-margin" pTooltip="Add Percent" tooltipPosition="right" (click)="open(contentEdit)">
                                <i class="fa fa-plus-circle fa-lg"></i>
                            </a>
                        </div>
                        <p-table #dt class="rpo-table-cstm rro-table-cstm" [value]="allPriorityInfo" [rows]="20"
                        [metaKeySelection]="true" [paginator]="true" [pageLinks]="3" [rowsPerPageOptions]="[20,50,100]"
                        [columns]="cols" selectionMode="multiple" [(selection)]="cols"
                        [resizableColumns]="true" [reorderableColumns]="true" [scrollable]="true" scrollHeight="450px">
                   <ng-template pTemplate="caption">
                       <div style="text-align: right">
                           <p-multiSelect [options]="cols" [(ngModel)]="selectedColumns" optionLabel="header"
                                          selectedItemsLabel="{0} columns selected" [style]="{minWidth: '200px'}" defaultLabel="Choose Columns" style="float:left"></p-multiSelect>
                           <div class="inner-addon right-addon w200 inline-block  g-filter-search-cstm">
                               <i class="fa fa-search"></i>
                               <input type="text" pInputText size="50" class="form-control ui-autocomplete-input" (blur)="inputGlobalFiledFilter($event.target.value, 'contains')" placeholder="Global Filter">
                           </div>
                           <button type="button" class="btn btn-primary-cstm" pButton icon="fa-download" iconPos="left" label="Export All Data" (click)="dt.exportCSV()"></button>
                           <button type="button" class="btn btn-primary-cstm" pButton icon="fa-download" iconPos="left" label="Export Selection Only" (click)="dt.exportCSV({selectionOnly:true})"></button>
                           <div class="excel-upload excel-upload-cstm">
                               <input type="file" name="upload[]" id="upload" class="uploaddoc upload-file" data-multiple-caption="{count} files selected" accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet">
                               <label for="upload">
                                   <span matTooltip="Upload Data (Excel)"><i class="fa fa-upload"></i></span>
                               </label>
                           </div>
                       </div>
                   </ng-template>
                   <ng-template pTemplate="colgroup" let-columns>
                       <colgroup>
                           <col *ngFor="let col of columns" style="width:140px">
                       </colgroup>
                   </ng-template>
                   <ng-template pTemplate="header" let-columns>
                       <tr>
                           <th *ngFor="let col of columns" pResizableColumn pReorderableColumn [pSortableColumn]="col.field">
                               {{col.header}}
                               <p-sortIcon [field]="col.field"></p-sortIcon>
                           </th>
                           <th style="width:150px;position:sticky"></th>
                       </tr>
                       <tr>
                           <th *ngFor="let col of columns" [ngSwitch]="col.field">
                               <input style="width:100%;" pInputText type="text" (keydown.enter)="inputFiledFilter($event.target.value, col.field, col.filterMatchMode)">
                           </th>
                           <th style="width:150px;position:sticky"></th>
                       </tr>

                   </ng-template>
                   <ng-template pTemplate="body" let-rowData let-columns="columns">
                       <tr [pSelectableRow]="rowData" pReorderableRowHandle (dblclick)="openEdits(rowData)">
                           <td *ngFor="let col of columns" class="ui-resizable-column" pReorderableRowHandle>
                               {{col.field == 'createdDate'?  (rowData[col.field] | date: 'MM/dd/yyyy'):rowData[col.field] && col.field == 'updatedDate'?  (rowData[col.field] | date: 'MM/dd/yyyy'):rowData[col.field]}}
                           </td>
                           <td style="width:150px">
                               <p-inputSwitch *ngIf="rowData['isActive']==true" matTooltip="Active" onLabel="on" offLabel="off" (onChange)="handleChange(rowData,$event)" [(ngModel)]="rowData['isActive']"></p-inputSwitch>
                               <p-inputSwitch *ngIf="rowData['isActive']==false" matTooltip="In Active" onLabel="on" offLabel="off" (onChange)="handleChange(rowData,$event)" [(ngModel)]="rowData['isActive']"></p-inputSwitch>
                               <p-inputSwitch *ngIf="rowData['isActive']==null" matTooltip="In Active" onLabel="on" offLabel="off" (onChange)="handleChange(rowData,$event)" [(ngModel)]="rowData['isActive']"></p-inputSwitch>
                               <span data-toggle="modal" data-target="#view"> <a class="btn btn-info boxed-float-btn nobg" data-toggle="tooltip" (click)="openView(view,rowData)" matTooltip="View"><i class="fa fa-eye"></i></a> </span>
                               <button class="btn-edit" mat-icon-button (click)="openEdit(contentEdit,rowData)" matTooltip="edit">
                                   <mat-icon>edit</mat-icon>
                               </button>
                               <button class="btn-delete" mat-icon-button matTooltip="delete" (click)="openDelete(content,rowData)">
                                   <mat-icon color="warn">delete</mat-icon>
                               </button>
                               <button class="btn-history" mat-icon-button matTooltip="history" (click)="showAuditPopup(auditContent,rowData.provisionId)">
                                   <mat-icon color="green">history</mat-icon>
                               </button>
                           </td>
                       </tr>
                   </ng-template>
                   <ng-template pTemplate="summary" id="footer">
                       <label id="footer" class="footer">No'of records:</label> <input style="width: 5%;" [(ngModel)]="totalRecords" [disabled]="true" pInputText type="text" />
                       &nbsp;&nbsp;
                       <label id="footer" class="footer1">Pages Count:</label> <input style="width: 5%;" [(ngModel)]="totelPages" [disabled]="true" pInputText type="text" />
                   </ng-template>
               </p-table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>