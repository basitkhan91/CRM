<div class="x_content" *ngIf="purchaseOrderData">

    <div class="card receiving-po">
        <div class="card-header">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb rpo-bcrumb" style="background-color: transparent;">
                    <li class="breadcrumb-item active" aria-current="page">Receiving PO</li>
                </ol>
            </nav>
        </div>

        <div class="card-body">
            <form id="" class="ro-grid-form" name="">
                <div class="form-row">
                    <div class="col-md-8">
                        <div class="form-group">
                            <label style="float:left; width:auto; margin-right:20px; padding-top:3px;">Status: <span class="clr-red">*</span></label>
                            <div>
                                <div class="pull-left" style="margin-top: 4px; margin-right: 15px;" *ngFor="let status of poStatus">
                                    <label class="radio-cstm wauto">
                                        <input type="radio" name="postatus" class="form-control" value="{{status.Key}}" [checked]="status.Key == '1'" required>
                                        <span class="checkmark"></span> {{status.Value}}
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-row" style="margin-top: 15px;">
                    <div class="col-md-3">
                        <div class="form-group">
                            <label>PO Num <span class="clr-red">*</span></label>
                            <input class="form-control" type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="purchaseOrderData.purchaseOrderNumber" disabled="disabled" required>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label>Vendor Num <span class="clr-red">*</span></label>
                            <div class="inner-addon right-addon inline-block">
                                <input class="form-control" type="text" [value]="purchaseOrderData.vendor.vendorCode" disabled="disabled" required>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label>Requisitioner <span class="clr-red">*</span></label>
                            <p-autoComplete [size]="32" class="rpo-acomp-header"
                                            [minLength]="1" [dropdown]="true" [ngModelOptions]="{standalone: true}" [(ngModel)]="purchaseOrderData.requestedBy">
                            </p-autoComplete>
                            <!--<div class="inner-addon right-addon inline-block">
                                <div class="inner-addon right-addon inline-block">
                                    <input type="text" class="form-control" [value]="purchaseOrderData.requestedBy" required>
                                </div>
                            </div>--> 
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label>Company <span class="clr-red">*</span></label>
                            <select class="form-control" [(ngModel)]="poSelectedCompanyId" #selects="ngModel" [ngModelOptions]="{standalone: true}" required>
                                <option *ngFor="let company of poCompanyList" [value]="company.Key">{{company.Value}}</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="col-md-3">
                        <div class="form-group">
                            <label>Open Date <span class="clr-red">*</span></label>
                            <p-calendar class="pas-clder" [showIcon]="true" [ngModelOptions]="{standalone: true}" [(ngModel)]="purchaseOrderData.dateRequested" [required]="true"></p-calendar>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label>Vendor Name <span class="clr-red">*</span></label>
                            <div class="inner-addon right-addon inline-block">
                                <input type="text" class="form-control" [value]="purchaseOrderData.vendor.vendorName" disabled="disabled" required>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label>Approver <span class="clr-red">*</span></label>
                            <div class="inner-addon">
                                <input type="text" class="form-control" [ngModelOptions]="{standalone: true}" [(ngModel)]="purchaseOrderData.approver" required>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label>BU</label>
                            <select class="form-control" [(ngModel)]="poSelectedBusinessUnitId" #selects="ngModel" [ngModelOptions]="{standalone: true}">
                                <option *ngFor="let businessUnit of poBusinessUnitList" [value]="businessUnit.Key">{{businessUnit.Value}}</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="col-md-3">
                        <div class="form-group">
                            <label>Need By</label>
                            <p-calendar class="pas-clder" [showIcon]="true" [ngModelOptions]="{standalone: true}" [(ngModel)]="purchaseOrderData.needByDate" [minDate]="purchaseOrderData.dateRequested"></p-calendar>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label>Vendor Contact</label>
                            <p-autoComplete [size]="32" class="rpo-acomp-header"
                                            [minLength]="1" [dropdown]="true" [ngModelOptions]="{standalone: true}" [(ngModel)]="purchaseOrderData.vendor.firstName">
                            </p-autoComplete>
                            <!--<div class="inner-addon right-addon inline-block">
                                <i class="fa fa-search"></i>
                                <input type="text" class="form-control" name="" [ngModelOptions]="{standalone: true}" [(ngModel)]="purchaseOrderData.vendor.firstName" autocomplete="off">
                            </div>-->
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label>Approved Date <span class="clr-red">*</span></label>
                            <p-calendar class="pas-clder" [showIcon]="true" [ngModelOptions]="{standalone: true}" [(ngModel)]="purchaseOrderData.dateApprovied" [required]="true"></p-calendar>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label>Dept</label>
                            <select class="form-control" [(ngModel)]="poSelectedDepartmentId" #selects="ngModel" [ngModelOptions]="{standalone: true}">
                                <option *ngFor="let department of poDepartmentList" [value]="department.Key">{{department.Value}}</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="col-md-3">
                        <div class="form-group">
                            <label>Priority</label>
                            <div class="inner-addon right-addon inline-block">
                                <select class="form-control" #selects="ngModel" [ngModelOptions]="{standalone: true}" [(ngModel)]="purchaseOrderData.priorityId">
                                    <option *ngFor="let priority of poPriorityInfo" [value]="priority.Key">{{priority.Value}}</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label>Contact Phone</label>
                            <input class="form-control" type="text" pKeyFilter="pnum" [ngModelOptions]="{standalone: true}" [(ngModel)]="purchaseOrderData.workPhone">
                        </div>
                    </div>
                    <div class="col-md-3">
                        <!--<div class="form-group">
                            <label>Status</label>
                            <select class="form-control" [(ngModel)]="purchaseOrderData.statusId" #selects="ngModel" [ngModelOptions]="{standalone: true}">
                                <option *ngFor="let status of poStatus" [value]="status.Key">{{status.Value}}</option>
                            </select>
                        </div>-->
                        <div class="form-group">
                            <label>Credit Limit &amp; Terms <span class="clr-red">*</span></label>
                            <div class="form-row">
                                <div class="col-sm-5">
                                    <input class="form-control" type="text" placeholder="limit" [ngModelOptions]="{standalone: true}" [(ngModel)]="purchaseOrderData.terms" required>
                                </div>
                                <div class="col-sm-7">
                                    <select class="form-control" #selects="ngModel" [ngModelOptions]="{standalone: true}" [(ngModel)]="purchaseOrderData.creditLimit" required>
                                        <option *ngFor="let creditTerm of poCreditTermInfo" [value]="creditTerm.Key">{{creditTerm.Value}}</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label>Division</label>
                            <select class="form-control" [(ngModel)]="poSelectedDivisionId" #selects="ngModel" [ngModelOptions]="{standalone: true}">
                                <option *ngFor="let division of poDivisionList " [value]="division.Key">{{division.Value}}</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="col-md-3">
                        <div class="form-group">
                            <label>Deferred Receiver</label>
                            <div class="checkbox-cstm" style="margin-top: 4px">
                                <label>
                                    <input type="checkbox" [ngModelOptions]="{standalone: true}" [(ngModel)]="purchaseOrderData.deferredReceiver" class="form-control names ui-autocomplete-input" autocomplete="off">
                                    <span class="cr"><i class="cr-icon pi pi-check"></i></span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label>Resale</label>
                            <div class="checkbox-cstm" style="margin-top: 4px">
                                <label>
                                    <input type="checkbox" [ngModelOptions]="{standalone: true}" [(ngModel)]="purchaseOrderData.resale" class="form-control names ui-autocomplete-input" autocomplete="off">
                                    <span class="cr"><i class="cr-icon pi pi-check"></i></span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label>Memo</label>
                            <textarea class="form-control h100 scroll-x" [ngModelOptions]="{standalone: true}" [(ngModel)]="purchaseOrderData.notes"></textarea>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>


<div class="col-md-12 col-sm-12 col-xs-12 po-ro-setup">
    <div class="x_panel">
        <div>
            <div>
                <div id="adminsearchlocationajax">
                    <div class="">
                        <table *ngIf="purchaseOrderData != undefined && purchaseOrderData.purchaseOderPart != undefined" class="table table-bordered table-wrap">
                            <thead>
                                <tr class="po-table-tr">
                                    <th></th>
                                    <th>Line no <span class="clr-red">*</span></th>
                                    <th>PN <span class="clr-red">*</span></th>
                                    <th>Qty Ordered <span class="clr-red">*</span></th>
                                    <th>Qty Received <span class="clr-red">*</span></th>
                                    <th>Qty Actually Received</th>
                                    <th>Qty Rejected</th>
                                    <th>Qty Backordered <span class="clr-red">*</span></th>
                                    <th>Status <span class="clr-red">*</span></th>
                                    <th colspan="3" class="text-center">User Name</th>
                                    <th colspan="4">Management Structure <span class="clr-red">*</span></th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                <ng-container *ngFor="let part of purchaseOrderData.purchaseOderPart;let row_index=index">
                                    <tr class="basic-info" *ngIf="part.isParent">
                                        <td class="details-control eachcol" style="padding: 4px 6px;">
                                            <i class="fa fa-{{ toggleIcon ? 'minus':'plus'}} btn btn-success btn-cstm btn-xs margin0" (click)="showSplitShipmentParts(part.itemMasterId)"></i>
                                        </td>
                                        <td>{{row_index + 1}}</td>
                                        <td>
                                            {{part.itemMaster.partNumber}}
                                        </td>
                                        <td>
                                            {{part.quantityOrdered}}
                                        </td>
                                        <td>
                                            {{part.quantityReceived}}
                                        </td>
                                        <td>
                                            {{part.approver}}
                                        </td>
                                        <td></td>
                                        <td>
                                            {{part.quantityBackOrdered}}
                                        </td>
                                        <td>{{part.statusText}}</td>
                                        <!--<td>{{part.requestedBy}}</td>-->
                                        <td colspan="3"></td>
                                        <td colspan="4">{{part.managementStructureName[0]}}, {{part.managementStructureName[1]}}, {{part.managementStructureName[2]}}, {{part.managementStructureName[3]}}</td>
                                        <td style="padding:4px;">
                                            <a *ngIf="part.quantityBackOrdered" (click)="addDetailsClick(part)" style="color:red">Add Details</a>
                                        </td>
                                    </tr>

                                    <tr class="basic-info splitshipment po-sub-tr" [hidden]="purchaseOrderData.purchaseOderPart[row_index+1] != undefined && !purchaseOrderData.purchaseOderPart[row_index+1].visible" *ngIf="part.isParent && purchaseOrderData.purchaseOderPart[row_index+1] != undefined && (!purchaseOrderData.purchaseOderPart[row_index+1].isParent)">
                                        <th></th>
                                        <th></th>
                                        <th>PN <span class="clr-red">*</span></th>
                                        <th>Qty Ordered <span class="clr-red">*</span></th>
                                        <th>Qty Received <span class="clr-red">*</span></th>
                                        <th>Qty Actually Received <span class="clr-red">*</span></th>
                                        <th>Qty Rejected</th>
                                        <th>Qty Backordered <span class="clr-red">*</span></th>
                                        <th>Status <span class="clr-red">*</span></th>
                                        <th>User Type</th>
                                        <th>User Name</th>
                                        <th>Address <span class="clr-red">*</span></th>
                                        <th colspan="4">Management Structure <span class="clr-red">*</span></th>
                                        <th> </th>
                                    </tr>

                                    <tr class="basic-info splitshipment" [hidden]="!part.visible" *ngIf="!part.isParent">
                                        <td>&nbsp;</td>
                                        <td>&nbsp;</td>
                                        <td>{{part?.itemMaster?.partNumber}}</td>
                                        <td>{{part?.quantityOrdered}}</td>
                                        <td>{{part?.stockline?.quantityReceived}}</td>
                                        <td>{{'NA'}}</td>
                                        <td>{{'NA'}}</td>
                                        <td>{{'NA'}}</td>
                                        <td>
                                            {{part.statusText}}
                                        </td>
                                        <td>{{'NA'}}</td>
                                        <td>{{part?.userName}}</td>
                                        <td>{{part.addressText }}</td>
                                        <td colspan="4">{{part.managementStructureName[0]}}, {{part.managementStructureName[1]}}, {{part.managementStructureName[2]}}, {{part.managementStructureName[3]}}</td>
                                        <td><a class="btn btn-primary-cstm btn-po-details" (click)="addStockLine(part)">{{ part.showStockLineGrid ? 'Close' : 'Add Details'}}</a></td>
                                        <!--<td><a (click)="addStockLine(part)" class="btn btn-primary-cstm btn-po-details">Add Details</a></td>-->
                                        <!--<button type="button" (click)="showDialog()" pButton icon="fa-external-link-square" label="Show"></button>-->
                                    </tr>

                                    <tr class="more-info" *ngIf="!part.isParent && part.showStockLineGrid" [hidden]="!part.visible">
                                        <td colspan="17">
                                            <div class="form-row" style="margin-top: 10px;padding: 0px 7px;">
                                                <div class="col-md-2">
                                                    <div class="form-group">
                                                        <label>Sequence</label>
                                                        <input type="text" pInputText pKeyFilter="pnum" class="form-control" value="" disabled />
                                                    </div>
                                                </div>
                                                <div class="col-md-2">
                                                    <div class="form-group">
                                                        <label>PN</label>
                                                        <input type="text" pInputText pKeyFilter="pnum" class="form-control" value="{{part.itemMaster?.partNumber}}" disabled />
                                                    </div>
                                                </div>
                                                <div class="col-md-2">
                                                    <div class="form-group">
                                                        <label>PN Description</label>
                                                        <input type="text" pInputText class="form-control" value="" />
                                                    </div>
                                                </div>
                                                <div class="col-md-2">
                                                    <div class="form-group">
                                                        <label>Cond <span class="clr-red">*</span></label>
                                                        <select class="form-control" required>
                                                            <option value="NEW">NEW</option>
                                                            <option value="AS-IS">AS-IS</option>
                                                            <option value="REP">REP</option>
                                                            <option value="SRV">SRV</option>
                                                            <option value="OVH">OVH</option>
                                                            <option value="AR">AR</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-md-2">
                                                    <div class="form-group">
                                                        <label>QTY To Receive</label>
                                                        <input type="text" (change)="partQuantityChange($event, part)" pInputText pKeyFilter="pnum" class="form-control" value="5" />
                                                    </div>
                                                </div>
                                                <div class="col-md-2">
                                                    <div class="form-group">
                                                        <label>QTY Actually Received <span class="clr-red">*</span></label>
                                                        <input type="text" pInputText pKeyFilter="pnum" class="form-control" value="NA" required />
                                                    </div>
                                                </div>

                                            </div>

                                            <div class="form-row" style="margin-top: 10px;padding: 0px 7px;">
                                                <div class="col-md-2">
                                                    <div class="form-group">
                                                        <label>QTY Rejected <span class="clr-red">*</span></label>
                                                        <input type="text" pInputText pKeyFilter="pnum" class="form-control" value="NA" required />
                                                    </div>
                                                </div>
                                                <div class="col-md-2">
                                                    <div class="form-group">
                                                        <label>GL Account <span class="clr-red">*</span></label>
                                                        <input type="text" pInputText class="form-control" value="" required />
                                                    </div>
                                                </div>
                                                <div class="col-md-2">
                                                    <div class="form-group">
                                                        <label matTooltip="Export Control Classification Number">ECCN</label>
                                                        <input class="form-control" type="text" pInputText pKeyFilter="pnum" [maxLength]="25">
                                                    </div>
                                                </div>
                                                <div class="col-md-2">
                                                    <div class="form-group">
                                                        <label matTooltip="International Traffic in Arms Regulations Number">ITAR Num</label>
                                                        <input class="form-control" type="text" pInputText pKeyFilter="pnum" [maxLength]="25">
                                                    </div>
                                                </div>
                                                <div class="col-md-2">
                                                    <div class="form-group">
                                                        <label matTooltip="Thrust Lever Angle">TLA</label>
                                                        <input class="form-control" type="text" pInputText [maxLength]="25">
                                                    </div>
                                                </div>
                                                <div class="col-md-2">
                                                    <div class="form-group">
                                                        <label matTooltip="National Stock Number">NSN</label>
                                                        <input class="form-control" type="text" pInputText pKeyFilter="pnum" [maxLength]="25">
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="form-row" style="margin-top: 10px;padding: 0px 7px;">
                                                <div class="col-md-2">
                                                    <div class="form-group">
                                                        <label matTooltip="Next Hire Assembly">NHA</label>
                                                        <input class="form-control" type="text" pInputText>
                                                    </div>
                                                </div>
                                            </div>

                                            <div style="margin-left: 6px;" *ngIf="part.stocklineListObj != undefined && part.stocklineListObj.length > 0">
                                                <h3 class="add-details-heading">Receiving Qty-1 of part {{part.itemMaster?.partNumber}}</h3>
                                                <div class="pull-right" style="margin-top: -37px;margin-right: 85px;">
                                                    <i class="fa fa-chevron-left btn btn-primary-cstm btn-ad-icons" (click)="moveStockLinePage(-1)"></i>
                                                    <input type="text" pInputText pKeyFilter="pnum" (keyup)="gotoStockLinePage($event, part)" class="form-control" style="width: 50px;border-radius: 0 !important;" />
                                                    <i class="fa fa-chevron-right btn btn-primary-cstm btn-ad-icons" (click)="moveStockLinePage(1)"></i>
                                                    <p>Page {{currentSLIndex + 1}} of {{part.stocklineListObj.Length}} Pages</p>
                                                </div>
                                                <div class="form-row">
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <div class="checkbox-cstm" style="margin-top: 4px">
                                                                <label style="width: 200px;">
                                                                    <input type="checkbox" class="form-control">
                                                                    <span class="cr"><i class="cr-icon pi pi-check"></i></span> Same Details For All Parts
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="form-row">
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <label>Company <span class="clr-red">*</span></label>
                                                            <select class="form-control"
                                                                    [(ngModel)]="part.stocklineListObj[currentSLIndex].companyId"
                                                                    #selects="ngModel"
                                                                    [ngModelOptions]="{standalone: true}"
                                                                    (change)="getStockLineBusinessUnitList(part.stocklineListObj[currentSLIndex])">
                                                                <option value="0">Select</option>
                                                                <option *ngFor="let company of part.stocklineListObj[currentSLIndex].CompanyList" [value]="company.Key">{{company.Value}}</option>
                                                            </select>
                                                        </div>
                                                        <div class="form-group">
                                                            <label>BU</label>
                                                            <select class="form-control"
                                                                    [(ngModel)]="part.stocklineListObj[currentSLIndex].businessUnitId"
                                                                    #selects="ngModel"
                                                                    [ngModelOptions]="{standalone: true}"
                                                                    (change)="getStockLineDivision(part.stocklineListObj[currentSLIndex])">
                                                                <option value="0">Select</option>
                                                                <option *ngFor="let businessUnit of part.stocklineListObj[currentSLIndex].BusinessUnitList" [value]="businessUnit.Key">{{businessUnit.Value}}</option>
                                                            </select>
                                                        </div>
                                                        <div class="form-group">
                                                            <label>Division</label>
                                                            <select class="form-control"
                                                                    [(ngModel)]="part.stocklineListObj[currentSLIndex].divisionId"
                                                                    #selects="ngModel"
                                                                    [ngModelOptions]="{standalone: true}"
                                                                    (change)="getStockLineDepartment(part.stocklineListObj[currentSLIndex])">
                                                                <option value="0">Select</option>
                                                                <option *ngFor="let division of part.stocklineListObj[currentSLIndex].DivisionList" [value]="division.Key">{{division.Value}}</option>
                                                            </select>
                                                        </div>
                                                        <div class="form-group">
                                                            <label>Dept</label>
                                                            <select class="form-control"
                                                                    [(ngModel)]="part.stocklineListObj[currentSLIndex].departmentId"
                                                                    #selects="ngModel"
                                                                    [ngModelOptions]="{standalone: true}">
                                                                <option value="0">Select</option>
                                                                <option *ngFor="let department of part.stocklineListObj[currentSLIndex].DepartmentList" [value]="department.Key">{{department.Value}}</option>
                                                            </select>
                                                        </div>
                                                        <div class="form-group">
                                                            <label>Site <span class="clr-red">*</span></label>
                                                            <select class="form-control"
                                                                    [(ngModel)]="part.stocklineListObj[currentSLIndex].siteId"
                                                                    #selects="ngModel"
                                                                    [ngModelOptions]="{standalone: true}"
                                                                    (change)="getStockLineWareHouse(part.stocklineListObj[currentSLIndex])">
                                                                <option value="0">Select</option>
                                                                <option *ngFor="let site of part.stocklineListObj[currentSLIndex].SiteList" [value]="site.Key">{{site.Value}}</option>
                                                            </select>
                                                        </div>
                                                        <div class="form-group">
                                                            <label>Warehouse</label>
                                                            <select class="form-control"
                                                                    [(ngModel)]="part.stocklineListObj[currentSLIndex].warehouseId"
                                                                    #selects="ngModel"
                                                                    [ngModelOptions]="{standalone: true}"
                                                                    (change)="getStockLineLocation(part.stocklineListObj[currentSLIndex])">
                                                                <option value="0">Select</option>
                                                                <option *ngFor="let warehouse of part.stocklineListObj[currentSLIndex].WareHouseList" [value]="warehouse.Key">{{warehouse.Value}}</option>
                                                            </select>
                                                        </div>
                                                        <div class="form-group">
                                                            <label>Location</label>
                                                            <select class="form-control"
                                                                    [(ngModel)]="part.stocklineListObj[currentSLIndex].locationId"
                                                                    #selects="ngModel"
                                                                    [ngModelOptions]="{standalone: true}"
                                                                    (change)="getStockLineShelf(part.stocklineListObj[currentSLIndex])">
                                                                <option value="0">Select</option>
                                                                <option *ngFor="let loc of part.stocklineListObj[currentSLIndex].LocationList" [ngValue]="loc.Key">{{loc.Value}}</option>
                                                            </select>
                                                        </div>
                                                        <div class="form-group">
                                                            <label>Shelf</label>
                                                            <select class="form-control"
                                                                    [(ngModel)]="part.stocklineListObj[currentSLIndex].shelfId"
                                                                    #selects="ngModel"
                                                                    [ngModelOptions]="{standalone: true}"
                                                                    (change)="getStockLineBin(part.stocklineListObj[currentSLIndex])">
                                                                <option value="0">Select</option>
                                                                <option *ngFor="let shelf of part.stocklineListObj[currentSLIndex].ShelfList" [ngValue]="shelf.Key">{{shelf.Value}}</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <label>Bin</label>
                                                            <select class="form-control"
                                                                    [(ngModel)]="part.stocklineListObj[currentSLIndex].binId"
                                                                    #selects="ngModel"
                                                                    [ngModelOptions]="{standalone: true}">
                                                                <option value="0">Select</option>
                                                                <option *ngFor="let bin of part.stocklineListObj[currentSLIndex].BinList" [ngValue]="bin.Key">{{bin.Value}}</option>
                                                            </select>
                                                        </div>
                                                        <div class="form-group">
                                                            <label>Obtain From - <b> {{part.stocklineListObj[currentSLIndex].obtainFromType}}</b></label>
                                                            <select class="form-control"
                                                                    [(ngModel)]="part.stocklineListObj[currentSLIndex].obtainFromType"
                                                                    #selects="ngModel"
                                                                    [ngModelOptions]="{standalone: true}"
                                                                    (change)="onObtainFromChange($event)">
                                                                <option value="0">Select</option>
                                                                <option value="1">Customer</option>
                                                                <option value="2">Other </option>
                                                                <option value="3">Vendor</option>
                                                            </select>
                                                            <select *ngIf="part.stocklineListObj[currentSLIndex].obtainFromType == 1" [(ngModel)]="part.stocklineListObj[currentSLIndex].obtainFrom" [ngModelOptions]="{standalone: true}">
                                                                <option value="0">Select</option>
                                                                <option *ngFor="let customer of CustomerList" [value]="customer.Key">{{customer.Value}}</option>
                                                            </select>
                                                            <input *ngIf="part.stocklineListObj[currentSLIndex].obtainFromType == 2" class="form-control" type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="part.stocklineListObj[currentSLIndex].obtainFrom">
                                                            <select *ngIf="part.stocklineListObj[currentSLIndex].obtainFromType == 3" [(ngModel)]="part.stocklineListObj[currentSLIndex].obtainFrom" [ngModelOptions]="{standalone: true}">
                                                                <option value="0">Select</option>
                                                                <option *ngFor="let vendor of VendorList" [value]="vendor.Key">{{vendor.Value}}</option>
                                                            </select>
                                                        </div>
                                                        <div class="form-group" *ngIf="obtainfromcustomer">
                                                            <div class="form-row">
                                                                <div class="col-sm-11">
                                                                    <p-autoComplete class="rpo-acomp" [size]="32"
                                                                                    [minLength]="1" [dropdown]="true">
                                                                    </p-autoComplete>
                                                                </div>
                                                                <div class="col-sm-1">
                                                                    <div style="cursor:pointer; font-size:14px; margin:6px -8px;"><i class="fa fa-plus-circle fa-lg" (click)="addPageCustomer()"></i></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group" *ngIf="obtainfromother">
                                                            <input type="text" class="form-control" pInputText />
                                                        </div>
                                                        <div class="form-group" *ngIf="obtainfromvendor">
                                                            <div class="form-row">
                                                                <div class="col-sm-11">
                                                                    <p-autoComplete class="rpo-acomp" [size]="32"
                                                                                    [minLength]="1" [dropdown]="true">
                                                                    </p-autoComplete>
                                                                </div>
                                                                <div class="col-sm-1">
                                                                    <div style="cursor:pointer; font-size:14px; margin:6px -8px;"><i class="fa fa-plus-circle fa-lg"></i></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label>Owner</label>
                                                            <select class="form-control" (change)="onOwnerChange($event)">
                                                                <option value="0">Select</option>
                                                                <option value="1">Customer</option>
                                                                <option value="2">Other </option>
                                                                <option value="3">Vendor</option>
                                                            </select>
                                                            <select *ngIf="part.stocklineListObj[currentSLIndex].ownerType == 1" [(ngModel)]="part.stocklineListObj[currentSLIndex].owner" [ngModelOptions]="{standalone: true}">
                                                                <option value="0">Select</option>
                                                                <option *ngFor="let customer of CustomerList" [value]="customer.Key">{{customer.Value}}</option>
                                                            </select>
                                                            <input *ngIf="part.stocklineListObj[currentSLIndex].ownerType == 2" class="form-control" type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="part.stocklineListObj[currentSLIndex].owner">
                                                            <select *ngIf="part.stocklineListObj[currentSLIndex].ownerType == 3" [(ngModel)]="part.stocklineListObj[currentSLIndex].owner" [ngModelOptions]="{standalone: true}">
                                                                <option value="0">Select</option>
                                                                <option *ngFor="let vendor of VendorList" [value]="vendor.Key">{{vendor.Value}}</option>
                                                            </select>
                                                        </div>
                                                        <div class="form-group" *ngIf="ownercustomer">
                                                            <div class="form-row">
                                                                <div class="col-sm-11">
                                                                    <p-autoComplete class="rpo-acomp" [size]="32"
                                                                                    [minLength]="1" [dropdown]="true">
                                                                    </p-autoComplete>
                                                                </div>
                                                                <div class="col-sm-1">
                                                                    <div style="cursor:pointer; font-size:14px; margin:6px -8px;"><i class="fa fa-plus-circle fa-lg" (click)="addPageCustomer()"></i></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group" *ngIf="ownerother">
                                                            <input type="text" class="form-control" pInputText />
                                                        </div>
                                                        <div class="form-group" *ngIf="ownervendor">
                                                            <div class="form-row">
                                                                <div class="col-sm-11">
                                                                    <p-autoComplete class="rpo-acomp" [size]="32"
                                                                                    [minLength]="1" [dropdown]="true">
                                                                    </p-autoComplete>
                                                                </div>
                                                                <div class="col-sm-1">
                                                                    <div style="cursor:pointer; font-size:14px; margin:6px -8px;"><i class="fa fa-plus-circle fa-lg"></i></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label>Traceable To</label>
                                                            <select class="form-control" (change)="onTraceableToChange($event)">
                                                                <option value="0">Select</option>
                                                                <option value="1">Customer</option>
                                                                <option value="2">Other </option>
                                                                <option value="3">Vendor</option>
                                                            </select>
                                                            <select *ngIf="part.stocklineListObj[currentSLIndex].traceableToType == 1" [(ngModel)]="part.stocklineListObj[currentSLIndex].traceableTo" [ngModelOptions]="{standalone: true}">
                                                                <option value="0">Select</option>
                                                                <option *ngFor="let customer of CustomerList" [value]="customer.Key">{{customer.Value}}</option>
                                                            </select>
                                                            <input *ngIf="part.stocklineListObj[currentSLIndex].traceableToType == 2" class="form-control" type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="part.stocklineListObj[currentSLIndex].traceableTo">
                                                            <select *ngIf="part.stocklineListObj[currentSLIndex].traceableToType == 3" [(ngModel)]="part.stocklineListObj[currentSLIndex].traceableTo" [ngModelOptions]="{standalone: true}">
                                                                <option value="0">Select</option>
                                                                <option *ngFor="let vendor of VendorList" [value]="vendor.Key">{{vendor.Value}}</option>
                                                            </select>

                                                        </div>
                                                        <div class="form-group" *ngIf="traceabletocustomer">
                                                            <div class="form-row">
                                                                <div class="col-sm-11">
                                                                    <p-autoComplete class="rpo-acomp" [size]="32"
                                                                                    [minLength]="1" [dropdown]="true">
                                                                    </p-autoComplete>
                                                                </div>
                                                                <div class="col-sm-1">
                                                                    <div style="cursor:pointer; font-size:14px; margin:6px -8px;"><i class="fa fa-plus-circle fa-lg" (click)="addPageCustomer()"></i></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group" *ngIf="traceabletoother">
                                                            <input type="text" class="form-control" pInputText />
                                                        </div>
                                                        <div class="form-group" *ngIf="traceabletovendor">
                                                            <div class="form-row">
                                                                <div class="col-sm-11">
                                                                    <p-autoComplete class="rpo-acomp" [size]="32"
                                                                                    [minLength]="1" [dropdown]="true">
                                                                    </p-autoComplete>
                                                                </div>
                                                                <div class="col-sm-1">
                                                                    <div style="cursor:pointer; font-size:14px; margin:6px -8px;"><i class="fa fa-plus-circle fa-lg"></i></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label>MFG <span class="clr-red">*</span></label>
                                                            <select class="form-control" required>
                                                                <option value="0">Select</option>
                                                            </select>
                                                        </div>
                                                        <div class="form-group">
                                                            <label>MFG Lot Num</label>
                                                            <input class="form-control" type="text" pInputText pKeyFilter="pnum">
                                                        </div>
                                                        <div class="form-group">
                                                            <label>MFG Date</label>
                                                            <p-calendar class="pas-clder pas-clder-po-table" [showIcon]="true"></p-calendar>
                                                        </div>
                                                        <div class="form-group">
                                                            <label>MFG Trace</label>
                                                            <input class="form-control" type="text" pInputText value="Map pending">
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <label>MFG Batch Num</label>
                                                            <input class="form-control" type="text" pInputText pKeyFilter="pnum">
                                                        </div>
                                                        <div class="form-group">
                                                            <label>Expiration Date</label>
                                                            <div class="form-group">
                                                                <div class="checkbox-cstm" style="margin-top: 4px">
                                                                    <label>
                                                                        <input type="checkbox" class="form-control">
                                                                        <span class="cr"><i class="cr-icon pi pi-check"></i></span>
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label>Unit Cost</label>
                                                            <input class="form-control" pInputText pKeyFilter="pnum" type="text" value="map Pending">
                                                        </div>
                                                        <div class="form-group">
                                                            <label>Extended Cost</label>
                                                            <input class="form-control" type="text" pInputText pKeyFilter="pnum">
                                                        </div>
                                                        <div class="form-group">
                                                            <label>Parts Cert Num</label>
                                                            <input class="form-control" type="text" pInputText pKeyFilter="pnum">
                                                        </div>
                                                        <div class="form-group">
                                                            <label>Cert By</label>
                                                            <input class="form-control" type="text" pInputText>
                                                        </div>
                                                        <div class="form-group">
                                                            <label>Certified Date</label>
                                                            <p-calendar class="pas-clder pas-clder-po-table" [showIcon]="true"></p-calendar>
                                                        </div>
                                                        <div class="form-group">
                                                            <label>Certified Due Date</label>
                                                            <p-calendar class="pas-clder pas-clder-po-table" [showIcon]="true"></p-calendar>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <label>Tag Type</label>
                                                            <select class="form-control" required>
                                                                <option value="0">Select</option>
                                                            </select>
                                                        </div>
                                                        <div class="form-group">
                                                            <label>Tag Date</label>
                                                            <p-calendar class="pas-clder pas-clder-po-table" [showIcon]="true"></p-calendar>
                                                        </div>
                                                        <div class="form-group">
                                                            <label>Shipping Ref</label>
                                                            <select class="form-control">
                                                                <option>Hyderabad Location</option>
                                                                <option>Newyork Location</option>
                                                                <option>Chicago Location</option>
                                                            </select>
                                                        </div>
                                                        <div class="form-group">
                                                            <label>Ship Via</label>
                                                            <select class="form-control">
                                                                <option>fedex</option>
                                                                <option>Blue Dart</option>
                                                                <option>Bombino Express</option>
                                                            </select>
                                                        </div>
                                                        <div class="form-group">
                                                            <label>Shipping Account</label>
                                                            <select class="form-control">
                                                                <option>12345678</option>
                                                                <option>58698745</option>
                                                                <option>BB2568AHJ</option>
                                                            </select>
                                                        </div>
                                                        <div class="form-group">
                                                            <label matTooltip="Engine Serial Number">ESN</label>
                                                            <input class="form-control" type="text" pInputText [maxLength]="25">
                                                        </div>
                                                        <div class="form-group">
                                                            <label>Aircraft Tail Num</label>
                                                            <input class="form-control" type="text" pInputText pKeyFilter="pnum">
                                                        </div>
                                                    </div>
                                                </div>

                                                <div>
                                                    <h3 class="add-details-heading" style="text-align: left;">Is Serialized</h3>
                                                    <div class="form-row">
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <label>Serial Num</label>
                                                                <input class="form-control" type="text" pInputText pKeyFilter="pnum">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div>
                                                    <h3 class="add-details-heading" style="text-align: left;">Time Life</h3>
                                                    <div class="form-row">
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <div class="checkbox-cstm" style="margin-top: 4px">
                                                                    <label style="width: 200px;">
                                                                        <input type="checkbox" class="form-control" (click)="onChangeTimeLife()">
                                                                        <span class="cr"><i class="cr-icon pi pi-check"></i></span> Time Life Details Update Later
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="time-remaining">
                                                        <table class="table table-bordered">
                                                            <thead>
                                                                <tr class="po-table-tr">
                                                                    <th colspan="2" class="text-center">Cycles (in hours)</th>
                                                                    <th colspan="2" class="text-center">Time (in hours)</th>
                                                                    <th colspan="2" class="text-center">Last (in hours)</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <tr>
                                                                    <td>Remaining</td>
                                                                    <td><input class="form-control" type="text" pInputText pKeyFilter="pnum" [(ngModel)]="cycleRemaining" [ngModelOptions]="{standalone: true}" [disabled]="isDisabledTLboxes"></td>
                                                                    <td>Remaining</td>
                                                                    <td><input class="form-control" type="text" pInputText pKeyFilter="pnum" [(ngModel)]="timeRemaining" [ngModelOptions]="{standalone: true}" [disabled]="isDisabledTLboxes"></td>
                                                                    <td>Since New</td>
                                                                    <td><input class="form-control" type="text" pInputText pKeyFilter="pnum" [(ngModel)]="lastSinceNew" [ngModelOptions]="{standalone: true}" [disabled]="isDisabledTLboxes"></td>
                                                                </tr>
                                                                <tr>
                                                                    <td>Since New</td>
                                                                    <td><input class="form-control" type="text" pInputText pKeyFilter="pnum" [(ngModel)]="cycleSinceNew" [ngModelOptions]="{standalone: true}" [disabled]="isDisabledTLboxes"></td>
                                                                    <td>Since New</td>
                                                                    <td><input class="form-control" type="text" pInputText pKeyFilter="pnum" [(ngModel)]="timeSinceNew" [ngModelOptions]="{standalone: true}" [disabled]="isDisabledTLboxes"></td>
                                                                    <td>Since Ovh</td>
                                                                    <td><input class="form-control" type="text" pInputText pKeyFilter="pnum" [(ngModel)]="lastSinceOVH" [ngModelOptions]="{standalone: true}" [disabled]="isDisabledTLboxes"></td>
                                                                </tr>
                                                                <tr>
                                                                    <td>Since Ovh</td>
                                                                    <td><input class="form-control" type="text" pInputText pKeyFilter="pnum" [(ngModel)]="cycleSinceOvh" [ngModelOptions]="{standalone: true}" [disabled]="isDisabledTLboxes"></td>
                                                                    <td>Since Ovh</td>
                                                                    <td><input class="form-control" type="text" pInputText pKeyFilter="pnum" [(ngModel)]="timeSinceOvh" [ngModelOptions]="{standalone: true}" [disabled]="isDisabledTLboxes"></td>
                                                                    <td>Since Insp</td>
                                                                    <td><input class="form-control" type="text" pInputText pKeyFilter="pnum" [(ngModel)]="lastSinceInsp" [ngModelOptions]="{standalone: true}" [disabled]="isDisabledTLboxes"></td>
                                                                </tr>
                                                                <tr>
                                                                    <td>Since Insp</td>
                                                                    <td><input class="form-control" type="text" pInputText pKeyFilter="pnum" [(ngModel)]="cycleSinceInsp" [ngModelOptions]="{standalone: true}" [disabled]="isDisabledTLboxes"></td>
                                                                    <td>Since Insp</td>
                                                                    <td><input class="form-control" type="text" pInputText pKeyFilter="pnum" [(ngModel)]="lastSinceInsp" [ngModelOptions]="{standalone: true}" [disabled]="isDisabledTLboxes"></td>
                                                                    <td></td>
                                                                    <td></td>
                                                                </tr>
                                                                <tr>
                                                                    <td>Since Repair</td>
                                                                    <td><input class="form-control" type="text" pInputText pKeyFilter="pnum" [(ngModel)]="cycleSinceRepair" [ngModelOptions]="{standalone: true}" [disabled]="isDisabledTLboxes"></td>
                                                                    <td>Since Repair</td>
                                                                    <td><input class="form-control" type="text" pInputText pKeyFilter="pnum" [(ngModel)]="timeSinceNew" [ngModelOptions]="{standalone: true}" [disabled]="isDisabledTLboxes"></td>
                                                                    <td></td>
                                                                    <td></td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>

                                                <div>
                                                    <h3 class="add-details-heading" style="text-align: left;">Calibrated Equipment</h3>
                                                    <div class="form-row">
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <label>Inspection Date</label>
                                                                <p-calendar class="pas-clder pas-clder-po-table" [showIcon]="true"></p-calendar>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <label>Frequency</label>
                                                                <input class="form-control" type="text" pInputText pKeyFilter="pnum">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>


                                                <div class="form-row">
                                                    <div class="col-md-12">
                                                        <a class="btn btn-primary-cstm" style="width: 58px; height: 28px; margin-bottom: 10px;">Save</a>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>

                                    <!-- TODO: Remove once dynamic content is loaded -->
                                    <tr class="basic-info" *ngIf="!part.isParent">
                                        <td class="details-control eachcol" style="padding: 4px 6px;"></td>
                                        <td>{{row_index + 1}}</td>
                                        <td>
                                            {{part.itemMaster.partNumber}}
                                        </td>
                                        <td>
                                            {{part.quantityOrdered}}
                                        </td>
                                        <td>
                                            {{part.quantityReceived}}
                                        </td>
                                        <td>
                                            {{part.approver}}
                                        </td>
                                        <td></td>
                                        <td>
                                            {{part.quantityBackOrdered}}
                                        </td>
                                        <td>{{part.statusText}}</td>
                                        <!--<td>{{part.requestedBy}}</td>-->
                                        <td colspan="3"></td>
                                        <td colspan="4">{{part.managementStructureName[0]}}, {{part.managementStructureName[1]}}, {{part.managementStructureName[2]}}, {{part.managementStructureName[3]}}</td>
                                        <td style="padding:4px;"><a class="btn btn-primary-cstm btn-po-details">Add Details</a></td>
                                    </tr>

                                </ng-container>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div class="clear"></div>
        <hr>
        <a class="btn btn-primary-cstm pull-right" (click)="onSubmitToReceive()">Submit to Receive</a>
        <div class="clear"></div>
        <br>
        <br>
        <br>
        <br>
    </div>

</div>