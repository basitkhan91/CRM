<p-breadcrumb [model]="breadcrumbs"></p-breadcrumb>
<div class="card">
    <div class="card-header">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb rpo-bcrumb" style="background-color: transparent;">
                <li class="breadcrumb-item active" aria-current="page">{{isEditMode ? 'Edit' : 'Create'}} Customer Work</li>
            </ol>
        </nav>
    </div>
    <div class="card-body">
        <form #customerWorkForm="ngForm">
            <div class="form-row">
                <div class="col-md-6">
                    <div class="form-row">
                        <div class="col-md-6">                    
                            <div class="form-group">
                                <label>Receiving Num</label>
                                <input class="form-control" type="text" name="receivingCusNum" [(ngModel)]="receivingForm.receivingNumber" disabled>
                            </div>
                            <div class="form-group">
                                <label>Received Date <span class="text-danger">*</span></label>
                                <p-calendar class="workflow-clder" [maxDate]="currentDate" [showIcon]="true" name="receivedDate" [(ngModel)]="receivingForm.receivedDate"></p-calendar>
                            </div>
                            <div class="form-group">
                                <label>Customer Name <span class="text-danger">*</span></label>
                                <p-autoComplete field="name" class="pautocomp-cstm" [(ngModel)]="receivingForm.customerId" name="customerId" [suggestions]="customerNamesInfo" (completeMethod)="filterCustNames($event)" [size]="30" [minLength]="1" [dropdown]="true" errorMessage="Records not found" [forceSelection]="true" (onSelect)="onSelectCustomer(receivingForm.customerId)" #custName="ngModel" required></p-autoComplete>  
                                <div *ngIf="custName.invalid && (custName.dirty || custName.touched)" class="alert alert-danger alert-danger-cstm">
                                    <div *ngIf="custName.errors.required">
                                        <small> Customer Name is required </small>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Customer Code <span class="text-danger">*</span></label>
                                <p-autoComplete field="customerCode" class="pautocomp-cstm" [(ngModel)]="receivingForm.customerCode" name="customerCode" [suggestions]="customerCodesInfo" (completeMethod)="filterCustCodes($event)" [size]="30" [minLength]="1" [dropdown]="true" errorMessage="Records not found" [forceSelection]="true" (onSelect)="onSelectCustomer(receivingForm.customerCode)" #custCode="ngModel" required></p-autoComplete>  
                                <div *ngIf="custCode.invalid && (custCode.dirty || custCode.touched)" class="alert alert-danger alert-danger-cstm">
                                        <div *ngIf="custCode.errors.required">
                                            <small> Customer Code is required </small>
                                        </div>
                                </div>
                            </div>                    
                            <div class="form-group">
                                <label>Ref <span class="text-danger">*</span></label>
                                <input class="form-control" type="text" name="referenceId" [(ngModel)]="receivingForm.reference" #custRef="ngModel" required>
                                <!-- <p-autoComplete field="label" class="pautocomp-cstm" [(ngModel)]="receivingForm.referenceId" name="referenceId" [suggestions]="customersList" (completeMethod)="filterCustomerNames($event)" [size]="30" [minLength]="1" [dropdown]="true" errorMessage="Records not found" [forceSelection]="true" #custRef="ngModel" required></p-autoComplete> -->
                                <div *ngIf="custRef.invalid && (custRef.dirty || custRef.touched)" class="alert alert-danger alert-danger-cstm">
                                    <div *ngIf="custRef.errors.required">
                                        <small> Receiving Num is required </small>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Contact <span class="text-danger">*</span></label>
                                <p-autoComplete field="contactName" class="pautocomp-cstm" [(ngModel)]="receivingForm.customerContactId" name="customerContactId" [suggestions]="customerContactInfo" (completeMethod)="filterCustContacts($event)" [size]="30" [minLength]="1" [dropdown]="true" errorMessage="Records not found" [forceSelection]="true" [disabled]="custName.invalid" #cusContact="ngModel" required></p-autoComplete>
                                <div *ngIf="cusContact.invalid && (cusContact.dirty || cusContact.touched)" class="alert alert-danger alert-danger-cstm">
                                    <div *ngIf="cusContact.errors.required">
                                        <small> Contact is required </small>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Contact Phone <span class="text-danger">*</span></label>
                                <p-autoComplete field="workPhone" class="pautocomp-cstm" [(ngModel)]="receivingForm.customerPhone" name="customerPhone" [suggestions]="customerPhoneInfo" (completeMethod)="filterCustContactPhone($event)" [size]="30" [minLength]="1" [dropdown]="true" errorMessage="Records not found" [forceSelection]="true" [disabled]="custName.invalid" #cusPhone="ngModel" required></p-autoComplete>
                                <div *ngIf="cusPhone.invalid && (cusPhone.dirty || cusPhone.touched)" class="alert alert-danger alert-danger-cstm">
                                    <div *ngIf="cusPhone.errors.required">
                                        <small> Contact Phone is required </small>
                                    </div>
                                </div>
                                <!-- <input class="form-control" type="text" name="workPhone" [(ngModel)]="receivingForm.workPhone" required> -->
                            </div>
                            <div class="form-group">
                                <label>PN <span class="text-danger">*</span></label>
                                <p-autoComplete field="label" class="pautocomp-cstm" [(ngModel)]="receivingForm.itemMasterId" name="partNumber" [suggestions]="partNumbersInfo" (completeMethod)="filterPartNumbers($event)" [size]="30" [minLength]="1" [dropdown]="true" (onSelect)="onPartNumberSelected($event.value); resetSerialNoTimeLife();" #partNum="ngModel" errorMessage="Records not found" [forceSelection]="true" required></p-autoComplete>
                                <div *ngIf="partNum.invalid && (partNum.dirty || partNum.touched)" class="alert alert-danger alert-danger-cstm">
                                        <div *ngIf="partNum.errors.required">
                                            <small> Part Number is required </small>
                                        </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>PN Description</label>
                                <input class="form-control" type="text" name="partDescription" [(ngModel)]="receivingForm.partDescription" disabled>
                            </div>
                            <div class="form-group">
                                <label>Manufacturer</label>
                                <input class="form-control" type="text" name="manufacturer" [(ngModel)]="receivingForm.manufacturer" disabled>
                            </div>
                            <div class="form-group">
                                <label>Revised PN</label>
                                <input class="form-control" type="text" name="revisePartId" [(ngModel)]="receivingForm.revisePartId" disabled>
                            </div>
                            <div class="form-group">
                                <label>Employee Name <span class="text-danger">*</span></label>
                                <p-autoComplete field="label" class="pautocomp-cstm" [(ngModel)]="receivingForm.employeeId" name="employeeId" [suggestions]="employeeNames" (completeMethod)="filterEmployees($event)" [size]="30" [minLength]="1" [dropdown]="true" errorMessage="Records not found" [forceSelection]="true" #empName="ngModel" required></p-autoComplete>
                                <div *ngIf="empName.invalid && (empName.dirty || empName.touched)" class="alert alert-danger alert-danger-cstm">
                                    <div *ngIf="empName.errors.required">
                                        <small> Employee Name is required </small>
                                    </div>
                                </div>
                            </div>                     
                        </div>
                        <div class="col-md-6">                    
                            <div class="form-group">
                                <label>Certify By
                                    <!-- <span style="margin-left:3px;cursor:pointer;"><a class="fa fa-plus-circle fa-lg" matTooltip="Add Employee" matTooltipPosition="above" target="_blank" [routerLink]="['/employeesmodule/employeepages/app-employee-general-information']"></a></span> -->
                                </label>
                                <input class="form-control" type="text" name="certifiedBy" [(ngModel)]="receivingForm.certifiedBy">
                                <!-- <p-autoComplete field="label" class="pautocomp-cstm" [(ngModel)]="receivingForm.certifiedById" name="certifiedBy" [suggestions]="employeeNames" (completeMethod)="filterEmployees($event)" [size]="30" [minLength]="1" [dropdown]="true" errorMessage="Records not found" [forceSelection]="true"></p-autoComplete> -->
                            </div>
                            <div class="form-group">
                                <label>Tag Date</label>
                                <p-calendar class="workflow-clder" [showIcon]="true" name="tagDate" [(ngModel)]="receivingForm.tagDate"></p-calendar>
                            </div>
                            <div class="form-group">
                                <label>Tag Type</label>
                                <select [(ngModel)]="receivingForm.tagTypeId" name="tagType">
                                    <option value="0">-- Select --</option>
                                    <option *ngFor="let tag of allTagTypes" [ngValue]="tag.tagTypeId">{{tag.name}}</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Parts Cert Num</label>
                                <input class="form-control" type="text" name="partCertificationNumber" [(ngModel)]="receivingForm.partCertificationNumber">
                            </div>
                            <div class="form-group">
                                <label>QTY</label>
                                <input class="form-control" type="number" name="quantity" [(ngModel)]="receivingForm.quantity">
                            </div>
                            <div class="form-group">
                                <label>Condition <span class="text-danger">*</span></label>
                                <select class="form-control" name="conditionId" [(ngModel)]="receivingForm.conditionId" (change)="onSelectCondition()" required>
                                    <option value="0">-- Select --</option>
                                    <option *ngFor="let condition of allConditionInfo" [ngValue]="condition.conditionId">{{condition.description}}</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Site <span class="text-danger">*</span>
                                    <span style="margin-left:3px;cursor:pointer;"><a class="fa fa-plus-circle fa-lg" matTooltip="Create Site" matTooltipPosition="above" target="_blank" [routerLink]="['/singlepages/singlepages/app-site']"></a></span>
                                </label>
                                <select [(ngModel)]="receivingForm.siteId" name="siteId" (change)="siteValueChange(receivingForm.siteId)" required>
                                    <option value="0">-- Select --</option>
                                    <option *ngFor="let site of allSites" [ngValue]="site.siteId">{{site.name}}</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Warehouse</label>
                                <select [(ngModel)]="receivingForm.warehouseId" name="warehouseId" (change)="wareHouseValueChange(receivingForm.warehouseId)">
                                    <option value="0">-- Select --</option>
                                    <option *ngFor="let site of allWareHouses" [ngValue]="site.warehouseId">{{site.warehouseName}}</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Location</label>
                                <select [(ngModel)]="receivingForm.locationId" name="locationId" (change)="locationValueChange(receivingForm.locationId)">
                                    <option value="0">-- Select --</option>
                                    <option *ngFor="let site of allLocations" [ngValue]="site.locationId">{{site.name}}</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Shelf</label>
                                <select [(ngModel)]="receivingForm.shelfId" name="shelfId" (change)="shelfValueChange(receivingForm.shelfId)">
                                    <option value="0">-- Select --</option>
                                    <option *ngFor="let site of allShelfs" [ngValue]="site.shelfId">{{site.name}}</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Bin</label>
                                <select [(ngModel)]="receivingForm.binId" name="binId">
                                    <option value="0">-- Select --</option>
                                    <option *ngFor="let site of allBins" [ngValue]="site.binId">{{site.name}}</option>
                                </select>
                            </div>                                        
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <div class="checkbox-cstm m-t-10">
                                    <label>
                                        <input type="checkbox" name="isCustomerStock" [(ngModel)]="receivingForm.isCustomerStock" checked disabled>
                                        <span class="cr"><i class="cr-icon pi pi-check"></i></span>
                                        Customer Stock
                                    </label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Obtain From</label>
                                <select [(ngModel)]="receivingForm.obtainFromTypeId" name="obtainFromTypeId" (change)="onSelectObrainFrom()">
                                    <option value="0">-- Select --</option>
                                    <option value="1">Customer</option>
                                    <option value="2">Vendor</option>
                                    <option value="3">Company</option>
                                    <option value="4">Other</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <div class="form-row" *ngIf="receivingForm.obtainFromTypeId == 1">
                                    <div class="col-sm-11">
                                        <p-autoComplete field="label" class="pautocomp-cstm" [(ngModel)]="receivingForm.obtainFrom" name="obtainFromCustomer" [suggestions]="customersList" (completeMethod)="filterCustomerNames($event)" [size]="30" [minLength]="1" [dropdown]="true" errorMessage="Records not found" [forceSelection]="true"></p-autoComplete>                                    
                                    </div>
                                    <div class="col-sm-1">
                                        <div style="cursor:pointer; font-size:14px; margin:2px -7px;"><a class="fa fa-plus-circle fa-lg" target="_blank" matTooltip="Add Customer" matTooltipPosition="above" [routerLink]="['/customersmodule/customerpages/app-customer-create']"></a></div>
                                    </div>
                                </div>
                                <div class="form-row" *ngIf="receivingForm.obtainFromTypeId == 2">
                                    <div class="col-sm-11">
                                        <p-autoComplete field="label" class="pautocomp-cstm" [(ngModel)]="receivingForm.obtainFrom" name="obtainFromVendor" [suggestions]="vendorsList" (completeMethod)="filterVendorNames($event)" [size]="30" [minLength]="1" [dropdown]="true" errorMessage="Records not found" [forceSelection]="true">
                                        </p-autoComplete>
                                    </div>
                                    <div class="col-sm-1">
                                        <div style="cursor:pointer; font-size:14px; margin:2px -7px;"><a class="fa fa-plus-circle fa-lg" target="_blank" matTooltip="Add Vendor" matTooltipPosition="above" [routerLink]="['/vendorsmodule/vendorpages/app-vendor-general-information']"></a></div>
                                    </div>
                                </div>
                                <div class="form-row" *ngIf="receivingForm.obtainFromTypeId == 3">
                                    <div class="col-sm-12">
                                        <p-autoComplete field="label" class="pautocomp-cstm"
                                            [(ngModel)]="receivingForm.obtainFrom" name="obtainFromCompany" 
                                            [suggestions]="companyList" 
                                            (completeMethod)="filterCompanyNames($event)" 
                                            [size]="30" 
                                            [minLength]="1"
                                            [dropdown]="true"
                                            errorMessage="Records not found" 
                                            [forceSelection]="true">
                                        </p-autoComplete>
                                    </div>
                                </div>
                                <div class="form-row" *ngIf="receivingForm.obtainFromTypeId == 4">
                                    <div class="col-sm-12">
                                        <input class="form-control" type="text" name="obtainFromOther" [(ngModel)]="receivingForm.obtainFrom">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Owner</label>
                                <select [(ngModel)]="receivingForm.ownerTypeId" name="ownerType" (change)="onSelectOwner()">
                                    <option value="0">-- Select --</option>
                                    <option value="1">Customer</option>
                                    <option value="2">Vendor</option>
                                    <option value="3">Company</option>
                                    <option value="4">Other</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <div class="form-row" *ngIf="receivingForm.ownerTypeId == 1">
                                    <div class="col-sm-11">
                                        <p-autoComplete field="label" class="pautocomp-cstm" [(ngModel)]="receivingForm.owner" name="ownerCustomer" [suggestions]="customersList" (completeMethod)="filterCustomerNames($event)" [size]="30" [minLength]="1" [dropdown]="true" errorMessage="Records not found" [forceSelection]="true"></p-autoComplete>                                    
                                    </div>
                                    <div class="col-sm-1">
                                        <div style="cursor:pointer; font-size:14px; margin:2px -7px;"><a class="fa fa-plus-circle fa-lg" target="_blank" matTooltip="Add Customer" matTooltipPosition="above" [routerLink]="['/customersmodule/customerpages/app-customer-create']"></a></div>
                                    </div>
                                </div>
                                <div class="form-row" *ngIf="receivingForm.ownerTypeId == 2">
                                    <div class="col-sm-11">
                                        <p-autoComplete field="label" class="pautocomp-cstm" [(ngModel)]="receivingForm.owner" name="ownerVendor" [suggestions]="vendorsList" (completeMethod)="filterVendorNames($event)" [size]="30" [minLength]="1" [dropdown]="true" errorMessage="Records not found" [forceSelection]="true">
                                        </p-autoComplete>
                                    </div>
                                    <div class="col-sm-1">
                                        <div style="cursor:pointer; font-size:14px; margin:2px -7px;"><a class="fa fa-plus-circle fa-lg" target="_blank" matTooltip="Add Vendor" matTooltipPosition="above" [routerLink]="['/vendorsmodule/vendorpages/app-vendor-general-information']"></a></div>
                                    </div>
                                </div>
                                <div class="form-row" *ngIf="receivingForm.ownerTypeId == 3">
                                    <div class="col-sm-12">
                                        <p-autoComplete field="label" class="pautocomp-cstm"
                                            [(ngModel)]="receivingForm.owner" name="ownerCompany" 
                                            [suggestions]="companyList" 
                                            (completeMethod)="filterCompanyNames($event)" 
                                            [size]="30" 
                                            [minLength]="1"
                                            [dropdown]="true"
                                            errorMessage="Records not found" 
                                            [forceSelection]="true">
                                        </p-autoComplete>
                                    </div>
                                </div>
                                <div class="form-row" *ngIf="receivingForm.ownerTypeId == 4">
                                    <div class="col-sm-12">
                                        <input class="form-control" type="text" name="ownerOther" [(ngModel)]="receivingForm.owner">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Traceble To</label>
                                <select [(ngModel)]="receivingForm.traceableToTypeId" name="traceableToType" (change)="onSelectTraceableTo()">
                                    <option value="0">-- Select --</option>
                                    <option value="1">Customer</option>
                                    <option value="2">Vendor</option>
                                    <option value="3">Company</option>
                                    <option value="4">Other</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <div class="form-row" *ngIf="receivingForm.traceableToTypeId == 1">
                                    <div class="col-sm-11">
                                        <p-autoComplete field="label" class="pautocomp-cstm" [(ngModel)]="receivingForm.traceableTo" name="traceableToCustomer" [suggestions]="customersList" (completeMethod)="filterCustomerNames($event)" [size]="30" [minLength]="1" [dropdown]="true" errorMessage="Records not found" [forceSelection]="true"></p-autoComplete>
                                    </div>
                                    <div class="col-sm-1">
                                        <div style="cursor:pointer; font-size:14px; margin:2px -7px;"><a class="fa fa-plus-circle fa-lg" target="_blank" matTooltip="Add Customer" matTooltipPosition="above" [routerLink]="['/customersmodule/customerpages/app-customer-create']"></a></div>
                                    </div>
                                </div>
                                <div class="form-row" *ngIf="receivingForm.traceableToTypeId == 2">
                                    <div class="col-sm-11">
                                        <p-autoComplete field="label" class="pautocomp-cstm" [(ngModel)]="receivingForm.traceableTo" name="traceableToVendor" [suggestions]="vendorsList" (completeMethod)="filterVendorNames($event)" [size]="30" [minLength]="1" [dropdown]="true" errorMessage="Records not found" [forceSelection]="true">
                                        </p-autoComplete>
                                    </div>
                                    <div class="col-sm-1">
                                        <div style="cursor:pointer; font-size:14px; margin:2px -7px;"><a class="fa fa-plus-circle fa-lg" target="_blank" matTooltip="Add Vendor" matTooltipPosition="above" [routerLink]="['/vendorsmodule/vendorpages/app-vendor-general-information']"></a></div>
                                    </div>
                                </div>
                                <div class="form-row" *ngIf="receivingForm.traceableToTypeId == 3">
                                    <div class="col-sm-12">
                                        <p-autoComplete field="label" class="pautocomp-cstm"
                                            [(ngModel)]="receivingForm.traceableTo" name="traceableToCompany" 
                                            [suggestions]="companyList" 
                                            (completeMethod)="filterCompanyNames($event)" 
                                            [size]="30" 
                                            [minLength]="1"
                                            [dropdown]="true"
                                            errorMessage="Records not found" 
                                            [forceSelection]="true">
                                        </p-autoComplete>
                                    </div>
                                </div>
                                <div class="form-row" *ngIf="receivingForm.traceableToTypeId == 4">
                                    <div class="col-sm-12">
                                        <input class="form-control" type="text" name="traceableToOther" [(ngModel)]="receivingForm.traceableTo">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="checkbox-cstm m-t-10">
                                    <label>
                                        <input type="checkbox" name="isMFGDate" [(ngModel)]="receivingForm.isMFGDate">
                                        <span class="cr"><i class="cr-icon pi pi-check"></i></span>
                                        MFG Date
                                    </label>
                                </div>
                            </div>
                            <div class="form-group" *ngIf="receivingForm.isMFGDate">
                                <p-calendar class="workflow-clder" [showIcon]="true" [maxDate]="currentDate" name="manufacturingDate" [(ngModel)]="receivingForm.mfgDate"></p-calendar>
                            </div>
                            <div class="form-group">
                                <label>MFG Trace</label>
                                <input class="form-control" type="text" name="MFGTrace" [(ngModel)]="receivingForm.mfgTrace">
                            </div>
                            <div class="form-group">
                                <label>MFG Lot</label>
                                <input class="form-control" type="text" name="MFGLotNo" [(ngModel)]="receivingForm.mfgLotNo">
                            </div>
                            <div class="form-group">
                                <div class="checkbox-cstm m-t-10">
                                    <label>
                                        <input type="checkbox" name="isExpDate" [(ngModel)]="receivingForm.isExpDate">
                                        <span class="cr"><i class="cr-icon pi pi-check"></i></span>
                                        Exp Date
                                    </label>
                                </div>
                            </div>
                            <div class="form-group" *ngIf="receivingForm.isExpDate">
                                <p-calendar class="workflow-clder" [showIcon]="true" [minDate]="currentDate" name="expDate" [(ngModel)]="receivingForm.expDate"></p-calendar>
                            </div>                    
                        </div>
                        <div class="col-md-6">
                            <div class="card" style="margin-top: 20px;margin-bottom: 10px;">
                                <div class="card-header" style="padding: 10px 12px;">
                                    <h5 style="margin-bottom: 0; font-size: 12px;">Management Structure <span class="text-danger">*</span></h5>
                                </div>
                                <div class="card-body" style="padding: 12px 12px 4px;">
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            <select class="form-control" name="company" [(ngModel)]="managementStructure.companyId" 
                                            (change)="selectedLegalEntity(managementStructure.companyId);" #companyName="ngModel" required>
                                                <option value="0">Select Legal Entity</option>
                                                <option *ngFor="let name of legalEntityList" [ngValue]="name.value">{{name.label}}</option>
                                            </select>
                                            <div *ngIf="companyName.invalid && (companyName.dirty || companyName.touched)" class="alert alert-danger alert-danger-cstm">
                                                    <div *ngIf="companyName.errors.required">
                                                        <small> Legal Entity Name is required </small>
                                                    </div>
                                            </div>        
                                        </div>
                                        <div class="form-group">
                                            <select class="form-control" [(ngModel)]="managementStructure.buId" name="buId" (change)="selectedBusinessUnit(managementStructure.buId)">
                                                <option value="0">-- Select --</option>
                                                <option *ngFor="let name of businessUnitList" [ngValue]="name.value">{{name.label}}</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <select class="form-control" [(ngModel)]="managementStructure.divisionId" name="divisionId" (change)="selectedDivision(managementStructure.divisionId)">
                                                <option value="0">-- Select --</option>
                                                <option *ngFor="let name of divisionList" [ngValue]="name.value">{{name.label}}</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <select class="form-control" [(ngModel)]="managementStructure.departmentId" name="departmentId" (change)="selectedDepartment(managementStructure.departmentId)">
                                                <option value="0">-- Select --</option>
                                                <option *ngFor="let name of departmentList" [ngValue]="name.value">{{name.label}}</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group memo-popup-cstm">
                                <label>Memo</label>
                                <span matTooltip="{{receivingForm.memo}}" matTooltipPosition="above"><input type="text" name="memo" pInputText class="form-control" value="{{receivingForm.memo}}" disabled /></span>
                                <i class="fa fa-info-circle fa-lg" data-toggle="modal" data-target="#textarea-popup" matTooltip="{{receivingForm.memo}}" matTooltipPosition="above" (click)="onAddTextAreaInfo('memo')"></i>
                            </div>                            
                        </div>
                    </div>
                    <div class="form-group">
                        <label style="float: none;">Attachments</label>
                        <p-fileUpload class="" name="CertificationFile[]" multiple="multiple" [showCancelButton]="false" [showUploadButton]="false" customUpload="true" (onSelect)="fileUpload($event,'CustomerReceiving')">
                        </p-fileUpload>
                        <!-- <p-fileUpload #fileUpload   name="fileupload[]" multiple="multiple" [showCancelButton]="false" [showUploadButton]="false" customUpload="true" (onSelect)="fileUploadForDocuments($event)"  (onRemove)="removeFile($event)"></p-fileUpload> -->
                    </div>
                    <div class="form-group">
                        <div class="table-responsive table-overflow" *ngIf="customerWorkDocumentsList.length> 0">
                            <h4 class="panel-title" >Attachment Details:</h4>
                            <table class="table table-bordered ">
                                <thead>                                                         
                                    <tr>
                                        <th>File Name</th>
                                        <th>Download</th>
                                        <th>Delete</th>
                                    </tr>
                                </thead>
                                <tbody *ngFor="let f of customerWorkDocumentsList">
                                    <tr>
                                        <td>{{f.fileName}}</td>
                                        <td><a (click)="downloadFileUpload(f)" matTooltip="Download" class="btn nobg btn-cstm"><span><i class="fa fa-download"></i></span></a> </td>
                                        <td>  <button class="btn-delete" mat-icon-button matTooltip="Delete" (click)="getEmployeeAttachmentDelete(f)">
                                        <mat-icon color="warn">delete</mat-icon> </button>
                                    </td>
                                    </tr>                                                
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <div [ngClass]="receivingForm.isTimeLife ? 'card card-timelife' : ''">
                <div [ngClass]="receivingForm.isTimeLife ? 'card-body' : ''">
                    <div class="form-row">
                        <div class="col-md-3">
                            <div class="form-group">
                                <div class="checkbox-cstm m-t-15">
                                    <label>
                                        <input type="checkbox" class="serialized-checkbox" name="isSerialized" [(ngModel)]="receivingForm.isSerialized" disabled>
                                        <span class="cr"><i class="cr-icon pi pi-check"></i></span>
                                        Is Serialized
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3" *ngIf="receivingForm.isSerialized">
                            <div class="form-group">
                                <div class="checkbox-cstm m-t-15">
                                    <label>
                                        <input type="checkbox" name="isSkipSerialNo" [(ngModel)]="receivingForm.isSkipSerialNo" (change)="resetSerialNo()">
                                        <span class="cr"><i class="cr-icon pi pi-check"></i></span>
                                        Serial Number info not provided
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3" *ngIf="receivingForm.isSerialized">
                            <div class="form-group" *ngIf="!receivingForm.isSkipSerialNo">
                                <label>Serial Number</label>
                                <input class="form-control" type="text" name="serialNumber" [(ngModel)]="receivingForm.serialNumber">
                            </div>  
                        </div>                
                    </div>
                </div>
            </div>
            <div [ngClass]="receivingForm.isTimeLife ? 'card card-timelife' : ''">
                <div [ngClass]="receivingForm.isTimeLife ? 'card-body' : ''">
                    <div class="form-row">
                        <div class="col-md-3">
                            <div class="form-group">
                                <div class="checkbox-cstm m-t-15">
                                    <label>
                                        <input type="checkbox" name="isTimeLife" [(ngModel)]="receivingForm.isTimeLife" disabled>
                                        <span class="cr"><i class="cr-icon pi pi-check"></i></span>
                                        Time Life
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3" *ngIf="receivingForm.isTimeLife">
                            <div class="form-group">
                                <div class="checkbox-cstm m-t-15">
                                    <label>
                                        <input type="checkbox" name="isSkipTimeLife" [(ngModel)]="receivingForm.isSkipTimeLife" (change)="resetTimelife()">
                                        <span class="cr"><i class="cr-icon pi pi-check"></i></span>
                                        Time Life info not provided
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3" *ngIf="receivingForm.isTimeLife">
                            <div class="form-group" *ngIf="!receivingForm.isSkipTimeLife">
                                <label>Date</label>
                                <p-calendar class="workflow-clder" [showIcon]="true" name="timeLifeDate" [(ngModel)]="receivingForm.timeLifeDate"></p-calendar>
                            </div>
                        </div>
                        <div class="col-md-3" *ngIf="receivingForm.isTimeLife">
                            <div class="form-group" *ngIf="!receivingForm.isSkipTimeLife">
                                <label>Origin</label>
                                <input class="form-control" type="text" name="timeLifeOrigin" [(ngModel)]="receivingForm.timeLifeOrigin">
                            </div>
                        </div>
                    </div>
                    <div class="form-row" *ngIf="receivingForm.isTimeLife">  
                        <div class="table-responsive form-group" style="padding: 0 5px;" *ngIf="!receivingForm.isSkipTimeLife">
                            <table class="table table-bordered">
                                <thead>
                                    <tr>
                                        <th colspan="15" class="text-center"><strong>Time Life Info</strong></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <th></th>
                                        <th class="text-center">Cycles</th>
                                        <th class="text-center">Time</th>
                                        <th class="text-center">Last</th>
                                    </tr>
                                    <tr>
                                        <td>Remaining</td>
                                        <td class="clr2 text-center"><input type="number" class="w60 form-control" placeholder="hours" name="cyclesRemaining" [(ngModel)]="sourceTimeLife.cyclesRemaining"></td>
                                        <td class="clr2 text-center"><input type="number" class="w60 form-control" placeholder="hours" name="timeRemaining" [(ngModel)]="sourceTimeLife.timeRemaining"></td>
                                        <td></td>
        
                                    </tr>
                                    <tr>
                                        <td>Since New</td>
                                        <td class="clr2 text-center"><input type="number" class="w60 form-control" placeholder="hours" name="cyclesSinceNew" [(ngModel)]="sourceTimeLife.cyclesSinceNew"></td>
                                        <td class="clr2 text-center"><input type="number" class="w60 form-control" placeholder="hours" name="timeSinceNew" [(ngModel)]="sourceTimeLife.timeSinceNew"></td>
                                        <td class="clr2 text-center"><input type="number" class="w60 form-control" placeholder="hours" name="lastSinceNew" [(ngModel)]="sourceTimeLife.lastSinceNew"></td>
        
                                    </tr>
                                    <tr>
                                        <td>Since Ovh</td>
                                        <td class="clr2 text-center"><input type="number" class="w60 form-control" placeholder="hours" name="cyclesSinceOVH" [(ngModel)]="sourceTimeLife.cyclesSinceOVH"></td>
                                        <td class="clr2 text-center"><input type="number" class="w60 form-control" placeholder="hours" name="timeSinceOVH" [(ngModel)]="sourceTimeLife.timeSinceOVH"></td>
                                        <td class="clr2 text-center"><input type="number" class="w60 form-control" placeholder="hours" name="lastSinceOVH" [(ngModel)]="sourceTimeLife.lastSinceOVH"></td>
        
                                    </tr>
                                    <tr>
                                        <td>Since Insp</td>
                                        <td class="clr2 text-center"><input type="number" class="w60 form-control" placeholder="hours" name="cyclesSinceInspection" [(ngModel)]="sourceTimeLife.cyclesSinceInspection"></td>
                                        <td class="clr2 text-center"><input type="number" class="w60 form-control" placeholder="hours" name="timeSinceInspection" [(ngModel)]="sourceTimeLife.timeSinceInspection"></td>
                                        <td class="clr2 text-center"><input type="number" class="w60 form-control" placeholder="hours" name="lastSinceInspection" [(ngModel)]="sourceTimeLife.lastSinceInspection"></td>
                                    </tr>
                                    <tr>
                                        <td>Since Repair</td>
                                        <td class="clr2 text-center"><input type="number" class="w60 form-control" placeholder="hours" name="cyclesSinceRepair" [(ngModel)]="sourceTimeLife.cyclesSinceRepair"></td>
                                        <td class="clr2 text-center"><input type="number" class="w60 form-control" placeholder="hours" name="timeSinceRepair" [(ngModel)]="sourceTimeLife.timeSinceRepair"></td>
                                        <td></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-row pull-right m-t-10">
                <button type="submit" class="btn btn-primary" (click)="onSaveCustomerReceiving()" [disabled]="!customerWorkForm.valid || disableMagmtStruct || disableCondition || disableSite">{{isEditMode ? 'Update' : 'Save'}}</button>
            </div>
        </form>
    </div>
        
</div>

<div class="modal fade" id="textarea-popup" role="dialog" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-sm" style="max-width: 400px !important;">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Edit {{textAreaLabel}}</h4>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>{{textAreaLabel}}</label>
                    <textarea class="form-control" name="textAreaInfo" [(ngModel)]="textAreaInfo" value={{textAreaInfo}}></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="onSaveTextAreaInfo()">Save</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="workorderpopup" role="dialog" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-sm" style="max-width: 530px !important;">
        <div class="modal-content">
            <div class="modal-header">
                <!-- <button type="button" class="close" data-dismiss="modal">&times;</button> -->
                <h4 class="modal-title">Customer Work is saved. Would you like to create Work Order ?</h4>
            </div>
            <!-- <div class="modal-body">
                <div class="form-group">
                    <label>{{textAreaLabel}}</label>
                    <textarea class="form-control" name="textAreaInfo" [(ngModel)]="textAreaInfo" value={{textAreaInfo}}></textarea>
                </div>
            </div> -->
            <div class="modal-footer" style="border-top: transparent;">
                <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="goToWorkOrder()">Yes</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal" (click)="goToCustomerWorkList()">No</button>
            </div>
        </div>
    </div>
</div>


<!-- <div [@fadeInOut] class="page-content">
    <div class="right_col" role="main" style="min-height: 629px;">
        <div class="x_panel" style="">
            <div class="x_content add-customer-work">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item" aria-current="page">Receiving</li>
                        <li class="breadcrumb-item" aria-current="page">Customer Work</li>
                        <li class="breadcrumb-item active" aria-current="page">Edit Customer Work</li>
                    </ol>
                </nav>
                <h4 class="page-heading">Edit Customer Work</h4>
                <div class="clear"></div>
                <form action="#" method="post" #addcustomerwork="ngForm" id="addcustomerwork" name="" class="form-horizontal add-custustomer">
                    <div class="col-md-12 col-sm-12 col-12">
                        <div class="tab-content form-bg">
                            <div class="tab-pane active" id="home">
                                <div class="col-sm-4 blocks3">
                                    <div class="form-group col-sm-12 add-icon-inline-right">
                                        <label class="control-label col-sm-4">Employee Name<strong class="clr-red">*</strong></label>
                                        <p-autoComplete class="pautocomp-cstm" [(ngModel)]="receivingForm.firstName" (onSelect)="empnameId($event)" name="firstName" [suggestions]="firstCollection" (completeMethod)="filterfirstName($event)" [size]="30" required
                                                        [minLength]="1" [dropdown]="true">
                                            <ng-template let-firstName pTemplate="item">
                                                <div class="ui-helper-clearfix">{{firstName}}</div>
                                            </ng-template>
                                        </p-autoComplete>
                                    
                                    </div>
                                </div>
                                <div class="clear"></div>
                                <hr class="hr-dark">
                                <div class="col-sm-4 blocks3">
                                    <div class="form-group col-sm-13 add-icon-inline-right">
                                        <label class="control-label col-sm-4">Customer Name<strong class="clr-red">*</strong></label>
                                        <p-autoComplete class="pautocomp-cstm" sstyle="font-size: 1px" [(ngModel)]="receivingForm.name" (onSelect)="customerNameId($event)" name="name" [suggestions]="customerNames" (completeMethod)="filterNames($event)" [size]="30" required
                                                        [minLength]="1" [dropdown]="true">
                                            <ng-template let-name pTemplate="item">
                                                <div class="ui-helper-clearfix">{{name}}</div>

                                            </ng-template>
                                        </p-autoComplete>

                                     


                                    </div>
                                    <div class="form-group col-sm-13">
                                        <div class="form-group add-icon-inline-right">
                                            <label class="control-label col-sm-4">Customer Code<strong class="clr-red">*</strong></label>


                                            <p-autoComplete class="pautocomp-cstm" sstyle="font-size: 1px"
                                                            name="customerCode"
                                                            field="customerCode"
                                                            [(ngModel)]="receivingForm.customerCode" [suggestions]="custcodes"
                                                            (completeMethod)="filterCodes($event)" [size]="30" #customerCode="ngModel"
                                                            [minLength]="1" [dropdown]="true" required>

                                            </p-autoComplete>
                                          
                                        </div>

                                     


                                    </div>
                                    <div class="form-group col-sm-12">
                                        <label class="control-label col-sm-4">Receiving Num</label>
                                        <div class="col-sm-8">
                                            <input class="form-control" type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="receivingForm.receivingCustomerNumber" readonly>
                                        </div>
                                    </div>

                                    <div class="form-group col-sm-12">
                                        <label class="control-label col-sm-4">Ref<strong class="clr-red">*</strong></label>
                                        <div class="col-sm-8">

                                            <p-autoComplete class="pautocomp-cstm" sstyle="font-size: 1px" [(ngModel)]="receivingForm.customerReference" name="customerReference" [suggestions]="customerReferenceNames" (completeMethod)="filterReferenceNames($event)" [size]="30" required
                                                            [minLength]="1" [dropdown]="true">
                                                <ng-template let-name pTemplate="item">
                                                    <div class="ui-helper-clearfix">{{name}}</div>

                                                </ng-template>
                                            </p-autoComplete>
                                                </div>
                                    </div>

                                    <div class="form-group col-sm-12">
                                        <label class="control-label col-sm-4">Contact<strong class="clr-red">*</strong></label>
                                        <div class="col-sm-8">

                                            <select style="border-radius:5px;" sstyle="font-size: 1px" [(ngModel)]="receivingForm.customerContactId" name="customerContactId" (change)="customerContactChange(receivingForm.customerContactId)" required> 
                                                <option>--Select</option>
                                                <option *ngFor="let contact of customerContactList" [ngValue]="contact.contactId">{{contact.firstName}}</option>
                                            </select>
                                        </div>
                                     
                                    </div>
                                    <div class="form-group col-sm-12">
                                        <label class="control-label col-sm-4">Contact Phone<strong class="clr-red">*</strong></label>
                                        <div class="col-sm-8">
                                            <input sstyle="font-size: 1px" class="form-control" type="text" name="workPhone" [(ngModel)]="receivingForm.workPhone" required (keypress)="patternMobilevalidationWithSpl($event)">
                                        </div>
                                     

                                    </div>
                                    <div class="form-group col-sm-12 input-icon1">
                                        <label class="control-label col-sm-4"> PN<strong class="clr-red">*</strong> </label>
                                        <p-autoComplete required class="pautocomp-cstm" [(ngModel)]="receivingForm.partNumber" (onSelect)="partnmId($event)" name="partNumber" [suggestions]="partCollection" (completeMethod)="filterpartItems($event)" [size]="30"
                                                        [minLength]="1" [dropdown]="true">
                                            <ng-template let-partName pTemplate="part">
                                                <div class="ui-helper-clearfix">{{partName}}</div>
                                            </ng-template>
                                        </p-autoComplete>
                                      
                                    </div>
                                    <div class="form-group col-sm-12">
                                        <label class="control-label col-sm-4">PN Description</label>
                                        <div class="col-sm-8">
                                            <input class="form-control" [disabled]="true" type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="receivingForm.partDescription">
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-12">
                                        <label class="control-label col-sm-4">Manufacturer</label>
                                        <div class="col-sm-8">
                                            <input class="form-control" [disabled]="true" type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="receivingForm.manufacturer">
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-12">
                                        <label class="control-label col-sm-4">Revised PN </label>
                                        <p-autoComplete class="pautocomp-cstm" [(ngModel)]="receivingForm.changePartNumber" [ngModelOptions]="{standalone: true}" [suggestions]="partCollection" (completeMethod)="filterpartItems($event)" [size]="30"
                                                        [minLength]="1" [dropdown]="true">
                                            <ng-template let-partName1 pTemplate="part">
                                                <div class="ui-helper-clearfix">{{partName1}}</div>
                                            </ng-template>
                                        </p-autoComplete>
                                  
                                    </div>
                                    <div class="form-group col-sm-12">
                                        <label class="control-label col-sm-4">Serialized</label>
                                        <div class="col-sm-8">
                                            <input class="form-control serialized-checkbox" [disabled]="true" type="checkbox" [ngModelOptions]="{standalone: true}" [(ngModel)]="receivingForm.isSerialized">
                                        </div>

                                        <div *ngIf="receivingForm.isSerialized" class="serialized-block">

                                            <div class="form-group col-sm-12">
                                                <label class="control-label col-sm-4">Serial Number </label>
                                                <div class="col-sm-8">
                                                    <input class="form-control" type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="receivingForm.serialNumber">
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-12">
                                                <label class="control-label col-sm-4">Cert By</label>
                                                <div class="col-sm-8">
                                                    <input class="form-control" type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="receivingForm.certifiedBy">
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-12">
                                                <label class="control-label col-sm-4">Tag Date</label>
                                                <div class="col-sm-8">
                                                    <p-calendar [showIcon]="true" [ngModelOptions]="{standalone: true}" [(ngModel)]="receivingForm.tagDate"></p-calendar>
                                                     </div>
                                            </div>
                                            <div class="form-group col-sm-12">
                                                <label class="control-label col-sm-4">Tag Type</label>
                                                <div class="col-sm-8">
                                                    <input type="text" class="form-control numberids ui-autocomplete-input" [ngModelOptions]="{standalone: true}" [(ngModel)]="receivingForm.tagType">
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-12">
                                                <label class="control-label col-sm-4">Parts Cert Num</label>
                                                <div class="col-sm-8">
                                                    <input class="form-control" type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="receivingForm.partCertificationNumber">
                                                </div>
                                            </div>
                                            <div class="clear"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-4 blocks3">

                                    <div class="clear"></div>
                                    <div class="form-group col-sm-12">
                                        <label class="control-label col-sm-4">QTY</label>
                                        <div class="col-sm-8">
                                            <input class="form-control qty-input" *ngIf="showNormalQuantity" type="number" [ngModelOptions]="{standalone: true}" [(ngModel)]="receivingForm.quantity">
                                            <input class="form-control qty-input" *ngIf="showRestrictQuantity" type="number" min="0" max="1" [ngModelOptions]="{standalone: true}" [(ngModel)]="receivingForm.quantity">
                                            <input class="form-control qty-input" *ngIf="showFreeQuantity" type="number" min="0" [ngModelOptions]="{standalone: true}" [(ngModel)]="receivingForm.quantity">

                                        </div>
                                    </div>
                                    <div class="form-group col-sm-12">
                                        <label class="control-label col-sm-4">Condition<strong class="clr-red">*</strong></label>
                                        <div class="col-sm-8">
                                            <select class="form-control" style="border-radius:5px;" name="conditionId" [(ngModel)]="receivingForm.conditionId" required>
                                                <option *ngFor="let condition of allConditionInfo" [ngValue]="condition.conditionId">{{condition.description}}</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-12">
                                        <label class="control-label col-sm-4">Site <strong class="clr-red">*</strong></label>
                                        <div class="col-sm-8">

                                            <select style="border-radius:5px;" [(ngModel)]="receivingForm.siteId" name="siteId" (change)="siteValueChange($event.target.value)" required>
                                                <option>--Select</option>
                                                <option *ngFor="let site of allSites" [ngValue]="site.siteId">{{site.name}}</option>
                                            </select>
                                            <a matTooltip="Create Site" style="position: absolute;right: -20px;top: 0;"
                                               class=""
                                               [routerLink]="[
                                                 '/singlepages/singlepages/app-site'
                                                         ]">
                                                <i class="fa fa-plus-circle fa-lg"></i>
                                            </a>
                                        </div>
                                    </div>


                                    <div class="form-group col-sm-12">
                                        <label class="control-label col-sm-4">Warehouse<strong class="clr-red">*</strong></label>
                                        <div class="col-sm-8">
                                            <select required style="border-radius:5px;" [(ngModel)]="receivingForm.warehouseId" name="warehouseId" (change)="wareHouseValueChange(receivingForm.warehouseId)">
                                                <option value="">--Select</option>
                                                <option *ngFor="let site of allWareHouses" [ngValue]="site.warehouseId">{{site.warehouseName}}</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-12">
                                        <label class="control-label col-sm-4">Location</label>
                                        <div class="col-sm-8">
                                            <select style="border-radius:5px;" [(ngModel)]="receivingForm.locationId" [ngModelOptions]="{standalone: true}" (change)="locationValueChange(receivingForm.locationId)">
                                                <option>--Select</option>
                                                <option *ngFor="let site of allLocations" [ngValue]="site.locationId">{{site.name}}</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-12">
                                        <label class="control-label col-sm-4">Shelf</label>
                                        <div class="col-sm-8">
                                            <select style="border-radius:5px;" [(ngModel)]="receivingForm.shelfId" [ngModelOptions]="{standalone: true}" (change)="shelfValueChange(receivingForm.shelfId)">
                                                <option>--Select</option>
                                                <option *ngFor="let site of allShelfs" [ngValue]="site.shelfId">{{site.name}}</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-12">
                                        <label class="control-label col-sm-4">Bin</label>
                                        <div class="col-sm-8">
                                            <select style="border-radius:5px;" [(ngModel)]="receivingForm.binId" [ngModelOptions]="{standalone: true}" (change)="binValueSelect(receivingForm.binId)">
                                                <option>--Select</option>
                                                <option *ngFor="let site of allBins" [ngValue]="site.binId">{{site.name}}</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-12">
                                        <label class="control-label col-sm-4">Owner</label>
                                        <div class="col-sm-8 add-icon-inline-right">
                                           

                                            <p-autoComplete class="pautocomp-cstm" sstyle="font-size: 1px" [(ngModel)]="receivingForm.owner" [ngModelOptions]="{standalone: true}" [suggestions]="customerNames" (completeMethod)="filterNames($event)" [size]="30"
                                                            [minLength]="1" [dropdown]="true">
                                                <ng-template let-name pTemplate="item">
                                                    <div class="ui-helper-clearfix">{{name}}</div>
                                                </ng-template>
                                            </p-autoComplete>

                                          
                                        </div>
                                        <div class="form-group col-sm-12" *ngIf="showCustomer2">
                                            <label class="control-label col-sm-4"></label>
                                            <div class="inner-addon inline-block display-flex" *ngIf="receivingForm.ownerType == 1">
                                                <select style="border-radius:5px;" [(ngModel)]="receivingForm.owner" [ngModelOptions]="{standalone: true}">
                                                    <option *ngFor="let customer of allCustomer" [ngValue]="customer.name">{{customer.name}}</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-12" *ngIf="showOther2">
                                            <label class="control-label col-sm-4"></label>
                                            <div class="col-sm-8" *ngIf="receivingForm.ownerType == 2">
                                                <input class="form-control" type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="receivingForm.owner">
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-12" *ngIf="showVendor2">
                                            <label class="control-label col-sm-4"></label>
                                            <div class="inner-addon inline-block display-flex" *ngIf="receivingForm.ownerType == 3">
                                                <select style="border-radius:5px;" [(ngModel)]="receivingForm.owner" [ngModelOptions]="{standalone: true}">
                                                    <option *ngFor="let vendor of allVendorList" [ngValue]="vendor.vendorName">{{vendor.vendorName}}</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-12" *ngIf="showCompany2">
                                            <label class="control-label col-sm-4"></label>
                                            <div class="inner-addon  inline-block display-flex" *ngIf="receivingForm.ownerType == 4">
                                                <select style="border-radius:5px;" [(ngModel)]="receivingForm.owner" [ngModelOptions]="{standalone: true}">
                                                    <option *ngFor="let ataName of maincompanylist" [ngValue]="ataName.code">{{ataName.code}}</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-12">
                                        <label class="control-label col-sm-4">Customer Stock</label>
                                        <div class="col-sm-8">
                                            <input class="" type="checkbox" id="" checked="checked" [disabled]="true" [ngModelOptions]="{standalone: true}" [(ngModel)]="receivingForm.isCustomerStock">
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-12">
                                        <label class="control-label col-sm-4" for="obtainFrom">Tracable to</label>
                                        <div class="col-sm-8">
                                            <select style="border-radius:5px;" id="obtainFrom" [(ngModel)]="receivingForm.traceableToType" [ngModelOptions]="{standalone: true}" class="form-control" (change)="getTracabletoType(receivingForm.traceableToType)">
                                                <option>-- Select --</option>
                                                <option value="1">Customer</option>
                                                <option value="2">Other </option>
                                                <option value="3">Vendor</option>
                                                <option value="4">Company</option>
                                            </select>
                                        </div>
                                        <div class="form-group col-sm-12" *ngIf="showCustomer">
                                            <label class="control-label col-sm-4"></label>
                                            <div class="inner-addon inline-block display-flex" *ngIf="receivingForm.traceableToType == 1">
                                                <select style="border-radius:5px;" [(ngModel)]="receivingForm.traceableTo" [ngModelOptions]="{standalone: true}">
                                                    <option *ngFor="let customer of allCustomer" [ngValue]="customer.name">{{customer.name}}</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-12" *ngIf="showOther">
                                            <label class="control-label col-sm-4"></label>
                                            <div class="col-sm-8" *ngIf="receivingForm.traceableToType == 2">
                                                <input  class="form-control"  type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="receivingForm.traceableTo">
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-12" *ngIf="showVendor">
                                            <label class="control-label col-sm-4"></label>
                                            <div class="inner-addon inline-block display-flex" *ngIf="receivingForm.traceableToType == 3">
                                                <select style="border-radius:5px;" [(ngModel)]="receivingForm.traceableTo" [ngModelOptions]="{standalone: true}">
                                                    <option *ngFor="let vendor of allVendorList" [ngValue]="vendor.vendorName">{{vendor.vendorName}}</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-12" *ngIf="showCompany">
                                            <label class="control-label col-sm-4"></label>
                                            <div class="col-sm-8" *ngIf="receivingForm.traceableToType == 4">
                                                <select style="border-radius:5px;" [(ngModel)]="receivingForm.traceableTo" [ngModelOptions]="{standalone: true}">
                                                    <option *ngFor="let ataName of maincompanylist" [ngValue]="ataName.code">{{ataName.code}}</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-4 blocks3">



                                    <div class="form-group col-sm-12">
                                        <label class="control-label col-sm-4">Obtain From</label>
                                        <div class="col-sm-8">
                                            <select style="border-radius:5px;" [(ngModel)]="receivingForm.obtainFromType" [ngModelOptions]="{standalone: true}" class="form-control" (change)="getObtaintoType(receivingForm.obtainFromType)">
                                                <option>-- Select --</option>
                                                <option value="1">Customer</option>
                                                <option value="2">Other </option>
                                                <option value="3">Vendor</option>
                                                <option value="4">Company</option>
                                            </select>
                                        </div>
                                        <div class="form-group col-sm-12" *ngIf="showCustomer1">
                                            <label class="control-label col-sm-4"></label>
                                            <div class="inner-addon inline-block display-flex" *ngIf="receivingForm.obtainFromType == 1">
                                                <select style="border-radius:5px;" [(ngModel)]="receivingForm.obtainFrom" [ngModelOptions]="{standalone: true}">
                                                    <option *ngFor="let customer of allCustomer" [ngValue]="customer.name">{{customer.name}}</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-12" *ngIf="showOther1">
                                            <label class="control-label col-sm-4"></label>
                                            <div class="col-sm-8" *ngIf="receivingForm.obtainFromType == 2">
                                                <input class="form-control" type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="receivingForm.obtainFrom">
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-12" *ngIf="showVendor1">
                                            <label class="control-label col-sm-4"></label>
                                            <div class="inner-addon inline-block display-flex" *ngIf="receivingForm.obtainFromType == 3">
                                                <select  style="border-radius:5px;"[(ngModel)]="receivingForm.obtainFrom" [ngModelOptions]="{standalone: true}">
                                                    <option *ngFor="let vendor of allVendorList" [ngValue]="vendor.vendorName">{{vendor.vendorName}}</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-12" *ngIf="showCompany1">
                                            <label class="control-label col-sm-4"></label>
                                            <div class="inner-addon inline-block display-flex" *ngIf="receivingForm.obtainFromType == 4">
                                                <select style="border-radius:5px;" [(ngModel)]="receivingForm.obtainFrom" [ngModelOptions]="{standalone: true}">
                                                    <option *ngFor="let ataName of maincompanylist" [ngValue]="ataName.code">{{ataName.code}}</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group col-sm-12">
                                        <label class="control-label col-sm-4">MFG Date</label>
                                        <div class="col-sm-7">

                                            <input class="form-control" type="checkbox" [ngModelOptions]="{standalone: true}" [(ngModel)]="receivingForm.isMFGDate">
                                        </div>
                                        <div class="col-sm-8 expdate-input" *ngIf="receivingForm.isMFGDate">
                                            <p-calendar [showIcon]="true" [ngModelOptions]="{standalone: true}" [(ngModel)]="receivingForm.manufacturingDate"></p-calendar>

                                        </div>
                                    </div>

                                    <div class="form-group col-sm-12">
                                        <label class="control-label col-sm-4">MFG Trace </label>
                                        <div class="col-sm-8">
                                            <input class="form-control" type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="receivingForm.manufacturingTrace">
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-12">
                                        <label class="control-label col-sm-4">MFG Lot </label>
                                        <div class="col-sm-8">
                                            <input class="form-control" type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="receivingForm.manufacturingLotNumber">
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-12">
                                        <label class="control-label col-sm-4">Exp Date</label>
                                        <div class="col-sm-7">
                                            <input class="form-control" type="checkbox" [ngModelOptions]="{standalone: true}" [(ngModel)]="receivingForm.isExpirationDate" id="expdate-input">
                                        </div>
                                        <div class="col-sm-8 expdate-input" *ngIf="receivingForm.isExpirationDate">
                                            <p-calendar [showIcon]="true" [ngModelOptions]="{standalone: true}" [(ngModel)]="receivingForm.expirationDate "></p-calendar>
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-12">
                                        <label class="control-label col-sm-4">Time Life</label>
                                        <div class="col-sm-8">
                                            <input class="" type="checkbox" [disabled]="true" [ngModelOptions]="{standalone: true}" [(ngModel)]="receivingForm.isTimeLife">
                                        </div>
                                    </div>
                                    <div *ngIf="this.receivingForm.isTimeLife" class="timelife-block">

                                        <div class="form-group col-sm-12">
                                            <label class="control-label col-sm-4">Date</label>
                                            <div class="col-sm-8">
                                                <p-calendar [showIcon]="true" [ngModelOptions]="{standalone: true}" [(ngModel)]="receivingForm.timeLifeDate"></p-calendar>
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-12">
                                            <label class="control-label col-sm-4">Origin</label>
                                            <div class="col-sm-8">
                                                <input class="" type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="receivingForm.timeLifeOrigin ">
                                            </div>
                                        </div>

                                        <div class="clear"></div>

                                        <div class="clear"></div>

                                    </div>


                                    <div class="card" style="margin-top: 20px;margin-left:50px">
                                        <div class="card-header" style="padding: 10px 12px;">
                                            <h5 style="margin-bottom: 0; font-size: 12px;">Management Structure <span class="clr-red">*</span></h5>
                                        </div>
                                        <div class="card-body" style="padding: 12px 12px 4px;">
                                            <div class="form-group">
                                                <select style="border-radius:5px;" class="form-control" name="primaryCompany" [(ngModel)]="receivingForm.companyId"
                                                        (change)="getBUList(receivingForm.companyId)" #mCompanyName required>
                                                    <option value="0">Select Company</option>
                                                    <option *ngFor="let name of maincompanylist" [ngValue]="name.managementStructureId">{{name.code}}</option>
                                                </select>
                                                <div *ngIf="mCompanyName.invalid && (mCompanyName.dirty || mCompanyName.touched)" class="alert alert-danger alert-danger-cstm">
                                                    <div *ngIf="mCompanyName.errors.required">
                                                        <small> Company Name is required </small>
                                                    </div>
                                                </div>

                                            </div>
                                            <div class="form-group">
                                                <select style="border-radius:5px;" [(ngModel)]="receivingForm.buId" name="primaryBU" (change)="getDivisionlist(receivingForm.buId)" class="form-control">
                                                    <option value="0">Select BU</option>
                                                    <option *ngFor="let name of bulist" [ngValue]="name.managementStructureId">{{name.code}}</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <select style="border-radius:5px;" class="form-control" [(ngModel)]="receivingForm.divisionId" name="primaryDivision" (change)="getDepartmentlist(receivingForm.divisionId)">
                                                    <option value="0">Select Division</option>
                                                    <option *ngFor="let name of divisionlist" [ngValue]="name.managementStructureId">{{name.code}}</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <select style="border-radius:5px;" class="form-control" [(ngModel)]="receivingForm.departmentId" name="primaryDept" (change)="getDepartmentId(receivingForm.departmentId)">
                                                    <option value="0">Select Dept</option>
                                                    <option *ngFor="let name of departmentList" [ngValue]="name.managementStructureId">{{name.code}}</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="clear"></div>

                              </div>


                            <div class="form-group col-sm-12" *ngIf="this.receivingForm.isTimeLife">
                               

                                <div class="table-responsive form-group col-sm-12" *ngIf="this.receivingForm.isTimeLife">
                                    <table class="table table-bordered table-striped">
                                        <thead>
                                            <tr>
                                                <th colspan="15" class="text-center"><strong>TIME LIFE ADJUSTMENTS</strong></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <th></th>
                                                <th class="text-center">Cycles</th>
                                                <th class="text-center">Time</th>
                                                <th class="text-center">Last</th>
                                            </tr>
                                            <tr>
                                                <td>Remaining</td>
                                                <td class="clr2 text-center"><input type="number" class="w60 form-control" placeholder="hours" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceTimeLife.cyclesRemaining"></td>
                                                <td class="clr2 text-center"><input type="number" class="w60 form-control" placeholder="hours" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceTimeLife.timeRemaining"></td>
                                                <td></td>

                                            </tr>
                                            <tr>
                                                <td>Since New</td>
                                                <td class="clr2 text-center"><input type="number" class="w60 form-control" placeholder="hours" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceTimeLife.cyclesSinceNew"></td>
                                                <td class="clr2 text-center"><input type="number" class="w60 form-control" placeholder="hours" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceTimeLife.timeSinceNew"></td>
                                                <td class="clr2 text-center"><input type="number" class="w60 form-control" placeholder="hours" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceTimeLife.lastSinceNew"></td>

                                            </tr>
                                            <tr>
                                                <td>Since Ovh</td>
                                                <td class="clr2 text-center"><input type="number" class="w60 form-control" placeholder="hours" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceTimeLife.cyclesSinceOVH"></td>
                                                <td class="clr2 text-center"><input type="number" class="w60 form-control" placeholder="hours" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceTimeLife.timeSinceOVH"></td>
                                                <td class="clr2 text-center"><input type="number" class="w60 form-control" placeholder="hours" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceTimeLife.lastSinceOVH"></td>

                                            </tr>
                                            <tr>
                                                <td>Since Insp</td>
                                                <td class="clr2 text-center"><input type="number" class="w60 form-control" placeholder="hours" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceTimeLife.cyclesSinceInspection"></td>
                                                <td class="clr2 text-center"><input type="number" class="w60 form-control" placeholder="hours" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceTimeLife.timeSinceInspection"></td>
                                                <td class="clr2 text-center"><input type="number" class="w60 form-control" placeholder="hours" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceTimeLife.lastSinceInspection"></td>
                                            </tr>
                                            <tr>
                                                <td>Since Repair</td>
                                                <td class="clr2 text-center"><input type="number" class="w60 form-control" placeholder="hours" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceTimeLife.cyclesSinceRepair"></td>
                                                <td class="clr2 text-center"><input type="number" class="w60 form-control" placeholder="hours" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceTimeLife.timeSinceRepair"></td>
                                                <td></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                            </div>
                            <button class="btn btn-primary float-right" pButton type="button" (click)="saveCustomerwork()" [disabled]="!addcustomerwork.valid" label="Save" style="padding: 0 !important;"></button>

                            </div>
                        <div class="clearfix"></div>
                    </div>
                </form>
               
            </div>
        </div>
    </div>

 </div>

<p-dialog header="Alert" [(visible)]="display" [modal]="true" [dismissableMask]="true" maximizedLeft="140px" maximizedTop="140px"
          [width]="350" [minWidth]="200" [responsive]="true"
          [minY]="1050" [baseZIndex]="1100000">


    <h5 [ngStyle]="{'color':'red'}">
        Please Enter (*) Mandatory Fields
    </h5>
    <p-footer>
        <button type="button" pButton icon="pi pi-check" (click)="display=false" label="Close"></button>
    </p-footer>

</p-dialog> -->