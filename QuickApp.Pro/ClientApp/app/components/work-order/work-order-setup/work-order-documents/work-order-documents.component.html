

  
           <div>
            <p-table
              #documents
              class="rpo-table-cstm"
              [value]="documentsDestructuredData"
              [loading]="loader"
              [rows]="pageSize"
              [paginator]="true"
              [pageLinks]="3"
              [first]="0"
              [rowsPerPageOptions]="[10, 20,  50, 100]"
              [columns]="selectedColumns"
              selectionMode="multiple"
              [resizableColumns]="true"
              [reorderableColumns]="true"
              [scrollable]="true"
              (onPage)="pageIndexChange($event)"
              scrollHeight="450px"
            >
              <ng-template pTemplate="colgroup" let-columns>
                <colgroup>
                  <col *ngFor="let col of columns" style="width:auto" />
                </colgroup>
              </ng-template>
  
              <ng-template pTemplate="caption" >
                <div style="text-align: right;min-height: 30px;">
                  <p-multiSelect
                    [options]="documentsColumns"
                    [(ngModel)]="selectedColumns"
                    [ngModelOptions]="{ standalone: true }"
                    optionLabel="header"
                    selectedItemsLabel="{0} columns selected"
                    [style]="{ minWidth: '200px' }"
                    defaultLabel="Choose Columns"
                    style="float:left"
                  ></p-multiSelect>
                  <div
                    class="inner-addon right-addon w200 inline-block g-filter-search-cstm"
                  >
                    <i class="fa fa-search"></i>
                    <input
                      type="text"
                      pInputText
                      size="50"
                      class="form-control ui-autocomplete-input"
                      (input)="
                        documents.filterGlobal($event.target.value, 'contains')
                      "
                      placeholder=" Filter"
                      style="height: 28px !important;"
                    />
                  </div>
                  <button
                    type="button"
                    class="btn btn-primary"
                    pButton
                    icon="fa-download"
                    matTooltip="Download  Data"
                    matTooltipPosition="above"
                    iconPos="left"
                    label="Export  Data"
                    (click)="documents.exportCSV()"
                    style="padding: 5px 10px !important;"
                  ></button>
                  <button
                    type="button"
                    class="btn btn-primary"
                    pButton
                    icon="fa-download"
                    matTooltip="Download Selected Data"
                    matTooltipPosition="above"
                    iconPos="left"
                    label="Export Selected Data"
                    (click)="documents.exportCSV({ selectionOnly: true })"
                    style="padding: 5px 10px !important;"
                  ></button>
                </div>
              </ng-template>
  
              <ng-template pTemplate="header" let-columns>
                <tr>
                  <ng-container *ngFor="let col of columns">
                    <th
                      *ngIf="col.field !== 'fileName'"
                      pResizableColumn
                      pReorderableColumn
                      [pSortableColumn]="col.field"
                    >
                      {{ col.header }}
                      <p-sortIcon [field]="col.field"></p-sortIcon>
                    </th>
                    <th *ngIf="col.field == 'fileName'">
                      File Name
                    </th>
                  </ng-container>
                  <th>Actions</th>
                </tr>
                <tr>
                  <th
                    style="width:auto"
                    *ngFor="let col of columns"
                    [ngSwitch]="col.field"
                  >
                    <input
                      style="width:100%;"
                      pInputText
                      type="text"
                      (input)="
                        documents.filter(
                          $event.target.value,
                          col.field,
                          'contains'
                        )
                      "
                    />
                  </th>
                  <th></th>
                </tr>
              </ng-template>
  
              <ng-template pTemplate="body" let-rowData let-columns="columns">
                <tr
                  [pSelectableRow]="rowData"
                  [pSelectableRowDblClick]="rowData"
                  (dblclick)="docviewdblclick(rowData)"
                >
                  <ng-container *ngFor="let col of columns">
                    <td
                      *ngIf="col.field != 'fileName'"
                      class="ui-resizable-column"
                      pReorderableRowHandle
                    >
                      {{
                        col.field == 'fileCreatedDate'
                          ? (rowData[col.field] | date: 'MM/dd/yyyy')
                          : rowData[col.field] && col.field == 'fileUpdatedDate'
                          ? (rowData[col.field] | date: 'MM/dd/yyyy')
                          : rowData[col.field]
                      }}
                    </td>
                    <td *ngIf="col.field == 'fileName'">
                      <a class="filelink" (click)="downloadFileUpload(x)">
                        {{ rowData[col.field] }}</a
                      >
                    </td>
                  </ng-container>
  
                  <td class="text-center" >
                    <span>
                      <a
                        class="btn btn-info boxed-float-btn nobg"
                        data-toggle="modal"
                        data-target="#docView"
                        (click)="openDocument(rowData)"
                        matTooltip="View"
                      >
                        <i class="fa fa-eye"></i>
                      </a>
                    </span>
  
                    <button
                      class="btn-edit"
                      mat-icon-button
                      (click)="editCustomerDocument(rowData)"
                      matTooltip="Edit"
                      data-toggle="modal"
                      data-target="#documentDetails"
                    >
                      <mat-icon>edit</mat-icon>
                    </button>
  
                    <button
                      class="btn-delete"
                      mat-icon-button
                      matTooltip="Delete"
                      (click)="openDelete(deleteContent, rowData)"
                    >
                      <mat-icon color="warn">delete</mat-icon>
                    </button>
  
                    <button
                      class="btn-history"
                      mat-icon-button
                      matTooltip="History"
                
                    >
                      <mat-icon color="green">history</mat-icon>
                    </button>
                  </td>
                  <td class="text-center" >
                    <span>
                      <a
                        class="btn btn-info boxed-float-btn nobg"
                        data-toggle="modal"
                        data-target="#docView"
                        (click)="openDocument(view, rowData)"
                        matTooltip="View"
                      >
                        <i class="fa fa-eye"></i>
                      </a>
                    </span>
  
                    <button
                      class="btn-history"
                      mat-icon-button
                      matTooltip="History"
                      (click)="openHistory(contentAuditHist, rowData)"
                    >
                      <mat-icon color="green">history</mat-icon>
                    </button>
                  </td>
                </tr>
              </ng-template>
              <ng-template
                pTemplate="emptymessage"
                let-columns
                *ngIf="documentsDestructuredData.length == 0"
              >
                <tr>

                  <td
                    [attr.colspan]="10"
              
                    style="color: red; font-weight: bold; text-align: center"
                  >
                    No records found
                  </td>
                </tr>
              </ng-template>
              <ng-template pTemplate="summary" id="footer">
                <label id="footer" class="footer">No'of records:</label>
                <input
                  style="width: 5%;"
                  [(ngModel)]="documents._totalRecords" name="no'of records"
                  [disabled]="true"
                  pInputText
                  type="text"
                />
  
                &nbsp;&nbsp;
                <label id="footer" class="footer1">Pages Count:</label>
  
                <input
                  style="width: 5%;"
                  [ngModel]="getPageCount(documents._totalRecords, pageSize)" name="page count"
                  [disabled]="true"
                  pInputText
                  type="text"
                />
              </ng-template>
            </p-table>
          </div>
                  <!-- </div>
      </div>
    </div>
  </div> -->




  <div
  class="modal fade"
  id="documentDetails"
  role="dialog"
  data-backdrop="static"
>
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">
        <button
          type="button"
          class="close"
          (click)="closeMyModel('#documentDetails')"
        >
          &times;
        </button>
        <h4 class="modal-title">Add Document Details</h4>
      </div>
      <form #documentDetails="ngForm" class="form-horizontal">
        <div class="modal-body">
          <div class="form-row">
            <div class="col-md-6">
              <div class="form-group">
                <label>Name <span class="clr-red">*</span></label>
                <input
                  class="form-control"
                  type="text"
                  name="name"
                  [(ngModel)]="documentForm.name"
                  (ngModelChange)="enableSave()"
                  required
                />
              </div>
              <div class="form-group">
                <label>Description <span class="clr-red">*</span></label>
                <textarea
                  class="form-control"
                  name="description"
                  [(ngModel)]="documentForm.description"
                  (ngModelChange)="enableSave()"
                  required
                ></textarea>
              </div>
              <div class="form-group">
                  <label>Code <span class="clr-red">*</span></label>
                  <textarea
                    class="form-control"
                    name="code"
                    [(ngModel)]="documentForm.code"
                    (ngModelChange)="enableSave()"
                    required
                  ></textarea>
                </div>
              <div class="form-group">
                <label>Memo </label>
                <textarea
                  class="form-control"
                  name="memo"
                  [(ngModel)]="documentForm.memo"
                  (ngModelChange)="enableSave()"
                ></textarea>
              </div>
            </div>

            <div class="col-md-12">
              <div class="form-group">
                <label style="float: none;"
                  >Attachments <span class="clr-red">*</span></label
                >
                <p-fileUpload
                  #fileUploadInput
                  name="fileupload[]"
                  multiple="multiple"
                  [showCancelButton]="false"
                  [showUploadButton]="false"
                  customUpload="true"
                  (ngModelChange)="enableSave()"
                  (onSelect)="fileUpload($event)"
                  (onRemove)="removeFile($event)"
                ></p-fileUpload>
              </div> 
            </div>
            <div
              class="table-responsive table-overflow"
              *ngIf="sourceViewforDocumentList.length > 0"
            >
              <h4 class="panel-title" style="padding-left: 10px;">
                Attachment Details:
              </h4>
              <p-table
                class="table-responsive ptable-cus-pma"
                [paginator]="sourceViewforDocumentList.length > 0"
                [value]="sourceViewforDocumentList"
                [rows]="3"
                [columns]="sourceViewforDocumentListColumns"
              >
                <ng-template pTemplate="header" let-columns>
                  <tr>
                    <th *ngFor="let col of columns">
                      {{ col.header }}
                    </th>
                    <th>
                      Download
                    </th>
                  </tr>
                </ng-template>
                <ng-template
                  pTemplate="body"
                  let-rowData
                  let-columns="columns"
                  let-i="rowIndex"
                >
                  <tr>
                    <td *ngFor="let col of columns">
                      <ng-container *ngIf="col.field == 'fileName'">
                        {{ rowData[col.field] }}
                      </ng-container>
                    </td>
                    <td>
                      <a
                        (click)="downloadFileUpload(rowData)"
                        matTooltip="Download"
                        class="btn nobg btn-cstm"
                        ><span><i class="fa fa-download"></i></span
                      ></a>
                    </td>
                  </tr>
                </ng-template>
                <ng-template
                  pTemplate="emptymessage"
                  let-columns
                  *ngIf="sourceViewforDocumentList.length == 0"
                >
                  <tr>
                    <td
                      [attr.colspan]="2"
                      style="color: red; font-weight: bold; text-align: center"
                    >
                      No records found
                    </td>
                  </tr>
                </ng-template>
              </p-table>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button
            type="button"
            *ngIf="!isEditButton"
            class="btn btn-primary pull-right submit-btn"
            style="text-align:center"
            (click)="saveDocumentInformation()"
            [disabled]="!documentDetails.valid || disableSave"
          >
            Save
          </button>
          <button
            type="button"
            *ngIf="isEditButton"
            class="btn btn-primary pull-right submit-btn"
            style="text-align:center"
            (click)="saveDocumentInformation()"
            [disabled]="!documentDetails.valid || disableSave"
          >
            Update
          </button>
          <button
            type="button"
            class="btn btn-danger"
            (click)="
            closeMyModel('#documentDetails')
            "
          >
            Close
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
