<div class="card">
  <div class="col-sm-12 font-padding">
    <div class="col-sm-2">Customer Name: <span style="color:red">{{customerName}}</span></div>
    <div class="col-sm-3">Customer Code: <span style="color:red">{{customerCode}}</span></div>
  </div>
  <div class="col-md-12">
    <div class="col-md-12 ">
      <div class="shadow-Box">
        <div class="col-sm-12">
          <h4 class="float-left">Search Aircraft Information</h4>
          <h4 class="float-right">
            Add Inventory
            <a
              class="plusicon-cstm"
              href="#"
              data-toggle="modal"
              data-target="#addInventory"
              ><i class="fa fa-plus-circle fa-lg"></i
            ></a>
          </h4>
        </div>
        <div class="col-md-3">
          <div class="form-group ">
            <label class="fs12">Aircraft </label>
            <p-dropdown
              [options]="manufacturerData"
              name="searchAircraft"
              class="p-dropdown-custom "
              [(ngModel)]="selectAircraftManfacturer"
              (onChange)="getAircraftModelByManfacturerType($event.value)"
                      
            ></p-dropdown>
          </div>
        </div>
        <div class="col-md-3">
          <div class="form-group">
            <label class="fs12">
              Aircraft Model
            </label>
            <p-multiSelect
              [maxSelectedLabels]="2"
              [options]="search_AircraftModelList"
              [(ngModel)]="selectedAircraftModel"
              [ngModelOptions]="{ standalone: true }"
              class="pub-multi"
              (onChange)="getDashNumberByManfacturerandModel()"
              [selectionLimit]="30"
            ></p-multiSelect>
          </div>
        </div>
        <div class="col-md-3">
          <div class="form-group">
            <label class="fs12">DashNumber </label>
            <p-multiSelect
              [maxSelectedLabels]="2"
              [options]="search_AircraftDashNumberList"
              [(ngModel)]="selectedDashNumbers"
              [ngModelOptions]="{ standalone: true }"
              class="pub-multi"
              [selectionLimit]="30"
            ></p-multiSelect>
          </div>
        </div>
        <div class="col-md-2">
          <div class="form-group">
            <label class="fs12">Memo </label>
            <input type="text" style="height: 27px !important" pInputText [(ngModel)]="selectedmemo" />
          </div>
        </div>
        <div class="col-md-1 add-new-align">
          <div class="form-group">
            <button
              class="btn btn-primary mtop20"
              (click)="searchAircraftInformation()"
                     matTooltip="Search"
            >
              <i class="pi pi-search pi-search"></i>
            </button>
          </div>
        </div>
        <div class="clear"></div>
      </div>
    </div>
  </div>
</div>

<br />
<div class="card">
  <p-table
    [value]="aircraftListDataValues"
    [rows]="6"
    [columns]="colsaircraftLD"
    [scrollable]="true"
    [style]="{ width: '100%' }"
    [paginator]="true"
  >
    <ng-template pTemplate="header" let-columns>
      <tr>
        <th>Id</th>
        <th *ngFor="let col of columns">
          {{ col.header }}
        </th>
        <th>Action</th>
      </tr>
    </ng-template>
    <ng-template
      pTemplate="body"
      let-i="rowIndex"
      let-rowData
      let-columns="columns"
    >
      <tr  [pSelectableRow]="rowData"  [pSelectableRowDblClick]="rowData" (dblclick)="viewAircraftdbldisplay(rowData)" >
        <td>{{ i + 1 }}</td>
        <td *ngFor="let col of columns">
          {{ rowData[col.field] }}
        </td>
        <td>
            <span data-toggle="modal" data-target="#viewAircraft"> <a class="btn btn-info boxed-float-btn nobg" data-toggle="tooltip" (click)="openAircraftView(rowData)" title="View"><i class="fa fa-eye"></i></a> </span>

            <button class="btn-edit" mat-icon-button (click)="editAirCraft(rowData)" matTooltip="edit" data-toggle="modal" data-target="#editAirCraftDetails">
                <mat-icon>edit</mat-icon>
            </button>
            <button class="btn btn-danger nobg"
                    (click)="
              deleteAircraftMappedInventory(deleteContent,rowData)
            "
                    matTooltip="Delete">
                <i class="fa fa-trash"></i>
            </button>
            <button class="btn-history" mat-icon-button matTooltip="history" (click)="getCustomerAircraftHistory(contentAuditHist,rowData)">
                <mat-icon color="green">history</mat-icon>
            </button>
        </td>
      </tr>
    </ng-template>
  </p-table>
  <br />
  <div>
    <button
      type="button"
      class="btn btn-primary-cstm pull-right submit-btn"
      (click)="nextClick()"
    >
      Next
    </button>
    <button
      type="button"
      class="btn btn-primary-cstm pull-right submit-btn"
      (click)="backClick()"
    >
      Previous
    </button>
  </div>
</div>

<div id="addInventory" class="modal fade custom-popup" role="dialog" data-backdrop="static">
  <div class="modal-dialog modal-full">
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">Ã—</button>
        <h4 class="modal-title">Add Inventory</h4>
      </div>
      <div class="modal-body">
        <div class="form-row">
          <div class="col-md-3">
            <div class="form-group">
              <label class="popup-plusicon-cstm"
                >Aircraft Type
                <a
                  data-dismiss="modal"
                  [routerLink]="[
                    '/singlepages/singlepages/app-aircraft-manufacturer'
                  ]"
                  ><i class="fa fa-plus-circle fa-lg"></i></a
              ></label>
              <p-dropdown
                class="imstock-pddowm"
                [options]="manufacturerData"
                filter="true"
                [ngModelOptions]="{ standalone: true }"
                [(ngModel)]="add_SelectedAircraftId"
                (onChange)="getAircraftModelByManfacturer($event)"
                placeholder="Select Aircraft"
                [showClear]="true"
              ></p-dropdown>
            </div>
          </div>

          <div class="col-md-4">
            <div class="form-group">
              <label
                class="popup-plusicon-cstm"
                style="width: 150px !important"
              >
                Model
                <a
                  data-dismiss="modal"
                  [routerLink]="['/singlepages/singlepages/app-aircraft-model']"
                  ><i class="fa fa-plus-circle fa-lg"></i
                ></a>
                <input
                  type="checkbox"
                  name="unknownmodel"
                  [(ngModel)]="modelUnknown"
                  style="width: 20px !important;
                        margin-left: 7px; "
                  (change)="resetAircraftModelsorDashNumbers()"
                />
                Unknown
              </label>

              <p-multiSelect
                *ngIf="!modelUnknown"
                [maxSelectedLabels]="2"
                [disabled]="!add_SelectedAircraftId"
                class="imstock-pmselect"
                [options]="add_AircraftModelList"
                [(ngModel)]="add_SelectedModel"
                name="ModelsPopup"
                (onChange)="getDashNumberByTypeandModel($event)"
              ></p-multiSelect>
            </div>
          </div>
          <div class="col-md-3" *ngIf="!modelUnknown">
            <div class="form-group">
              <label
                class="popup-plusicon-cstm"
                style="width: 190px !important"
              >
                DashNumber
                <a
                  data-dismiss="modal"
                  [routerLink]="['/singlepages/singlepages/app-dashnumber']"
                  ><i class="fa fa-plus-circle fa-lg"></i
                ></a>
                <input
                  type="checkbox"
                  name="unknownDashNumber"
                  [(ngModel)]="dashNumberUnknown"
                  style="width: 20px !important;
                  margin-left: 7px; "
                  (change)="resetAircraftModelsorDashNumbers()"
                />
                Unknown
              </label>

              <p-multiSelect
                *ngIf="!modelUnknown && !dashNumberUnknown"
                [maxSelectedLabels]="2"
                [disabled]="!add_SelectedAircraftId"
                class="imstock-pmselect"
                [options]="add_AircraftDashNumberList"
                [(ngModel)]="add_SelectedDashNumber"
                name="dashNumbersPopup"
                (onChange)="selectedDashnumbervalue($event)"
              ></p-multiSelect>
            </div>
          </div>
          <div class="col-md-2">
            <button
              style="margin-top: 20px;"
              type="button"
              class="btn btn-primary-cstm"
              (click)="mapAircraftInventory()"
            >
              Add
            </button>
          </div>
        </div>

        <div class="card">
          <p-table
            class="p-table-padding"
            [value]="inventoryData"
            [rows]="6"
            [columns]="colaircraft"
            [scrollable]="true"
            [style]="{ width: '100%' }"
            [paginator]="true"
          >
            <ng-template pTemplate="header" let-columns>
              <tr>
                <th>Selected</th>
                <th *ngFor="let col of columns">
                  {{ col.header }}
                </th>
                <th>Inventory</th>
                <th>Memo</th>
              </tr>
            </ng-template>
            <ng-template
              pTemplate="body"
              let-i="rowIndex"
              let-rowData
              let-columns="columns"
            >
              <tr>
                <td>
                  <span class="checkbox-cstm">
                    <label>
                      <input type="checkbox" [(ngModel)]="rowData.IsChecked" />

                      <span class="cr"
                        ><i class="cr-icon pi pi-check"></i
                      ></span>
                    </label>
                  </span>
                </td>

                <td *ngFor="let col of columns">
                  {{ rowData[col.field] }}
                </td>
                <td>
                  <input
                    type="number"
                    class="form-control input-value"
                    [(ngModel)]="rowData.Inventory"
                    name="Inventory"
                  />
                </td>
                <td>
                  <input
                    type="text"
                    class="form-control input-value"
                    [(ngModel)]="rowData.Memo"
                    name="Memo"
                    [disabled]="!rowData.IsChecked"
                  />
                </td>
              </tr>
            </ng-template>
          </p-table>
        </div>
      </div>
      <div class="modal-footer">
        <button
          type="button"
          class="btn btn-primary-cstm"
          data-dismiss="modal"
          (click)="saveAircraft()"
        >
          Save
        </button>
        <button type="button" class="btn btn-danger-cstm" data-dismiss="modal">
          Close
        </button>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="editAirCraftDetails" role="dialog" data-backdrop="static">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Edit Inventory Details</h4>
                <div class="col-sm-12 font-padding">
                    <div class="col-sm-3">Aircraft: <span style="color:red">{{editAirCraftData.aircraftType}}</span></div>
                    <div class="col-sm-3">Model: <span style="color:red">{{editAirCraftData.aircraftModel}}</span></div>
                    <div class="col-sm-3">Dash Number: <span style="color:red">{{editAirCraftData.dashNumber}}</span></div>
                </div>

            </div>
            <form #ccForm="ngForm" #editAirCraftForm="ngForm" class="form-horizontal">
                <div class="modal-body">
                    <div class="form-row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="tag">Inventory <span class="clr-red">*</span></label>
                                <input type="text" class="form-control" [(ngModel)]="editAirCraftData.inventory" name="tag" required>

                            </div>
                            <div class="form-group">
                                <label>Memo</label>
                                <!--<input class="form-control" type="text" name="notes" [(ngModel)]="contactInformation.notes">-->
                                <textarea name="notes" [(ngModel)]="editAirCraftData.memo"  placeholder="Tool Bar"></textarea>
                            </div>

                        </div>
                      
                    </div>
                </div>
                <div class="modal-footer">
                     <button type="button"  class="btn btn-primary-cstm pull-right submit-btn" style="text-align:center" (click)="updateCustomerAircraft()"  data-dismiss="modal">Update</button>
                    <button type="button" class="btn btn-danger-cstm" data-dismiss="modal">Close</button>
                </div>
            </form>
        </div>

    </div>
</div>





<div id="viewAircraft" class="modal" data-backdrop="static">
    <div class="modal-dialog">
        <div class="modal-content">

            <!-- Modal Header -->
            <div class="modal-header">
                <h4 class="modal-title">Details of CustomerAircraft Information</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>

            <!-- Modal body -->
            <div class="modal-body" *ngIf="viewAircraftData">
                <div class="col-sm-12">
                    <p><span class="label"><b>Aircraft: </b></span><span class="value">{{viewAircraftData.aircraftType}}</span></p>

                    <p><span class="label"><b>Model: </b></span><span class="value">{{viewAircraftData.aircraftModel}}</span></p>
                    <p><span class="label"><b>Dash Numbers: </b></span><span class="value">{{viewAircraftData.dashNumber}}</span></p>
                    <p style="display:none"><span class="label"><b>Inventory: </b></span><span class="value">{{viewAircraftData.inventory}}</span></p>

                    <p><span class="label"><b>Memo: </b></span><span class="value">{{viewAircraftData.memo}}</span></p>

                  
                    <div class="clear"></div>
                </div>
            </div>

            <!-- Modal footer -->
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
            </div>

        </div>
    </div>
</div>
<ng-template #deleteContent let-c="close" let-d="dismiss" data-backdrop="static">
    <div class="modal-header">
        <h4 class="modal-title">Are You Sure Want to Delete?</h4>
        <button type="button" class="close" aria-label="Close" (click)="dismissModel()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <strong>
             Aircraft Name:
            <span class="new-label">{{selectedRowForDelete.aircraftType}}</span>
        </strong>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-success" (click)="deleteItemAndCloseModel()">Yes</button>
        <button type="button" class="btn btn-danger" (click)="dismissModel()">No</button>
    </div>
</ng-template>
<ng-template #contentAuditHist let-c="close" let-d="dismiss" style="width:auto" data-backdrop="static">
    <!--<div #contentAuditHist id="contentAuditHist" class="modal fade">-->
    <div class="modal-header">

        <h4 class="modal-title">History of Aircraft Info</h4>
        <button type="button" class="close" aria-label="Close" (click)="dismissModel()">
            <span aria-hidden="true">&times;</span>
        </button>


    </div>
    <div class="modal-body">

        <div class="table-responsive">
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>Aircraft Type</th>
                        <th>Aircraft Model</th>
                        <th>Dash Number</th>
                        <th>Inventory</th>
                        <th>Memo</th>
                        <th>Updated By</th>
                        <th>Last Updated Time</th>
                        <th>Created By</th>
                        <th>Created Time</th>

                    </tr>
                </thead>
                <!-- <tr *ngFor="let audit of billingauditHisory">
                    <td>{{audit.siteName}}</td>
                    <td>{{audit.updatedBy}}</td>
                    <td>{{audit.updatedDate}}</td>
                    <td>{{audit.createdBy}}</td>
                    <td>{{audit.createdDate}}</td>

                </tr> -->

            <tr *ngFor="let audit of aircraftauditHisory; let i = index;">
                <td [ngStyle]="{'color':  getColorCodeForHistory(i, 'aircraftType', audit.aircraftType)  ? 'black' : 'red'  }">{{audit.aircraftType}}</td>
                <td [ngStyle]="{'color':  getColorCodeForHistory(i, 'aircraftModel', audit.aircraftModel)  ? 'black' : 'red'  }">{{audit.aircraftModel}}</td>
                <td [ngStyle]="{'color':  getColorCodeForHistory(i, 'inventory', audit.inventory)  ? 'black' : 'red'  }">{{audit.inventory}}</td>
                <td [ngStyle]="{'color':  getColorCodeForHistory(i, 'dashNumber', audit.dashNumber)  ? 'black' : 'red'  }">{{audit.dashNumber}}</td>
                <td [ngStyle]="{'color':  getColorCodeForHistory(i, 'memo', audit.memo)  ? 'black' : 'red'  }">{{audit.memo}}</td>
                <td>{{audit.updatedBy}}</td>
                <td>{{audit.updatedDate | date: 'dd-MM-yyyy h:mm a '}}</td>
                <td>{{audit.createdBy}}</td>
                <td>{{audit.createdDate | date: 'dd-MM-yyyy h:mm a '}}</td>
            </tr>
            </table>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-danger" (click)="dismissModel()">Close</button>
    </div>
</ng-template>
