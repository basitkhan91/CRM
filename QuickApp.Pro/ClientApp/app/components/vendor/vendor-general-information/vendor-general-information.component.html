<div class="card">
	<form #generalForm="ngForm" method="post" id="" name="" class="form-horizontal add-custustomer">
		<div class="form-row">
			<div class="form-group">
				<div class="form-group col-sm-12 vendor-details-heading" *ngIf="showalert">
					<p class="fs10">
						Please Enter Mandatory Fields
					</p>
				</div>
			</div>
			<div class="col-md-12">

				<div class="card">
					<div class="card-header">
						<h5 class="po-head" style="padding: 0px 10px;">{{ viewName }} General Information</h5>
					</div>
					<div class="card-body">
						<div class="col-md-6">
							<label class="fs12">Vendor Name : </label>
							<span class="span-header-red">{{ sourceVendor?.vendorName }}</span>
						</div>
						<div class="col-md-6">
							<label class="fs12">Vendor Code : </label>
							<span class="span-header-red">{{ sourceVendor?.vendorCode }}</span>
						</div>

					</div>

				</div>
			</div>
		</div>
		<div class="col-md-12">
			<p-radioButton name="groupname" value="2" label="External" class="p-radiobutton-label-horizontal"
				[(ngModel)]="sourceVendor.vendorTypeId"></p-radioButton>
			<p-radioButton name="groupname" value="1" label="Internal" class="p-radiobutton-label-horizontal"
				[(ngModel)]="sourceVendor.vendorTypeId"></p-radioButton>
			<p-radioButton name="groupname" value="3" label="Affiliate" class="p-radiobutton-label-horizontal"
				[(ngModel)]="sourceVendor.vendorTypeId"></p-radioButton>
		</div>

		<div class="col-md-12">
			<div class="form-row">
				<div class="col-md-3">
					<div class="form-group">
						<label for="vendorname">Vendor Name
							<span class="clr-red">*</span>
						</label>
						<p-autoComplete (onSelect)="onVendorselected($event)" (onKeyUp)="eventHandler($event)"
							[(ngModel)]="sourceVendor.vendorName" [ngModelOptions]="{ standalone: true }"
							[suggestions]="vendorNames" (completeMethod)="filterVendorNames($event)" [size]="30"
							[minLength]="1" [dropdown]="true">
							<ng-template let-vendorName pTemplate="item">
								<div class="ui-helper-clearfix">{{ vendorName }}</div>
							</ng-template>
						</p-autoComplete>
						<div *ngIf="disableSaveVenderName" class="clr-red">
							Already Exists
						</div>
					</div>

					<div class="form-group">
						<label for="vendorname">Code
							<span class="clr-red">*</span>
						</label>
						<p-autoComplete (onSelect)="onVendorCodeselected($event)" (onKeyUp)="eventvendorHandler($event)"
							[(ngModel)]="sourceVendor.vendorCode" [ngModelOptions]="{ standalone: true }"
							[suggestions]="vendorCodes" (completeMethod)="filterVendorCodes($event)" [size]="30"
							[minLength]="1" [dropdown]="true">
							<ng-template let-vendorCode pTemplate="item">
								<div class="ui-helper-clearfix">{{ vendorCode }}</div>
							</ng-template>
						</p-autoComplete>
						<div *ngIf="disableSaveVenderCode" class="clr-red">
							Already Exists
						</div>
					</div>

					<div class="form-group ">
						<label for="customerref">d/b/a

						</label>

						<input type="text" class="form-control" [ngModelOptions]="{standalone: true}"
							[(ngModel)]="sourceVendor.doingBusinessAsName">
					</div>


					<div class="form-group">
						<div class="checkbox-cstm">
							<label>
								<input type="checkbox" id="cparent" [ngModelOptions]="{standalone: true}"
									[(ngModel)]="sourceVendor.parent">
								<span class="cr"><i class="cr-icon pi pi-check"></i></span>
								Parent
							</label>

						</div>
					</div>

					<div class="form-group" *ngIf="sourceVendor.parent">

						<p-autoComplete (onSelect)="onParentNameselected($event)" (onKeyUp)=parentEventHandler($event)
							[(ngModel)]="sourceVendor.vendorParentName" [ngModelOptions]="{standalone: true}"
							[suggestions]="vendorNames" (completeMethod)="filterVendorParentNames($event)" [size]="30"
							[minLength]="1" [dropdown]="true">
							<ng-template let-vendorParentName pTemplate="item">
								<div class="ui-helper-clearfix">{{vendorParentName}}</div>
							</ng-template>
						</p-autoComplete>

						<div *ngIf="disableSaveParentName" class="clr-red">Please Enter Valid Parent</div>
					</div>

					<div class="form-group">
						<label for="vendorname">Phone
							<span class="clr-red">*</span>
						</label>
						<input class="form-control" type="text" pKeyFilter="num" [ngModelOptions]="{standalone: true}"
							[(ngModel)]="sourceVendor.vendorPhone">
					</div>
					<div class="form-group">
						<label for="vendorname">Email
							<span class="clr-red">*</span>
						</label>
						<input class="form-control" type="text" [ngModelOptions]="{standalone: true}"
							[(ngModel)]="sourceVendor.vendorEmail">
					</div>
				</div>
				<div class="col-md-3">
					<div class="form-group">
						<label for="address1">Address Line 1
							<span class="clr-red">*</span>
						</label>
						<input class="form-control" type="text" id="vmaddress1" [ngModelOptions]="{standalone: true}"
							[(ngModel)]="sourceVendor.address1">

					</div>
					<div class="form-group">
						<label for="address2">Address Line 2

						</label>
						<input class="form-control" type="text" id="vmaddress2" [ngModelOptions]="{standalone: true}"
							[(ngModel)]="sourceVendor.address2">

					</div>

					<div class="form-group">
						<label for="address3">Address Line 3

						</label>
						<input class="form-control" type="text" id="vmaddress3" [ngModelOptions]="{standalone: true}"
							[(ngModel)]="sourceVendor.address3">

					</div>


					<div class="form-group">
						<label for="city">City
							<span class="clr-red">*</span>
						</label>
						<input class="form-control" type="text" id="vmcity" [ngModelOptions]="{standalone: true}"
							[(ngModel)]="sourceVendor.city">

					</div>
					<div class="form-group">Primary State/Province
						<label for="state">
							<span class="clr-red">*</span>
						</label>
						<input class="form-control" type="text" id="vmstate" [ngModelOptions]="{standalone: true}"
							[(ngModel)]="sourceVendor.stateOrProvince">

					</div>


					<div class="form-group">Postal
						<label for="postal">
							<span class="clr-red">*</span>
						</label>
						<input class="form-control" type="text" id="vmpostal" [ngModelOptions]="{standalone: true}"
							[(ngModel)]="sourceVendor.PostalCode">

					</div>

					<div class="form-group">
						<label for="vendorname">Country
							<span class="clr-red">*</span>
						</label>
						<p-autoComplete (onSelect)="onCountrieselected($event)" (onKeyUp)=eventCountryHandler($event)
							[(ngModel)]="sourceVendor.country" [ngModelOptions]="{standalone: true}"
							[suggestions]="countrycollection" (completeMethod)="filtercountry($event)" [size]="30"
							[minLength]="1" [dropdown]="true">
							<ng-template let-nice_name pTemplate="item">
								<div class="ui-helper-clearfix">{{nice_name}}</div>
							</ng-template>
						</p-autoComplete>
						<div *ngIf="disablesave" class="clr-red">Please Select From List</div>
					</div>
                     
							<button type="button" class="btn btn-primary-cstm map-check" style="margin-bottom: 10px" (click)="getlatlng(sourceVendor.address1+sourceVendor.address2)">Check Address</button>
					 
				</div>
				<div class="col-md-6">
					<div class="form-row">
						<div class="col-md-6">
							<div class="form-group">
								<label for="Vendor Classification">
									Vendor Classification <span class="clr-red">*</span>
									<span style="margin-left:3px;cursor:pointer;"><i class="fa fa-plus-circle fa-lg"
											data-toggle="modal" (click)="openClassification(contentEdit)"></i></span>

								</label>
								<select [ngModelOptions]="{standalone: true}"
									[(ngModel)]="sourceVendor.vendorClassificationId">
									<option *ngFor="let venclassName of allVendorClassInfo"
										[ngValue]="venclassName.vendorClassificationId">
										{{venclassName.classificationName}}</option>

								</select>
							</div>

							<div class="form-group">
								<label for="vendorname">Contract Ref


								</label>
								<input class="form-control" type="text" [ngModelOptions]="{standalone: true}"
									[(ngModel)]="sourceVendor.vendorContractReference" required>

							</div>

							<div class="form-group">
								<div class="checkbox-cstm">
									<label>
										<input class="" type="checkbox" id="" name=""
											[ngModelOptions]="{standalone: true}"
											[(ngModel)]="sourceVendor.isPreferredVendor" checked="">
										<span class="cr"><i class="cr-icon pi pi-check"></i></span>
										Preferred Vendor
									</label>

								</div>
							</div>


							<div class="form-group">
								<label for="vendorname">License


								</label>
								<input class="form-control" type="text" [ngModelOptions]="{standalone: true}"
									[(ngModel)]="sourceVendor.licenseNumber">

							</div>
							<div class="form-group">
								<label for="vendorname">URL to Vendor site


								</label>
								<input class="form-control" type="text" [ngModelOptions]="{standalone: true}"
									[(ngModel)]="sourceVendor.vendorURL">

							</div>


						</div>
					</div>
					<div class="form-row">
						<div class="col-md-12">

							<div class="form-group" style="width: 100%;">
								<div class="checkbox-cstm">
									<label>
										<input type="checkbox" [ngModelOptions]="{standalone: true}"
											[(ngModel)]="sourceVendor.isCertified" class="certified-checkbox">
										<span class="cr"><i class="cr-icon pi pi-check"></i></span>
										Certified
									</label>



								</div>
							</div>



							<div *ngIf="sourceVendor.isCertified" style="width: 97%">

								<div class="form-group">

									<p-fileUpload name="myfile[]" multiple="multiple" [showCancelButton]="false">
									</p-fileUpload>
								</div>


							</div>
							<div class="form-group" style="width: 100%;">
								<div class="checkbox-cstm">
									<label>
										<input type="checkbox" [ngModelOptions]="{standalone: true}"
											[(ngModel)]="sourceVendor.vendorAudit" class="audit-checkbox">
										<span class="cr"><i class="cr-icon pi pi-check"></i></span>
										Vendor Audit
									</label>



								</div>
							</div>



							<div *ngIf="sourceVendor.vendorAudit" style="width: 97%">

								<div class="form-group">

									<p-fileUpload name="myfile[]" multiple="multiple" [showCancelButton]="false">
									</p-fileUpload>
								</div>


							</div>

							<div class="form-group" style="width: 100%;">
								<div class="checkbox-cstm">
									<label>
										<input type="checkbox" class="" value="" id="" style="margin-top: 1px;"
											[ngModelOptions]="{standalone: true}"
											[(ngModel)]="sourceVendor.isVendorAlsoCustomer">
										<span class="cr"><i class="cr-icon pi pi-check"></i></span>
										Is this Vendor also a Customer?
									</label>



								</div>
							</div>


						</div>
					</div>
				</div>
			</div>
		</div>
	</form>

<div *ngIf="checkAddress">

		<p-gmap [options]="options" [overlays]="overlays" [style]="{'width':'100%','height':'320px'}" ></p-gmap>
</div>
	<div style="padding-bottom: 7px;">
		<button type="submit" [validate] moduleName="app-vendor-general-information" requirePermission="canAdd"
			class="btn btn-success-cstm pull-right submit-btn" *ngIf="sourceVendor.vendorId == undefined"
			[disabled]="disableSaveVenName || disableSaveVenCode || disableSaveParentName || disablesave"
			(click)="editItemAndCloseModel()">Save</button>

		<button type="submit" [validate] moduleName="app-vendor-general-information" requirePermission="canUpdate"
			class="btn btn-success-cstm pull-right submit-btn"
			*ngIf="sourceVendor.vendorId != undefined && sourceVendor.vendorId !=0"
			[disabled]="disableSaveVenName || disableSaveVenCode || disableSaveParentName || disablesave"
			(click)="editItemAndCloseModel()">Update</button>

		<button type="button" class="btn btn-success-cstm pull-right " (click)="nextClick()">
			Next
		</button>
	</div>
</div>



<ng-template #contentEdit let-c="close" let-d="dismiss" style="width:auto">
	<div class="modal-header">
		<h4 class="modal-title" *ngIf="isEditMode">Edit Vendor Classification</h4>
		<h4 class="modal-title" *ngIf="!isEditMode">Add Vendor Classification</h4>
		<button type="button" class="close" aria-label="Close" (click)="dismissModel()">
			<span aria-hidden="true">&times;</span>
		</button>
	</div>
	<div class="modal-body">
		<form #userForm="ngForm" class="form-horizontal" (ngSubmit)="saveVendorClassificationDetails()">
			<div class="form-group  input-icon1">
				<label for="classificationName" class="control-label">Classification Name<span
						class="clr-red">*</span></label>
				<div class="col-sm-7">
					<div class="inner-addon right-addon inline-block">
						<p-autoComplete (onSelect)="onClassificationelected($event)"
							(onKeyUp)="eventClassificationHandler($event)" [(ngModel)]="vendorClassName"
							[ngModelOptions]="{ standalone: true }" [suggestions]="vendorCollection"
							(completeMethod)="filterVendors($event)" [size]="30" [minLength]="1" [dropdown]="true">
							<ng-template let-vendorName pTemplate="item">
								<div class="ui-helper-clearfix">{{ vendorName }}</div>
							</ng-template>
						</p-autoComplete>
						<div *ngIf="disablesaveForClassification" style="color:red">
							Already Exist
						</div>
						<div class="clear"></div>
					</div>
				</div>
			</div>
			<div class="clear"></div>
			<div class="form-group">
				<label for="description" class="control-label">Memo</label>
				<div class="inner-addon col-sm-7 right-addon inline-block">
					<input placeholder="Memo" #memo="ngModel" type="text" id="memo"
						[ngModelOptions]="{ standalone: true }" [(ngModel)]="sourceAction.memo" minlength="2" />
				</div>
				<div class="clear"></div>
			</div>
			<div class="form-group">
				<div class="col-sm-6">
					<label class="form-check-label" for="isActive">
						<input type="checkbox" name="isActive" #isActive="ngModel" class="form-check-input" checked
							id="isActive" [(ngModel)]="sourceAction.isActive" />
						Active
					</label>
				</div>
				<div class="clear"></div>
			</div>
			<div class="modal-footer">
				<button class="btn btn-success" [disabled]="disablesaveForClassification">
					Submit
				</button>
				<button type="button" class="btn btn-danger" (click)="dismissModel()">
					Close
				</button>
			</div>
		</form>
	</div>
</ng-template>

<p-dialog header="Alert" [(visible)]="display" [modal]="true" [dismissableMask]="true" maximizedLeft="140px"
	maximizedTop="140px" [width]="350" [minWidth]="200" [responsive]="true" [minY]="1050" [baseZIndex]="1100000">
	<h5 [ngStyle]="{ color: 'red' }">
		Please Enter (*) Mandatory Fields
	</h5>
</p-dialog>