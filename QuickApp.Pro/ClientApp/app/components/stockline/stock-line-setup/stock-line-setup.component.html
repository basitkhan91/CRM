﻿<div class="card">
    <div class="card-body">

        <div class="x_content">

            <h4 class="page-heading clr-green">Stock Line Setup</h4>
            <div class="clear"></div>

            <form action="#" method="post" id="" name="" class="form-horizontal ro-grid-form mtop10">
                <div class="col-sm-6">
                    <div class="col-sm-9">
                        <div class="col-sm-6 w400">
                            <label class="form-group control-label col-sm-4" style="margin-left: 40%;"><span style="font-size:11px">Management Structure </span> </label>
                            <br>
                            <label class="form-group control-label col-sm-4" style="margin-left: 10%">Entity<span style="color:red">*</span></label>

                            <div class="form-group col-sm-12">
                                <label class="form-group control-label col-sm-4"></label>
                                <div class="col-sm-7">
                                    <select [formControl]="stocklineCreationForm.controls['companyId']" (change)="getBUList($event.target.value)" required>
                                        <option value="0">Select Legal Entity</option>
                                        <option *ngFor="let managementStructure of maincompanylist" [ngValue]="managementStructure.managementStructureId">{{managementStructure.name}}</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group col-sm-12">
                                <label class="form-group control-label col-sm-4"></label>
                                <div class="col-sm-7">
                                    <select [formControl]="stocklineCreationForm.controls['BusinessUnitId']" (change)="getDepartmentlist($event.target.value)">
                                        <option value="0">Select BU</option>
                                        <option *ngFor="let managementStructure of bulist" [ngValue]="managementStructure.managementStructureId">{{managementStructure.name}}</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group col-sm-12">
                                <label class="form-group control-label col-sm-4"></label>
                                <div class="col-sm-7">
                                    <select [formControl]="stocklineCreationForm.controls['divisionId']" (change)="getDivisionlist($event.target.value)">
                                        <option value="0">Select Div</option>
                                        <option *ngFor="let managementStructure of departmentList " [ngValue]="managementStructure.managementStructureId">{{managementStructure.name}}</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group col-sm-12">
                                <label class="form-group control-label col-sm-4"></label>
                                <div class="col-sm-7">
                                    <select [formControl]="stocklineCreationForm.controls['departmentId']" (change)="divisionChange(sourceStockLineSetup.divisionId)">
                                        <option value="0">Select Dept</option>
                                        <option *ngFor="let managementStructure of divisionlist " [ngValue]="managementStructure.managementStructureId">{{managementStructure.name}}</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="inner-addon col-sm-4">PN <strong class="clr-red">*</strong></label>
                            <div class="inner-addon col-sm-7  display-flex">
                                <p-autoComplete [(ngModel)]="sourceStockLineSetup.partNumber" (onKeyUp)=eventHandler($event) (onSelect)="partnmId($event)" [ngModelOptions]="{standalone: true}" [suggestions]="partCollection" (completeMethod)="filterpartItems($event)" [size]="30"
                                                [minLength]="1" [dropdown]="true">
                                    <ng-template let-partName pTemplate="part">
                                        <div class="ui-helper-clearfix">{{partName}}</div>
                                    </ng-template>
                                </p-autoComplete>
                                <a routerLink="/itemmastersmodule/itemmasterpages/app-item-master-stock" class="add-icon"><i class="fa fa-plus"></i></a>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">PN DESCRIPTION</label>
                            <div class="col-sm-7">
                                <input [disabled]="true" class="form-control" type="text" id="" name="" autocomplete="off" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.partDescription">
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">STOCK LINE NUM</label>
                            <div class="col-sm-7">
                                <input class="form-control" [disabled]=true type="text" id="" value="Generating">
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">CONTROL NUM</label>
                            <div class="col-sm-7">
                                <input class="form-control" [disabled]=true type="text" id="" value="Generating">
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">ID NUMBER</label>
                            <div class="col-sm-7">
                                <input class="form-control" [disabled]=true type="text" id="" value="Generating">
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">IS SERIALIZED</label>
                            <div class="col-sm-7">
                                <input class="form-control is-serialized-checkbox" [disabled]="true" type="checkbox" [ngModelOptions]="{standalone: true}" (change)="triggerSomeEvent()" [(ngModel)]="sourceStockLineSetup.isSerialized">
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">QTY ON HAND <strong class="clr-red">*</strong></label>
                            <div class="col-sm-7">
                                <input class="form-control qty-input" *ngIf="showRestrictQuantity" type="number" maxlength="1" min="0" max="1" (change)="calculateQtyAvailable($event)" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.QuantityOnHand">
                                <input class="form-control qty-input" *ngIf="showFreeQuantity" (keypress)="calculateQtyAvailable($event)" type="number" min="0" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.QuantityOnHand">
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">QTY RESERVED </label>
                            <div class="col-sm-7">
                                <input class="form-control qty-input" type="number" [ngModelOptions]="{standalone: true}" (change)="calculateQtyAvailable($event)" [(ngModel)]="sourceStockLineSetup.QuantityReserved">
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">QTY ISSUED </label>
                            <div class="col-sm-7">
                                <input class="form-control qty-input" type="number" [ngModelOptions]="{standalone: true}" (change)="calculateQtyAvailable($event)" [(ngModel)]="sourceStockLineSetup.QuantityIssued">
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">QTY AVAILABLE </label>
                            <div class="col-sm-7">
                                <input class="form-control qty-input" disabled="disabled" type="number" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.quantityAvailable">
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">COND TYPE <strong class="clr-red">*</strong></label>
                            <div class="col-sm-7">
                                <select class="form-control" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.conditionId">
                                    <option *ngFor="let condition of allConditionInfo" [ngValue]="condition.conditionId">{{condition.description}}</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group col-sm-12 is-serialized-content" *ngIf="hideSerialNumber">
                            <label class="control-label col-sm-4">SERIAL NUM <strong class="clr-red">*</strong></label>
                            <div class="col-sm-7">
                                <input class="form-control" type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.serialNumber">
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">SHELF LIFE</label>
                            <div class="col-sm-7">
                                <input class="form-control" type="checkbox" [disabled]="true" [ngModelOptions]="{standalone: true}" (change)="triggerSomeEvent()" [(ngModel)]="sourceStockLineSetup.shelfLife">
                            </div>
                        </div>

                        <div class="form-group col-sm-12" *ngIf="sourceStockLineSetup.shelfLife == 1">
                            <label class="control-label col-sm-4">SHELF LIFE EXP DATE</label>
                            <div class="col-sm-7">
                                <p-calendar [showIcon]="true" [ngModelOptions]="{standalone: true}" [minDate]="minDateValue" [(ngModel)]="sourceStockLineSetup.shelfLifeExpirationDate"></p-calendar>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">SITE <strong class="clr-red">*</strong></label>
                            <div class="col-sm-7">
                                <select [(ngModel)]="sourceStockLineSetup.siteId" [ngModelOptions]="{standalone: true}" (change)="siteValueChange($event.target.value)">
                                    <option *ngFor="let site of allSites" [ngValue]="site.siteId">{{site.name}}</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">WAREHOUSE</label>
                            <div class="col-sm-7">
                                <select [(ngModel)]="sourceStockLineSetup.warehouseId" [ngModelOptions]="{standalone: true}" (change)="wareHouseValueChange(sourceStockLineSetup.warehouseId)">
                                    <option *ngFor="let site of allWareHouses" [ngValue]="site.warehouseId">{{site.warehouseName}}</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">LOCATION</label>
                            <div class="col-sm-7">
                                <select [(ngModel)]="sourceStockLineSetup.locationId" [ngModelOptions]="{standalone: true}" (change)="locationValueChange(sourceStockLineSetup.locationId)">
                                    <option *ngFor="let site of allLocations" [ngValue]="site.locationId">{{site.name}}</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">SHELF</label>
                            <div class="col-sm-7">
                                <select [(ngModel)]="sourceStockLineSetup.shelfId" [ngModelOptions]="{standalone: true}" (change)="shelfValueChange(sourceStockLineSetup.shelfId)">
                                    <option *ngFor="let site of allShelfs" [ngValue]="site.shelfId">{{site.name}}</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">BIN</label>
                            <div class="col-sm-7">
                                <select [(ngModel)]="sourceStockLineSetup.binId" [ngModelOptions]="{standalone: true}" (change)="binValueSelect(sourceStockLineSetup.binId)">
                                    <option *ngFor="let site of allBins" [ngValue]="site.binId">{{site.name}}</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">OBTAIN FROM</label>
                            <div class="col-sm-7">
                                <select [(ngModel)]="sourceStockLineSetup.obtainFromType" [ngModelOptions]="{standalone: true}" class="form-control">
                                    <option value="1">Customer</option>
                                    <option value="2">Other </option>
                                    <option value="3">Vendor</option>
                                </select>
                            </div>

                            <label class="control-label col-sm-4"></label>
                            <div class="inner-addon col-sm-7 inline-block display-flex" *ngIf="sourceStockLineSetup.obtainFromType == 1">
                                <select [(ngModel)]="sourceStockLineSetup.obtainFrom" [ngModelOptions]="{standalone: true}">
                                    <option *ngFor="let customer of allCustomer" [ngValue]="customer.name">{{customer.name}}</option>
                                </select>
                                <a routerLink="/customersmodule/customerpages/app-customer-create" class="add-icon"><i class="fa fa-plus"></i></a>
                            </div>
                            <div class="col-sm-7" *ngIf="sourceStockLineSetup.obtainFromType == 2">
                                <input class="form-control" type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.obtainFrom">
                            </div>
                            <div class="inner-addon col-sm-7 inline-block display-flex" *ngIf="sourceStockLineSetup.obtainFromType == 3">
                                <select [(ngModel)]="sourceStockLineSetup.obtainFrom" [ngModelOptions]="{standalone: true}">
                                    <option *ngFor="let vendor of allVendorList" [ngValue]="vendor.vendorName">{{vendor.vendorName}}</option><!--(onchange)="siteValueChange(site.siteName)"-->
                                </select>
                                <a routerLink="/vendorsmodule/vendorpages/app-vendor-setup" class="add-icon"><i class="fa fa-plus"></i></a>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4" for="obtainFrom">OWNER</label>
                            <div class="col-sm-7">
                                <select id="obtainFrom" [(ngModel)]="sourceStockLineSetup.ownerType" [ngModelOptions]="{standalone: true}" class="form-control">

                                    <option value="1">Customer</option>
                                    <option value="2">Other </option>
                                    <option value="3">Vendor</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group col-sm-12" *ngIf="sourceStockLineSetup.ownerType == 1">
                            <label class="control-label col-sm-4"></label>
                            <div class="inner-addon col-sm-7 inline-block display-flex">
                                <select [(ngModel)]="sourceStockLineSetup.owner" [ngModelOptions]="{standalone: true}">
                                    <option *ngFor="let customer of allCustomer" [ngValue]="customer.name">{{customer.name}}</option>
                                </select>
                                <a routerLink="/customersmodule/customerpages/app-customer-create" class="add-icon"><i class="fa fa-plus"></i></a>
                            </div>
                        </div>

                        <div class="form-group col-sm-12" *ngIf="sourceStockLineSetup.ownerType== 2">
                            <label class="control-label col-sm-4"></label>
                            <div class="col-sm-7">
                                <input class="form-control" type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.owner">
                            </div>
                        </div>

                        <div class="form-group col-sm-12" *ngIf="sourceStockLineSetup.ownerType == 3">
                            <label class="control-label col-sm-4"></label>
                            <div class="inner-addon col-sm-7 inline-block display-flex">
                                <select [(ngModel)]="sourceStockLineSetup.owner" [ngModelOptions]="{standalone: true}">
                                    <option *ngFor="let vendor of allVendorList" [ngValue]="vendor.vendorName">{{vendor.vendorName}}</option><!--(onchange)="siteValueChange(site.siteName)"-->
                                </select>
                                <a routerLink="/vendorsmodule/vendorpages/app-vendor-setup" class="add-icon"><i class="fa fa-plus"></i></a>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4" for="obtainFrom">TRACABLE TO</label>
                            <div class="col-sm-7">
                                <select id="obtainFrom" [(ngModel)]="sourceStockLineSetup.traceableToType" [ngModelOptions]="{standalone: true}" class="form-control">
                                    <option [value]="1">Customer</option>
                                    <option [value]="2">Other </option>
                                    <option [value]="3">Vendor</option>
                                </select>
                            </div>
                            <div class="form-group col-sm-12">
                                <label class="control-label col-sm-4"></label>
                                <div class="inner-addon col-sm-7 inline-block display-flex" *ngIf="sourceStockLineSetup.traceableToType == 1">
                                    <select [(ngModel)]="sourceStockLineSetup.traceableTo" [ngModelOptions]="{standalone: true}">
                                        <option *ngFor="let customer of allCustomer" [ngValue]="customer.name">{{customer.name}}</option>
                                    </select>
                                    <a routerLink="/customersmodule/customerpages/app-customer-create" class="add-icon"><i class="fa fa-plus"></i></a>
                                </div>
                            </div>
                            <div class="form-group col-sm-12">
                                <label class="control-label col-sm-4"></label>
                                <div class="col-sm-7" *ngIf="sourceStockLineSetup.traceableToType == 2">
                                    <input class="form-control" type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.traceableTo">
                                </div>
                            </div>
                            <div class="form-group col-sm-12">
                                <label class="control-label col-sm-4"></label>
                                <div class="inner-addon col-sm-7 inline-block display-flex" *ngIf="sourceStockLineSetup.traceableToType == 3">
                                    <select [(ngModel)]="sourceStockLineSetup.traceableTo" [ngModelOptions]="{standalone: true}">
                                        <option *ngFor="let vendor of allVendorList" [ngValue]="vendor.vendorName">{{vendor.vendorName}}</option><!--(onchange)="siteValueChange(site.siteName)"-->
                                    </select>
                                    <a routerLink="/vendorsmodule/vendorpages/app-vendor-setup" class="add-icon"><i class="fa fa-plus"></i></a>
                                </div>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">MFG</label>
                            <div class="col-sm-7">
                                <select [(ngModel)]="sourceStockLineSetup.manufacturerId" [ngModelOptions]="{standalone: true}">
                                    <option *ngFor="let manufacturer of allManufacturerInfo" [ngValue]="manufacturer.manufacturerId">{{manufacturer.name}}</option><!--(onchange)="siteValueChange(site.siteName)"-->
                                </select>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">MFG LOT NUM</label>
                            <div class="col-sm-7">
                                <input class="form-control" type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.manufacturerLotNumber">
                            </div>
                        </div>

                        <div class="form-group col-sm-12" *ngIf="sourceStockLineSetup.IsManufacturingDateAvailable == 1">
                            <label class="control-label col-sm-4">MFG DATE</label>
                            <div class="col-sm-7">
                                <p-calendar [showIcon]="true" [maxDate]="minDateValue" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.manufacturingDate"></p-calendar>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">MFG BATCH NUM</label>
                            <div class="col-sm-7">
                                <input class="form-control" type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.manufacturingBatchNumber">
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">ESN</label>
                            <div class="col-sm-7">
                                <input class="form-control" type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.EngineSerialNumber">
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">ECCN</label>
                            <div class="col-sm-7">
                                <input class="form-control" type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.eccn">
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">ITAR NUM</label>
                            <div class="col-sm-7">
                                <input class="form-control" type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.ITARNumber">
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">NHA</label>
                            <div class="col-sm-7">
                                <input class="form-control" type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.NHA">
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">TLA</label>
                            <div class="col-sm-7">
                                <input class="form-control" type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.tla">
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">NSN</label>
                            <div class="col-sm-7">
                                <input class="form-control" type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.msn">
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">AIRCRAFT TAIL NUM</label>
                            <div class="col-sm-7">
                                <input class="form-control" type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.aircraftTailNumber">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-sm-6">
                    <div class="col-sm-9">

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">PART CERT NUM</label>
                            <div class="col-sm-7">
                                <input class="form-control" type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.partCertificationNumber">
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">CERTIFY BY</label>
                            <div class="inner-addon col-sm-7 display-flex">
                                <select [(ngModel)]="sourceStockLineSetup.certifiedBy" [ngModelOptions]="{standalone: true}">
                                    <option *ngFor="let employee of allEmployeeList" [ngValue]="employee.firstName">{{employee.firstName}}{{ employee.lastName}}</option>
                                </select>
                                <a routerLink="/employeesmodule/employeepages/app-employee-general-information" class="add-icon"><i class="fa fa-plus"></i></a>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">CERTIFIED DATE</label>
                            <div class="col-sm-7">
                                <p-calendar [showIcon]="true" [ngModelOptions]="{standalone: true}" [minDate]="minDateValue" [(ngModel)]="sourceStockLineSetup.certifiedDate"></p-calendar>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">TAG DATE</label>
                            <div class="col-sm-7">
                                <p-calendar [showIcon]="true" [ngModelOptions]="{standalone: true}" [minDate]="minDateValue" [(ngModel)]="sourceStockLineSetup.tagDate"></p-calendar>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">TAG TYPE</label>
                            <div class="col-sm-7">
                                <input class="form-control" type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.tagType">
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">CERTIFIED DUE DATE</label>
                            <div class="col-sm-7">
                                <p-calendar [showIcon]="true" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.certifiedDueDate"></p-calendar>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">ORDER DATE</label>
                            <div class="col-sm-7">
                                <input [disabled]="true" class="form-control" type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.orderDate">
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">OPEN DATE</label>
                            <div class="col-sm-7">
                                <input [disabled]="true" class="form-control" type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.openDate">
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">DAYS SINCE RECIEVED</label>
                            <div class="col-sm-7">
                                <input [disabled]="true" class="form-control" type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.daysReceived">
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">DAYS SINCE MFG</label>
                            <div class="col-sm-7">
                                <input [disabled]="true" class="form-control" type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.manufacturingDays">
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">DAYS SINCE TAGGED</label>
                            <div class="col-sm-7">
                                <input [disabled]="true" class="form-control" type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.tagDays">
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">DAYS SINCE OPEN</label>
                            <div class="col-sm-7">
                                <input [disabled]="true" class="form-control" type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.openDays">
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">BLACKLISTED</label>
                            <div class="col-sm-7">
                                <input class="form-control" type="checkbox" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.blackListed">
                            </div>
                        </div>

                        <label class="control-label col-sm-4"></label>
                        <div class="inner-addon col-sm-7 display-flex" *ngIf="sourceStockLineSetup.blackListed == 1">
                            <div class="col-sm-7">
                                <textarea style="height: 100px;" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.blackListedReason"></textarea>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">INCIDENT</label>
                            <div class="col-sm-7">
                                <input class="form-control" type="checkbox" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.incident">
                            </div>
                        </div>

                        <label class="control-label col-sm-4"></label>
                        <div class="inner-addon col-sm-7  display-flex" *ngIf="sourceStockLineSetup.incident == 1">
                            <div class="col-sm-7">
                                <textarea style="height: 100px;" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.incidentReason"></textarea>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">ACCIDENT</label>
                            <div class="col-sm-7">
                                <input class="form-control" type="checkbox" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.accident">
                            </div>
                        </div>

                        <label class="control-label col-sm-4"></label>
                        <div class="inner-addon col-sm-7 display-flex" *ngIf="sourceStockLineSetup.accident == 1">
                            <div class="col-sm-7">
                                <textarea style="height: 100px;" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.accidentReason"></textarea>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">PO NUM </label>
                            <div class="col-sm-7">
                                <select [(ngModel)]="sourceStockLineSetup.PurchaseOrderId" [ngModelOptions]="{standalone: true}" (change)="POValueChange(sourceStockLineSetup.PurchaseOrderId)">
                                    <option *ngFor="let po of allPolistInfo" [ngValue]="po.purchaseOrderId">{{po.purchaseOrderNumber}}</option>
                                </select>
                            </div>
                        </div>

                        <!--<select [(ngModel)]="sourceStockLineSetup.companyId" [ngModelOptions]="{standalone: true}" (change)="getBUList(sourceStockLineSetup.companyId)">
                            <option *ngFor="let managementStructure of maincompanylist" [ngValue]="managementStructure.managementStructureId">{{managementStructure.name}}</option>
                        </select>-->

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">PO UNIT COST</label>
                            <div class="col-sm-7">
                                <input class="form-control" [disabled]="true" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.purchaseOrderUnitCost">
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">RO NUM </label>
                            <div class="col-sm-7">
                                <select [(ngModel)]="sourceStockLineSetup.RepairOrderId" [ngModelOptions]="{standalone: true}" (change)="ROValueChange(sourceStockLineSetup.RepairOrderId)">
                                    <option *ngFor="let manufacturer of allRolistInfo" [ngValue]="manufacturer.repairOrderId">{{manufacturer.repairOrderNumber}}
                                </select>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">RO UNIT COST</label>
                            <div class="col-sm-7">
                                <input class="form-control" type="text" [disabled]="true" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.repairOrderUnitCost">
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">RECEIVED DATE <strong class="clr-red">*</strong></label>
                            <div class="col-sm-7">
                                <p-calendar [showIcon]="true" [ngModelOptions]="{standalone: true}" [minDate]="sourceStockLineSetup.orderDate" [(ngModel)]="sourceStockLineSetup.receivedDate"></p-calendar>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">RECEIVER NUM <strong class="clr-red">*</strong></label>
                            <div class="col-sm-7">
                                <input class="form-control" type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.receiverNumber">
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">RECONCILIATION NUM</label>
                            <div class="col-sm-7">
                                <input class="form-control" type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.reconciliationNumber">
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">UNIT SALE PRICE</label>
                            <div class="col-sm-7">
                                <input class="form-control" type="number" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.unitSalesPrice">
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">CORE UNIT COST</label>
                            <div class="col-sm-7">
                                <input class="form-control" type="number" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.coreUnitCost">
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">LOT COST</label>
                            <div class="col-sm-7">
                                <input class="form-control" type="text" [disabled]="true">
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">GL ACCOUNT <strong class="clr-red">*</strong></label>
                            <div class="inner-addon col-sm-7">
                                <p-autoComplete [disabled]=true [(ngModel)]="sourceStockLineSetup.glAccountName" (onKeyUp)=glAccountHandler($event) (onSelect)="glAccountId($event)" [ngModelOptions]="{standalone: true}" [suggestions]="glAccountCollection" (completeMethod)="filterglAccount($event)" [size]="30"
                                                [minLength]="1" [dropdown]="true">
                                    <ng-template let-glAccountId pTemplate="glAccount">
                                        <div class="ui-helper-clearfix">{{sourceStockLineSetup.glAccountName}}</div>
                                    </ng-template>
                                </p-autoComplete>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">PMA</label>
                            <div class="col-sm-7">
                                <input class="form-control" type="checkbox" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.isPMA">
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">DER</label>
                            <div class="col-sm-7">
                                <input class="form-control" type="checkbox" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.isDER">
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">OEM</label>
                            <div class="col-sm-7">
                                <input class="form-control" type="checkbox" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.oem">
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <div class="form-group col-sm-12 input-icon1">
                                <div class="inner-addon right-addon autosuggesions-add inline-block">
                                </div>

                                <div class="table-responsive">
                                    <table class="table table-bordered table-striped table-sorting">
                                        <thead>
                                            <tr align="center">
                                                <th>SERVICES</th>
                                                <th>LISTED</th>
                                                <th>INTEGRATE WITH</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let col of allIntegrationInfo; let i = index;">

                                                <td>{{col.description}}</td>
                                                <td>
                                                    <input type="checkbox" class=" wauto" [(ngModel)]="col.listedCheckbox" [ngModelOptions]="{standalone: true}" (click)="getSelectedItem(col,i)">
                                                </td>
                                                <td>
                                                    <input type="checkbox" class=" wauto" [(ngModel)]="col.integratedCheckbox" [ngModelOptions]="{standalone: true}" (click)="saveSelectedModel(col,$event)">
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-4">Memo</label>
                            <div class="col-sm-7">
                                <textarea style="height: 100px;" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceStockLineSetup.memo">Memo</textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-sm-12">

                    <!--<label class="control-label col-sm-1">Time Life</label>-->

                    <div class="form-group col-sm-12" *ngIf="this.sourceTimeLife.timeLife||this.sourceTimeLife.timeLifeCyclesId">
                        <div class="col-sm-12">
                            <div class="table-responsive">
                                <table class="table table-bordered table-striped timelife-table">
                                    <thead>
                                        <tr>
                                            <th colspan="15" class="text-center"><strong>TIME LIFE ADJUSTMENTS</strong></th>
                                        </tr>
                                    </thead>
                                    <tbody class="text-center">
                                        <tr>

                                            <td>&nbsp;</td>
                                            <td colspan="4" class="text-center clr1"><strong>CYCLES</strong></td>
                                            <td colspan="4" class="text-center clr2"><strong>TIMES</strong></td>
                                            <td colspan="4" class="text-center clr3"><strong>LAST</strong></td>
                                        </tr>
                                        <tr>

                                            <td>Control Num</td>
                                            <td class="clr1">Since New</td>
                                            <td class="clr1">Since OVH</td>
                                            <td class="clr1">Since Insp</td>
                                            <td class="clr1">Since Repair</td>
                                            <td class="clr2">Since New</td>
                                            <td class="clr2">Since OVH</td>
                                            <td class="clr2">Since Insp</td>
                                            <td class="clr2">Since Repair</td>
                                            <td class="clr3">Since New</td>
                                            <td class="clr3">Since OVH</td>
                                            <td class="clr3">Since Insp</td>
                                        </tr>
                                        <tr>
                                            <!--<td><input type="checkbox" class="form-control" [ngModelOptions]="{standalone: true}" [(ngModel)]="timeLifeEditAllow" (change)="isTimeLifeEdit(timeLifeEditAllow)"></td>-->
                                            <td>{{sourceStockLineSetup.controlNumber}}</td>
                                            <td class="clr1"><input type="number" class="w60 form-control" placeholder="hours" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceTimeLife.cyclesSinceNew"></td>
                                            <td class="clr1"><input type="number" class="w60 form-control" placeholder="hours" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceTimeLife.cyclesSinceOVH"></td>
                                            <td class="clr1"><input type="number" class="w60 form-control" placeholder="hours" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceTimeLife.cyclesSinceRepair"></td>
                                            <td class="clr1"><input type="number" class="w60 form-control" placeholder="hours" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceTimeLife.cyclesSinceInspection"></td>
                                            <td class="clr2"><input type="number" class="w60 form-control" placeholder="hours" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceTimeLife.timeSinceNew"></td>
                                            <td class="clr2"><input type="number" class="w60 form-control" placeholder="hours" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceTimeLife.timeSinceOVH"></td>
                                            <td class="clr2"><input type="number" class="w60 form-control" placeholder="hours" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceTimeLife.timeSinceRepair"></td>
                                            <td class="clr2"><input type="number" class="w60 form-control" placeholder="hours" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceTimeLife.timeSinceInspection"></td>
                                            <td class="clr3"><input type="number" class="w60 form-control" placeholder="hours" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceTimeLife.lastSinceNew"></td>
                                            <td class="clr3"><input type="number" class="w60 form-control" placeholder="hours" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceTimeLife.lastSinceOVH"></td>
                                            <td class="clr3"><input type="number" class="w60 form-control" placeholder="hours" [ngModelOptions]="{standalone: true}" [(ngModel)]="sourceTimeLife.lastSinceInspection"></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="clear"></div>
                        </div>
                    </div>
                </div>
                <button type="submit" class="btn btn-success pull-right submit-btn" [disabled]="disableSavepartNumber" (click)="savestockLineclose()">Save</button>
            </form>
            <div class="pull-right"> © 2018 <a href="#">PAS</a> </div>
        </div>
    </div>
</div>

<p-dialog header="Error" [(visible)]="display" [modal]="true" [dismissableMask]="true" maximizedLeft="140px" maximizedTop="1850px"
          [width]="350" [minWidth]="200" [responsive]="true"
          [minY]="1050" [baseZIndex]="1100000">
    <p *ngIf="showCompanyError" [ngStyle]="{'color':'red'}"> Please Enter Company</p>
    <p *ngIf="showPartNumberError" [ngStyle]="{'color':'red'}"> Please Enter Part Number</p>
    <p *ngIf="showSerialNumberError" [ngStyle]="{'color':'red'}"> Please Enter Serial Number </p>
    <p *ngIf="showConditionError" [ngStyle]="{'color':'red'}"> Please Enter Condition</p>
    <p *ngIf="showSiteError" [ngStyle]="{'color':'red'}"> Please Select Site</p>
    <p *ngIf="showReceiveDateError" [ngStyle]="{'color':'red'}"> Please Select Receive Date</p>
    <p *ngIf="showReceiverNumberError" [ngStyle]="{'color':'red'}"> Please Enter receive Number</p>
    <p *ngIf="showGlAccountNumberError" [ngStyle]="{'color':'red'}"> Please Enter GL Account</p>
    <p *ngIf="QuantityOnHandError" [ngStyle]="{'color':'red'}"> Please Enter Quantity On Hand</p>
    <p *ngIf="invalidQtyError" [ngStyle]="{'color':'red'}"> Available Quantity cannot be negative</p>

</p-dialog>
