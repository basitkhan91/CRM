<div class="card">
    <div class="col-sm-12 font-padding">
        <div class="col-sm-2">
            PN: <span style="color:red">{{itemMasterData.partNumber}}</span>
        </div>
        <div class="col-sm-3">
            PN Description: <span style="color:red">{{itemMasterData.partDescription}}</span>
        </div>
        <div class="col-sm-3">
            Manufacturer: <span style="color:red">{{itemMasterData.manufacturerName}}</span>
        </div>
    </div>
    <div class="col-md-12">
        <div class="col-md-12 ">
            <div class="shadow-Box">
                <div class="col-sm-12">
                    <h4 class="float-left">{{selectedTab}}</h4>
                    <h4 class="float-right">
                        Add New
                        <a class="plusicon-cstm" href="#" data-toggle="modal" data-target="#alternateModalPopup"><i class="fa fa-plus-circle fa-lg"></i></a>
                    </h4>
                </div>
                <div class="col-md-2">
                    <div class="form-group ">
                        <label class="fs12">PN</label>
                        <p-autoComplete id="MappingPNumber" title="Part Number" [(ngModel)]="filterItemMaster.MappingPNumber"
                        [suggestions]="filterPNData" (completeMethod)="filetrDropdownValues($event, 'PN')" 
                         (onSelect)="partnmId($event)"
                                                         [ngModelOptions]="{standalone: true}"
                                                        [size]="30" [minLength]="1"
                                                        [dropdown]="true" class="autocomplete-customer">
                                            <ng-template let-partName pTemplate="part">
                                                <div class="ui-helper-clearfix">{{partName}}</div>
                                            </ng-template>
                                        </p-autoComplete>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-group">
                        <label class="fs12">
                            PN DESCRIPTION
                        </label>
                        <input type="text" class="ui-inputtext"  name="description" [(ngModel)]="filterItemMaster.Description" > 
                        <!-- <p-autoComplete id="partDescription" title="PN Description" [(ngModel)]="filterItemMaster.Description"
                        [suggestions]="filterDiscriptionData" (completeMethod)="filetrDropdownValues($event, 'Description')"
                        
                                                         [ngModelOptions]="{standalone: true}"
                                                      [size]="30" [minLength]="1"
                                                        [dropdown]="true" class="autocomplete-customer">
                                            <ng-template let-partName pTemplate="part">
                                                <div class="ui-helper-clearfix">{{partName}}</div>
                                            </ng-template>
                                        </p-autoComplete> -->
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-group">
                        <label class="fs12">MANUFCTURER </label>
                        <!-- <p-autoComplete id="manufacturer"
                        [suggestions]="filterManufacturerData"
                        title="MANUFCTURER" [(ngModel)]="filterItemMaster.ManufacturerId" (completeMethod)="filetrDropdownValues($event, 'Manufacturer')"
                                                        
                                                         [ngModelOptions]="{standalone: true}"
                                                        [size]="30" [minLength]="1"
                                                        [dropdown]="true" class="autocomplete-customer">
                                            <ng-template let-partName pTemplate="part">
                                                <div class="ui-helper-clearfix">{{partName}}</div>
                                            </ng-template>
                                        </p-autoComplete> -->
                        <select  required name="ManufacturerId"
                                [(ngModel)]="filterItemMaster.ManufacturerId" id="manufacturerId" title="Manufacturer Id" >
                            <ng-container *ngFor="let manufacturer of allManufacturerInfo">
                                <option [ngValue]="manufacturer.manufacturerId" *ngIf="manufacturer.isActive">
                                    {{manufacturer.name}}
                                </option>
                            </ng-container>
                        </select>
                    </div>
                </div>
                <div class="col-md-2" *ngIf="selectedTab == 'Equivalency'">
                    <div class="form-group">
                        <label class="fs12">Item Classication </label>
                        <!-- <p-autoComplete id="manufacturer"
                        [suggestions]="filterManufacturerData"
                        title="MANUFCTURER" [(ngModel)]="filterItemMaster.ManufacturerId" (completeMethod)="filetrDropdownValues($event, 'Manufacturer')"
                                                        
                                                            [ngModelOptions]="{standalone: true}"
                                                        [size]="30" [minLength]="1"
                                                        [dropdown]="true" class="autocomplete-customer">
                                            <ng-template let-partName pTemplate="part">
                                                <div class="ui-helper-clearfix">{{partName}}</div>
                                            </ng-template>
                                        </p-autoComplete> -->
                        <!-- <select  required name="ManufacturerId"
                                [(ngModel)]="filterItemMaster.itemClassificationId" id="itemClassificationId" title="Item Classification" >
                            <ng-container *ngFor="let manufacturer of allManufacturerInfo">
                                <option [ngValue]="manufacturer.manufacturerId" *ngIf="manufacturer.isActive">
                                    {{manufacturer.name}}
                                </option>
                            </ng-container>
                        </select> -->
                        <p-dropdown class="imstock-pddowm" [options]="filterPartItemClassificationData" filter="true" [ngModelOptions]="{standalone: true}" [(ngModel)]="filterItemMaster.itemClassificationId" id="itemClassificationId" placeholder="Select Aircraft" [showClear]="true"></p-dropdown>
                    </div>
                </div>
                
                <div class="col-md-1">
                    <div class="form-group">
                        <button type="button" class="btn btn-primary mtop20" (click)="getNtaeData(false)">
                            <i class="pi pi-search pi-search"></i>
                        </button>
                    </div>
                </div>
                <div class="clear"></div>
            </div>
        </div>
    </div>
</div>

<div class="card">
    <p-table [value]="ntaeData" [rows]="10" [columns]="ntaeTableColumns" [scrollable]="true" [style]="{width:'100%'}" [paginator]="true">
        <ng-template pTemplate="header" let-columns>
            <tr>
                <th *ngFor="let col of columns">
                    {{col.header}}
                </th>
                <th *ngIf="selectedTab == 'Equivalency'">Attachment</th>
                <th>Action</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-i="rowIndex" let-rowData let-columns="columns">
            <tr>
                <td *ngFor="let col of columns">
                    {{rowData[col.field]}}
                </td>
                <td  *ngIf="selectedTab == 'Equivalency'">
                    <a class="btn btn-primary-cstm" (click)="downloadFileUpload(rowData)" target="_blank" download>Download</a>
                </td>
                <td>
                    <button type="button" class="btn btn-danger nobg" (click)="deleteNTAERow(rowData.itemMappingId)">
                        <i class="fa fa-trash"></i>
                    </button>
                </td>
            </tr>
        </ng-template>
    </p-table>
    <br />

</div>

<!--New code for dialogue-->
<div id="alternateModalPopup" class="modal fade custom-popup" role="dialog" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-full">
        <!-- Modal content-->
        <div class="modal-content">
                <form #saveNtaeTabForm="ngForm"  (submit)="saveAlternate(saveNtaeTabForm)"  id="add-customerwork" name="" class="form-horizontal add-custustomer">
                        <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" (click)="closeModal()">×</button>
                <h4 class="modal-title">Add {{selectedTab}}</h4>
            </div>
            <div class="modal-body">
                <div class="form-row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="popup-plusicon-cstm">PN <strong class="clr-red">*</strong> </label>
                            <p-dropdown class="imstock-pddowm" [options]="pnData" filter="true"  [(ngModel)]="alternateData.MappingItemMasterId" name="MappingItemMasterId" id="MappingItemMasterId" title="Part Number" required (onChange)="bindPartDataInPopup($event)" placeholder="Select Aircraft" [showClear]="true"></p-dropdown>
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="popup-plusicon-cstm">
                                Description</label> 
                                <input type="text"  class="form-control" disabled name="description" [(ngModel)]="alternateData.Description" > 
                            

                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="popup-plusicon-cstm">
                                Manufacturer        </label>              
                                <input type="text" class="form-control" disabled name="manufacturer"  [(ngModel)]="alternateData.manufacturer"  > 
                            
                        </div>
                    </div>
                </div>
                <div class="form-row" *ngIf="selectedTab == 'Equivalency'">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="popup-plusicon-cstm">
                                Item Classification        </label>
                                <input type="text" class="form-control" disabled name="itemClassificationId"  [(ngModel)]="alternateData.itemClassificationId"  >                                 
                                <!-- <input type="text" class="ui-inputtext" disabled name="manufacturer"  [(ngModel)]="alternateData.manufacturer"  >  -->
                            
                        </div>
                    </div>
                </div>
                <div class="form-row" *ngIf="selectedTab == 'Equivalency'">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label  class="popup-plusicon-cstm">
                                Document      <strong class="clr-red">*</strong>    </label>
                                <input type="file" name="gFileupload" id="gFileupload" required  title="Document" (change)="fileUploadNtae($event)"   class="uploaddoc upload-file"  />
               
                                <!-- <p-fileUpload name="gFileupload"  [showCancelButton]="false" [showUploadButton]="false" customUpload="true" (change)="fileUploadNtae($event)"></p-fileUpload>  -->
                                <!-- <input type="text" class="ui-inputtext" disabled name="manufacturer"  [(ngModel)]="alternateData.manufacturer"  >  -->
                           
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary-cstm"  (click)="saveAlternate(saveNtaeTabForm)">Save</button>
                <button #closeAddPopup type="button" class="btn btn-danger-cstm" data-dismiss="modal" (click)="closeModal()">Close</button>
            </div>
            </form>
        </div>
    </div>
</div>

<p-dialog header="Alert" [(visible)]="displayNtae" [modal]="true" [dismissableMask]="true" maximizedLeft="140px"
          maximizedTop="140px" [width]="350" [minWidth]="200" [responsive]="true" [minY]="1050" [baseZIndex]="1100000">


    <h5 [ngStyle]="{'color':'red'}">
        Please Enter (*) Mandatory Fields
        <!-- <pre>{{listOfErrors | json}}</pre> -->
        
    </h5>
    <ul  [ngStyle]="{'color':'red'}">
        <li *ngFor="let error of listOfErrors">{{error}}</li>
    </ul>
    <p-footer>
        <button type="button" pButton icon="pi pi-check" (click)="displayNtae=false" label="Close"></button>
    </p-footer>

</p-dialog>
