<div class="right_col" role="main">
  <div class="x_content">
    <div class="card">
      <div class="card-header">
        <nav aria-label="breadcrumb">
          <ol
            class="breadcrumb rpo-bcrumb"
            style="background-color: transparent;"
          >
            <li class="breadcrumb-item active" aria-current="page">
              Sales Order Quote
            </li>
            <li class="breadcrumb-item" aria-current="page">
              Create Quote
            </li>
          </ol>
        </nav>
      </div>
      <div class="card-body">
        <h4 class="po-head">Search Customer</h4>

        <!--

       
        <div class="right_col" role="main">
          <div class="ui-g ui-fluid">
            <div class="ui-g-12 ui-md-1">
              <div>
                <span>Customer Name</span>
              </div>
              <div class="ui-input-control">
                <input type="text" pInputText [(ngModel)]="query.Name" />
              </div>
            </div>
            <div class="ui-g-12 ui-md-1">
              <div>
                <span>Customer Code</span>
              </div>
              <div class="ui-input-control">
                <input
                  type="text"
                  pInputText
                  [(ngModel)]="query.CustomerCode"
                />
              </div>
            </div>

            <div class="ui-g-12 ui-md-1">
              <div>
                <span>Customer Contact</span>
              </div>
              <div class="ui-input-control">
                <input type="text" pInputText [(ngModel)]="query.contact" />
              </div>
            </div>

            <div class="ui-g-12 ui-md-1">
              <div>
                <span>Customer Email</span>
              </div>
              <div class="ui-input-control">
                <input type="text" pInputText [(ngModel)]="query.Email" />
              </div>
            </div>

            <div class="ui-g-12 ui-md-1">
              <div>
                <span>Customer Phone</span>
              </div>
              <div class="ui-input-control">
                <input type="text" pInputText [(ngModel)]="query.Phone" />
              </div>
            </div>

            <div class="ui-g-12 ui-md-1">
              <div>
                <span>City</span>
              </div>
              <div class="ui-input-control">
                <input type="text" pInputText [(ngModel)]="query.City" />
              </div>
            </div>

            <div class="ui-g-12 ui-md-1">
              <div>
                <span>State</span>
              </div>
              <div class="ui-input-control">
                <input
                  type="text"
                  pInputText
                  [(ngModel)]="query.StateOrProvince"
                />
              </div>
            </div>

            <div class="ui-g-12 ui-md-2">
              <div>
                <span>Primary Sales Person</span>
              </div>
              <div class="ui-input-control">
                <input
                  type="text"
                  pInputText
                  [(ngModel)]="query.PrimarySalesPersonFirstName"
                />
              </div>
            </div>
            <div class="ui-g-12 ui-md-1">
              <div>
                &nbsp;
              </div>
              <button
                (click)="onSearch($event)"
                class="btn btn-primary"
                style="margin-bottom: -10px; border-radius: 5px;"
              >
                Search
              </button>
            </div>
          </div>
        </div>
 -->
        <div style="margin-top:15px;">
          <h4 class="po-head">Customer's List</h4>


          <p-table #dt
                 class="rpo-table-cstm rro-table-cstm"
                 [value]="data"
                 [first]="0"
                 [rows]="pageSize"
                 [paginator]="true"
                 [pageLinks]="3"
                 [rowsPerPageOptions]="[10, 20, 50, 100]"
                 [columns]="selectedColumns"
                 selectionMode="multiple"
                 [lazy]="true"
                 (onLazyLoad)="loadData($event)"
                 [resizableColumns]="true"
                 [reorderableColumns]="true"
                 [totalRecords]="totalRecords"
                 [scrollable]="true" scrollHeight="450px">
            <ng-template pTemplate="caption">
                <div style="text-align: right;margin-left:-6px !important; min-height: 30px;">
                    <p-multiSelect [maxSelectedLabels]="2"
                                   [options]="headers"
                                   optionLabel="header"
                                   [(ngModel)]="selectedColumns"
                                   [style]="{ minWidth: '220px' }"
                                   style="float:left"
                                   (onChange)="columnsChanges()"></p-multiSelect>

                    <div style=" left: -10px;"
                         class="inner-addon right-addon w50 inline-block  g-filter-search-cstm">
                        <i class="fa fa-search"></i>
                        <input type="text"
                               pInputText
                               size="50"
                               class="form-control ui-autocomplete-input"
                               (input)="globalSearch($event.target.value)"
                               placeholder="Filter" />
                    </div>
                    <button type="button"
                            class="btn btn-primary "
                            matTooltip="Download Data" matTooltipPosition="above"
                            pButton
                            icon="fa-download"
                            iconPos="left"
                            label="Export Data"
                            style="left:-10px; padding: 5px 10px !important;"
                            (click)="dt.exportCSV()"></button>
                    <button type="button"
                            class="btn btn-primary "
                            matTooltip="Download Selected Data" matTooltipPosition="above"
                            pButton
                            icon="fa-download"
                            iconPos="left"
                            label="Export Selected Data"
                            style="left:-10px; padding: 5px 10px !important;"
                            (click)="dt.exportCSV({ selectionOnly: true })"></button>
                    <!-- <button type="button"
                            class="btn btn-primary "
                            matTooltip="Refresh Data" matTooltipPosition="above"
                            pButton
                            icon="fa-refresh"
                            iconPos="left"
                            label="Refresh"
                            style="left:-10px; padding: 5px 10px !important;"
                            (click)="refreshList();"></button> -->
                </div>
            </ng-template>
            <ng-template pTemplate="colgroup" let-columns>
                <colgroup>
                    <col *ngFor="let col of columns" style="width:130px">
                </colgroup>
            </ng-template>

            <ng-template pTemplate="header" let-columns>
                <tr>

                    <th style="width:auto"
                        *ngFor="let col of columns"
                        pResizableColumn
                        pReorderableColumn
                        [pSortableColumn]="col.field">
                        {{ col.header }}
                        <p-sortIcon [field]="col.field"></p-sortIcon>
                    </th>
                    <th style="width:180px;position:sticky"
                        *ngIf="selectedColumns.length > 0">
                        Actions
                    </th>
                </tr>
                <tr>
                    <th style="width:auto" *ngFor="let col of columns" [ngSwitch]="col.field">
                        <input style="width:100%;" pInputText type="text" (input)="dt.filter($event.target.value, col.field, 'contains')">
                    </th>
                    <th style="width:200px;position:sticky"></th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-rowData let-columns="columns">
                <tr [pSelectableRowDblClick]="rowData" [pSelectableRow]="rowData" pReorderableRowHandle (dblclick)="viewSelectedRow(rowData)">
                    <td style="width:auto"
                        *ngFor="let col of columns"
                        class="ui-resizable-column"
                        pReorderableRowHandle>
                        {{
              col.field == 'createdDate'
                ? (rowData[col.field] | date: 'MM/dd/yyyy')
                : rowData[col.field] && col.field == 'updatedDate'
                ? (rowData[col.field] | date: 'MM/dd/yyyy')
                : rowData[col.field]
                        }}
                    </td>
                    <td class="action-icons-cstm" style="width:180px" *ngIf="selectedColumns.length > 0">
                        <div>
                           <span>
                        <a class="btn btn-info boxed-float-btn nobg"
                           data-toggle="tooltip"
                           (click)="viewSelectedRow(rowData)"
                           
                           matTooltip="View">
                            <i class="fa fa-eye"></i>
                        </a>
                    </span>
                  <button
                    class="btn-add"
                    mat-icon-button
                    (click)="createQuote(rowData)"
                    matTooltip="Create Quote"
                    style="font-weight: bold;"
                  >
                    <mat-icon>add</mat-icon>
                  </button>
                        </div>
                    </td>
                </tr>
            </ng-template>
            <ng-template pTemplate="summary" id="footer">
                <label id="footer" class="footer">No'of records:</label>
                <input style="width: 5%;"
                       [(ngModel)]="totalRecords"
                       [disabled]="true"
                       pInputText
                       type="text" />
                &nbsp;&nbsp;
                <label id="footer" class="footer1">Pages Count:</label>
                <input style="width: 5%;"
                       [(ngModel)]="totalPages"
                       [disabled]="true"
                       pInputText
                       type="text" />
            </ng-template>
        </p-table>
        </div>
      </div>
    </div>
  </div>
</div>
